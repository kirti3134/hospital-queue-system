/*! For license information please see main.e17735a4.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var a=n(43),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,r={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!l.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:s,type:e,key:c,ref:d,props:r,_owner:o.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,f(b,v.prototype),b.isPureReactComponent=!0;var N=Array.isArray,j=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var s,r={},i=null,o=null;if(null!=t)for(s in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,s)&&!k.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:e,key:i,ref:o,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,s,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return i=i(l=e),e=""===r?"."+T(l,0):r,N(i)?(s="",null!=e&&(s=e.replace(E,"$&/")+"/"),_(i,t,s,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",N(e))for(var c=0;c<e.length;c++){var d=r+T(o=e[c],c);l+=_(o,t,s,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=_(o=o.value,t,s,d=r+T(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var a=[],s=0;return _(e,a,"","",function(e){return t.call(n,e,s++)}),a}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},L={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:L,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=i,t.PureComponent=x,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=f({},e.props),r=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:n,type:e.type,key:r,ref:i,props:s,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,s=e[a];if(!(0<r(s,t)))break e;e[a]=t,e[n]=s,n=a}}function a(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,s=e.length,i=s>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,n))c<s&&0>r(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<s&&0>r(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=a(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function N(e){if(g=!1,b(e),!f)if(null!==a(c))f=!0,L(j);else{var t=a(d);null!==t&&R(N,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,y(C),C=-1),p=!0;var r=m;try{for(b(n),h=a(c);null!==h&&(!(h.expirationTime>n)||e&&!_());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===a(c)&&s(c),b(n)}else s(c);h=a(c)}if(null!==h)var l=!0;else{var u=a(d);null!==u&&R(N,u.startTime-n),l=!1}return l}finally{h=null,m=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,E=5,T=-1;function _(){return!(t.unstable_now()-T<E)}function A(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?w():(k=!1,S=null)}}else k=!1}if("function"===typeof x)w=function(){x(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,D=P.port2;P.port1.onmessage=A,w=function(){D.postMessage(null)}}else w=function(){v(A,0)};function L(e){S=e,k||(k=!0,w())}function R(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,L(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,s,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(e.sortIndex=r,n(d,e),null===a(c)&&e===a(d)&&(g?(y(C),C=-1):g=!0,R(N,r-i))):(e.sortIndex=o,n(c,e),f||p||(f=!0,L(j))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},391:(e,t,n)=>{var a=n(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var a=n(43),s=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,n,a,s,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,a){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,a)&&(n=null),a||null===s?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,a=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var I,U=Object.assign;function M(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),r=a.stack.split("\n"),i=s.length-1,o=r.length-1;1<=i&&0<=o&&s[i]!==r[o];)o--;for(;1<=i&&0<=o;i--,o--)if(s[i]!==r[o]){if(1!==i||1!==o)do{if(i--,0>--o||s[i]!==r[o]){var l="\n"+s[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?M(e):""}function B(e){switch(e.tag){case 5:return M(e.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case j:return"Portal";case S:return"Profiler";case k:return"StrictMode";case _:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=H(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&a&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(a&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function re(e,t){var n=H(t.value),a=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),s=fe(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,s):e[n]=s}}Object.keys(me).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ne(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,ke=null;function Se(e){if(e=xs(e)){if("function"!==typeof je)throw Error(r(280));var t=e.stateNode;t&&(t=Ns(t),je(e.stateNode,e.type,t))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Ee(){if(we){var e=we,t=ke;if(ke=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function _e(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Te(e,t,n)}finally{Ae=!1,(null!==we||null!==ke)&&(_e(),Ee())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var a=Ns(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var Le=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Le=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Le=!1}function Oe(e,t,n,a,s,r,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ie=!1,Ue=null,Me=!1,Fe=null,ze={onError:function(e){Ie=!0,Ue=e}};function Be(e,t,n,a,s,r,i,o,l){Ie=!1,Ue=null,Oe.apply(ze,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,a=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(a=s.return)){n=a;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return He(s),e;if(i===a)return He(s),t;i=i.sibling}throw Error(r(188))}if(n.return!==a.return)n=s,a=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,a=i;break}if(l===a){o=!0,a=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,a=s;break}if(l===a){o=!0,a=i,n=s;break}l=l.sibling}if(!o)throw Error(r(189))}}if(n.alternate!==a)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var $e=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Ke=s.unstable_shouldYield,Je=s.unstable_requestPaint,Ye=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,at=s.unstable_IdlePriority,st=null,rt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,s=e.suspendedLanes,r=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~s;0!==o?a=ut(o):0!==(r&=i)&&(a=ut(r))}else 0!==(i=n&~s)?a=ut(i):0!==r&&(a=ut(r));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&s)&&((s=a&-a)>=(r=t&-t)||16===s&&0!==(4194240&r)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)s=1<<(n=31-it(t)),a|=e[n],t&=~s;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-it(n),s=1<<a;s&t|e[a]&t&&(e[a]|=t),n&=~s}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt,jt,wt,kt,St,Ct=!1,Et=[],Tt=null,_t=null,At=null,Pt=new Map,Dt=new Map,Lt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ot(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function It(e,t,n,a,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=xs(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Ut(e){var t=ys(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,function(){wt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xs(n))&&jt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);be=a,n.target.dispatchEvent(a),be=null,t.shift()}return!0}function Ft(e,t,n){Mt(e)&&n.delete(t)}function zt(){Ct=!1,null!==Tt&&Mt(Tt)&&(Tt=null),null!==_t&&Mt(_t)&&(_t=null),null!==At&&Mt(At)&&(At=null),Pt.forEach(Ft),Dt.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Et.length){Bt(Et[0],e);for(var n=1;n<Et.length;n++){var a=Et[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Tt&&Bt(Tt,e),null!==_t&&Bt(_t,e),null!==At&&Bt(At,e),Pt.forEach(t),Dt.forEach(t),n=0;n<Lt.length;n++)(a=Lt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Lt.shift()}var Wt=b.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,a){var s=xt,r=Wt.transition;Wt.transition=null;try{xt=1,$t(e,t,n,a)}finally{xt=s,Wt.transition=r}}function Qt(e,t,n,a){var s=xt,r=Wt.transition;Wt.transition=null;try{xt=4,$t(e,t,n,a)}finally{xt=s,Wt.transition=r}}function $t(e,t,n,a){if(Ht){var s=Kt(e,t,n,a);if(null===s)Ha(e,t,a,Gt,n),Ot(e,a);else if(function(e,t,n,a,s){switch(t){case"focusin":return Tt=It(Tt,e,t,n,a,s),!0;case"dragenter":return _t=It(_t,e,t,n,a,s),!0;case"mouseover":return At=It(At,e,t,n,a,s),!0;case"pointerover":var r=s.pointerId;return Pt.set(r,It(Pt.get(r)||null,e,t,n,a,s)),!0;case"gotpointercapture":return r=s.pointerId,Dt.set(r,It(Dt.get(r)||null,e,t,n,a,s)),!0}return!1}(s,e,t,n,a))a.stopPropagation();else if(Ot(e,a),4&t&&-1<Rt.indexOf(e)){for(;null!==s;){var r=xs(s);if(null!==r&&Nt(r),null===(r=Kt(e,t,n,a))&&Ha(e,t,a,Gt,n),r===s)break;s=r}null!==s&&a.stopPropagation()}else Ha(e,t,a,null,n)}}var Gt=null;function Kt(e,t,n,a){if(Gt=null,null!==(e=ys(e=Ne(a))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,a=n.length,s="value"in Yt?Yt.value:Yt.textContent,r=s.length;for(e=0;e<a&&n[e]===s[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===s[r-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function sn(e){function t(t,n,a,s,r){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:an,this.isPropagationStopped=an,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var rn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=U({},cn,{view:0,detail:0}),hn=sn(un),mn=U({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(rn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=rn=0,ln=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(mn),fn=sn(U({},mn,{dataTransfer:0})),gn=sn(U({},un,{relatedTarget:0})),vn=sn(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),bn=sn(U({},cn,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Sn(){return kn}var Cn=U({},un,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=sn(Cn),Tn=sn(U({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=sn(U({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=sn(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=U({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Pn),Ln=[9,13,27,32],Rn=d&&"CompositionEvent"in window,On=null;d&&"documentMode"in document&&(On=document.documentMode);var In=d&&"TextEvent"in window&&!On,Un=d&&(!Rn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,a){Ce(a),0<(t=Qa(t,"onChange")).length&&(n=new dn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Qn=null,$n=null;function Gn(e){Ma(e,0)}function Kn(e){if($(bs(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(d){var Xn;if(d){var Zn="oninput"in document;if(!Zn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Zn="function"===typeof ea.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function ta(){Qn&&(Qn.detachEvent("onpropertychange",na),$n=Qn=null)}function na(e){if("value"===e.propertyName&&Kn($n)){var t=[];Vn(t,$n,e,Ne(e)),Pe(Gn,t)}}function aa(e,t,n){"focusin"===e?(ta(),$n=n,(Qn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function sa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn($n)}function ra(e,t){if("click"===e)return Kn(t)}function ia(e,t){if("input"===e||"change"===e)return Kn(t)}var oa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(oa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var s=n[a];if(!u.call(t,s)||!oa(e[s],t[s]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function ua(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ua(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ha(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pa(e){var t=ha(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ua(n.ownerDocument.documentElement,n)){if(null!==a&&ma(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(a.start,s);a=void 0===a.end?r:Math.min(a.end,s),!e.extend&&r>a&&(s=a,a=r,r=s),s=da(n,r);var i=da(n,a);s&&i&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fa=d&&"documentMode"in document&&11>=document.documentMode,ga=null,va=null,ya=null,xa=!1;function ba(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xa||null==ga||ga!==G(a)||("selectionStart"in(a=ga)&&ma(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ya&&la(ya,a)||(ya=a,0<(a=Qa(va,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function Na(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},wa={},ka={};function Sa(e){if(wa[e])return wa[e];if(!ja[e])return e;var t,n=ja[e];for(t in n)if(n.hasOwnProperty(t)&&t in ka)return wa[e]=n[t];return e}d&&(ka=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var Ca=Sa("animationend"),Ea=Sa("animationiteration"),Ta=Sa("animationstart"),_a=Sa("transitionend"),Aa=new Map,Pa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(e,t){Aa.set(e,t),l(t,[e])}for(var La=0;La<Pa.length;La++){var Ra=Pa[La];Da(Ra.toLowerCase(),"on"+(Ra[0].toUpperCase()+Ra.slice(1)))}Da(Ca,"onAnimationEnd"),Da(Ea,"onAnimationIteration"),Da(Ta,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(_a,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ia=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Ua(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,s,i,o,l,c){if(Be.apply(this,arguments),Ie){if(!Ie)throw Error(r(198));var d=Ue;Ie=!1,Ue=null,Me||(Me=!0,Fe=d)}}(a,t,void 0,e),e.currentTarget=null}function Ma(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],s=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;Ua(s,o,c),r=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;Ua(s,o,c),r=l}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Fa(e,t){var n=t[fs];void 0===n&&(n=t[fs]=new Set);var a=e+"__bubble";n.has(a)||(Wa(t,e,2,!1),n.add(a))}function za(e,t,n){var a=0;t&&(a|=4),Wa(n,e,a,t)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function qa(e){if(!e[Ba]){e[Ba]=!0,i.forEach(function(t){"selectionchange"!==t&&(Ia.has(t)||za(t,!1,e),za(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ba]||(t[Ba]=!0,za("selectionchange",!1,t))}}function Wa(e,t,n,a){switch(Jt(t)){case 1:var s=Vt;break;case 4:s=Qt;break;default:s=$t}n=s.bind(null,t,n,e),s=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),a?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ha(e,t,n,a,s){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var o=a.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===i)for(i=a.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;i=i.return}for(;null!==o;){if(null===(i=ys(o)))return;if(5===(l=i.tag)||6===l){a=r=i;continue e}o=o.parentNode}}a=a.return}Pe(function(){var a=r,s=Ne(n),i=[];e:{var o=Aa.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=En;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Ca:case Ea:case Ta:l=vn;break;case _a:l=An;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=a;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=De(p,h))&&d.push(Va(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,s),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!ys(c)&&!c[ps])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?ys(c):null)&&(c!==(u=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=pn,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tn,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:bs(l),m=null==c?o:bs(c),(o=new d(f,p+"leave",l,n,s)).target=u,o.relatedTarget=m,f=null,ys(s)===a&&((d=new d(h,p+"enter",c,n,s)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=$a(m))p++;for(m=0,f=h;f;f=$a(f))m++;for(;0<p-m;)d=$a(d),p--;for(;0<m-p;)h=$a(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=$a(d),h=$a(h)}d=null}else d=null;null!==l&&Ga(i,o,l,d,!1),null!==c&&null!==u&&Ga(i,u,c,d,!0)}if("select"===(l=(o=a?bs(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Hn(o))if(Yn)g=ia;else{g=sa;var v=aa}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ra);switch(g&&(g=g(e,a))?Vn(i,g,n,s):(v&&v(e,o,a),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=a?bs(a):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(ga=v,va=a,ya=null);break;case"focusout":ya=va=ga=null;break;case"mousedown":xa=!0;break;case"contextmenu":case"mouseup":case"dragend":xa=!1,ba(i,n,s);break;case"selectionchange":if(fa)break;case"keydown":case"keyup":ba(i,n,s)}var y;if(Rn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else qn?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Un&&"ko"!==n.locale&&(qn||"onCompositionStart"!==x?"onCompositionEnd"===x&&qn&&(y=en()):(Xt="value"in(Yt=s)?Yt.value:Yt.textContent,qn=!0)),0<(v=Qa(a,x)).length&&(x=new bn(x,e,null,n,s),i.push({event:x,listeners:v}),y?x.data=y:null!==(y=Bn(n))&&(x.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),Zt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Qa(a,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),i.push({event:s,listeners:a}),s.data=y))}Ma(i,t)})}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qa(e,t){for(var n=t+"Capture",a=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=De(e,n))&&a.unshift(Va(e,r,s)),null!=(r=De(e,t))&&a.push(Va(e,r,s))),e=e.return}return a}function $a(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ga(e,t,n,a,s){for(var r=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===a)break;5===o.tag&&null!==c&&(o=c,s?null!=(l=De(n,r))&&i.unshift(Va(n,l,o)):s||null!=(l=De(n,r))&&i.push(Va(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Ka=/\r\n?/g,Ja=/\u0000|\uFFFD/g;function Ya(e){return("string"===typeof e?e:""+e).replace(Ka,"\n").replace(Ja,"")}function Xa(e,t,n){if(t=Ya(t),Ya(e)!==t&&n)throw Error(r(425))}function Za(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var as="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,is="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(os)}:as;function os(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,a=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===a)return e.removeChild(s),void qt(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=s}while(n);qt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ds(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var us=Math.random().toString(36).slice(2),hs="__reactFiber$"+us,ms="__reactProps$"+us,ps="__reactContainer$"+us,fs="__reactEvents$"+us,gs="__reactListeners$"+us,vs="__reactHandles$"+us;function ys(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ds(e);null!==e;){if(n=e[hs])return n;e=ds(e)}return t}n=(e=n).parentNode}return null}function xs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Ns(e){return e[ms]||null}var js=[],ws=-1;function ks(e){return{current:e}}function Ss(e){0>ws||(e.current=js[ws],js[ws]=null,ws--)}function Cs(e,t){ws++,js[ws]=e.current,e.current=t}var Es={},Ts=ks(Es),_s=ks(!1),As=Es;function Ps(e,t){var n=e.type.contextTypes;if(!n)return Es;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=t[s];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ds(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ls(){Ss(_s),Ss(Ts)}function Rs(e,t,n){if(Ts.current!==Es)throw Error(r(168));Cs(Ts,t),Cs(_s,n)}function Os(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var s in a=a.getChildContext())if(!(s in t))throw Error(r(108,W(e)||"Unknown",s));return U({},n,a)}function Is(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Es,As=Ts.current,Cs(Ts,e),Cs(_s,_s.current),!0}function Us(e,t,n){var a=e.stateNode;if(!a)throw Error(r(169));n?(e=Os(e,t,As),a.__reactInternalMemoizedMergedChildContext=e,Ss(_s),Ss(Ts),Cs(Ts,e)):Ss(_s),Cs(_s,n)}var Ms=null,Fs=!1,zs=!1;function Bs(e){null===Ms?Ms=[e]:Ms.push(e)}function qs(){if(!zs&&null!==Ms){zs=!0;var e=0,t=xt;try{var n=Ms;for(xt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Ms=null,Fs=!1}catch(s){throw null!==Ms&&(Ms=Ms.slice(e+1)),$e(Ze,qs),s}finally{xt=t,zs=!1}}return null}var Ws=[],Hs=0,Vs=null,Qs=0,$s=[],Gs=0,Ks=null,Js=1,Ys="";function Xs(e,t){Ws[Hs++]=Qs,Ws[Hs++]=Vs,Vs=e,Qs=t}function Zs(e,t,n){$s[Gs++]=Js,$s[Gs++]=Ys,$s[Gs++]=Ks,Ks=e;var a=Js;e=Ys;var s=32-it(a)-1;a&=~(1<<s),n+=1;var r=32-it(t)+s;if(30<r){var i=s-s%5;r=(a&(1<<i)-1).toString(32),a>>=i,s-=i,Js=1<<32-it(t)+s|n<<s|a,Ys=r+e}else Js=1<<r|n<<s|a,Ys=e}function er(e){null!==e.return&&(Xs(e,1),Zs(e,1,0))}function tr(e){for(;e===Vs;)Vs=Ws[--Hs],Ws[Hs]=null,Qs=Ws[--Hs],Ws[Hs]=null;for(;e===Ks;)Ks=$s[--Gs],$s[Gs]=null,Ys=$s[--Gs],$s[Gs]=null,Js=$s[--Gs],$s[Gs]=null}var nr=null,ar=null,sr=!1,rr=null;function ir(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function or(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ar=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ar=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ks?{id:Js,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ar=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(sr){var t=ar;if(t){var n=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=cs(n.nextSibling);var a=nr;t&&or(e,t)?ir(a,n):(e.flags=-4097&e.flags|2,sr=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,sr=!1,nr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function ur(e){if(e!==nr)return!1;if(!sr)return dr(e),sr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ar)){if(lr(e))throw hr(),Error(r(418));for(;t;)ir(e,t),t=cs(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ar=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ar=null}}else ar=nr?cs(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=ar;e;)e=cs(e.nextSibling)}function mr(){ar=nr=null,sr=!1}function pr(e){null===rr?rr=[e]:rr.push(e)}var fr=b.ReactCurrentBatchConfig;function gr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var a=n.stateNode}if(!a)throw Error(r(147,e));var s=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=s.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function vr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yr(e){return(0,e._init)(e._payload)}function xr(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Uc(n,e.mode,a)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,a){var r=n.type;return r===w?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===D&&yr(r)===t.type)?((a=s(t,n.props)).ref=gr(e,t,n),a.return=e,a):((a=Rc(n.type,n.key,n.props,null,e.mode,a)).ref=gr(e,t,n),a.return=e,a)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Mc(n,e.mode,a)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function u(e,t,n,a,r){return null===t||7!==t.tag?((t=Oc(n,e.mode,a,r)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=gr(e,null,t),n.return=e,n;case j:return(t=Mc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Oc(t,e.mode,n,null)).return=e,t;vr(e,t)}return null}function m(e,t,n,a){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===s?c(e,t,n,a):null;case j:return n.key===s?d(e,t,n,a):null;case D:return m(e,t,(s=n._init)(n._payload),a)}if(te(n)||O(n))return null!==s?null:u(e,t,n,a,null);vr(e,n)}return null}function p(e,t,n,a,s){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case N:return c(t,e=e.get(null===a.key?n:a.key)||null,a,s);case j:return d(t,e=e.get(null===a.key?n:a.key)||null,a,s);case D:return p(e,t,n,(0,a._init)(a._payload),s)}if(te(a)||O(a))return u(t,e=e.get(n)||null,a,s,null);vr(t,a)}return null}function f(s,r,o,l){for(var c=null,d=null,u=r,f=r=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=m(s,u,o[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(s,u),r=i(v,r,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===o.length)return n(s,u),sr&&Xs(s,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(s,o[f],l))&&(r=i(u,r,f),null===d?c=u:d.sibling=u,d=u);return sr&&Xs(s,f),c}for(u=a(s,u);f<o.length;f++)null!==(g=p(u,s,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),r=i(g,r,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(s,e)}),sr&&Xs(s,f),c}function g(s,o,l,c){var d=O(l);if("function"!==typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var x=m(s,f,y.value,c);if(null===x){null===f&&(f=v);break}e&&f&&null===x.alternate&&t(s,f),o=i(x,o,g),null===u?d=x:u.sibling=x,u=x,f=v}if(y.done)return n(s,f),sr&&Xs(s,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(s,y.value,c))&&(o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return sr&&Xs(s,g),d}for(f=a(s,f);!y.done;g++,y=l.next())null!==(y=p(f,s,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=i(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(s,e)}),sr&&Xs(s,g),d}return function e(a,r,i,l){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case N:e:{for(var c=i.key,d=r;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){n(a,d.sibling),(r=s(d,i.props.children)).return=a,a=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&yr(c)===d.type){n(a,d.sibling),(r=s(d,i.props)).ref=gr(a,d,i),r.return=a,a=r;break e}n(a,d);break}t(a,d),d=d.sibling}i.type===w?((r=Oc(i.props.children,a.mode,l,i.key)).return=a,a=r):((l=Rc(i.type,i.key,i.props,null,a.mode,l)).ref=gr(a,r,i),l.return=a,a=l)}return o(a);case j:e:{for(d=i.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(a,r.sibling),(r=s(r,i.children||[])).return=a,a=r;break e}n(a,r);break}t(a,r),r=r.sibling}(r=Mc(i,a.mode,l)).return=a,a=r}return o(a);case D:return e(a,r,(d=i._init)(i._payload),l)}if(te(i))return f(a,r,i,l);if(O(i))return g(a,r,i,l);vr(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(n(a,r.sibling),(r=s(r,i)).return=a,a=r):(n(a,r),(r=Uc(i,a.mode,l)).return=a,a=r),o(a)):n(a,r)}}var br=xr(!0),Nr=xr(!1),jr=ks(null),wr=null,kr=null,Sr=null;function Cr(){Sr=kr=wr=null}function Er(e){var t=jr.current;Ss(jr),e._currentValue=t}function Tr(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function _r(e,t){wr=e,Sr=kr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ar(e){var t=e._currentValue;if(Sr!==e)if(e={context:e,memoizedValue:t,next:null},null===kr){if(null===wr)throw Error(r(308));kr=e,wr.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return t}var Pr=null;function Dr(e){null===Pr?Pr=[e]:Pr.push(e)}function Lr(e,t,n,a){var s=t.interleaved;return null===s?(n.next=n,Dr(t)):(n.next=s.next,s.next=n),t.interleaved=n,Rr(e,a)}function Rr(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Or=!1;function Ir(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ur(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Tl)){var s=a.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Rr(e,n)}return null===(s=a.interleaved)?(t.next=t,Dr(a)):(t.next=s.next,s.next=t),a.interleaved=t,Rr(e,n)}function zr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Br(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=i:r=r.next=i,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qr(e,t,n,a){var s=e.updateQueue;Or=!1;var r=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(i=0,d=c=l=null,o=r;;){var h=o.lane,m=o.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=n,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=U({},u,h);break e;case 2:Or=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(h=o).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===d&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null!==(t=s.shared.interleaved)){s=t;do{i|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Il|=i,e.lanes=i,e.memoizedState=u}}function Wr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(null!==s){if(a.callback=null,a=n,"function"!==typeof s)throw Error(r(191,s));s.call(a)}}}var Hr={},Vr=ks(Hr),Qr=ks(Hr),$r=ks(Hr);function Gr(e){if(e===Hr)throw Error(r(174));return e}function Kr(e,t){switch(Cs($r,t),Cs(Qr,e),Cs(Vr,Hr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Vr),Cs(Vr,t)}function Jr(){Ss(Vr),Ss(Qr),Ss($r)}function Yr(e){Gr($r.current);var t=Gr(Vr.current),n=le(t,e.type);t!==n&&(Cs(Qr,e),Cs(Vr,n))}function Xr(e){Qr.current===e&&(Ss(Vr),Ss(Qr))}var Zr=ks(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ai=b.ReactCurrentDispatcher,si=b.ReactCurrentBatchConfig,ri=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(r(321))}function pi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oa(e[n],t[n]))return!1;return!0}function fi(e,t,n,a,s,i){if(ri=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Xi:Zi,e=n(a,s),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(r(301));i+=1,li=oi=null,t.updateQueue=null,ai.current=eo,e=n(a,s)}while(di)}if(ai.current=Yi,t=null!==oi&&null!==oi.next,ri=0,li=oi=ii=null,ci=!1,t)throw Error(r(300));return e}function gi(){var e=0!==ui;return ui=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function xi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=oi,s=a.baseQueue,i=n.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}a.baseQueue=s=i,n.pending=null}if(null!==s){i=s.next,a=a.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ri&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=a):c=c.next=h,ii.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==i);null===c?o=a:c.next=l,oa(a,t.memoizedState)||(xo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){s=e;do{i=s.lane,ii.lanes|=i,Il|=i,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ni(e){var t=yi(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var a=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);oa(i,t.memoizedState)||(xo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function ji(){}function wi(e,t){var n=ii,a=yi(),s=t(),i=!oa(a.memoizedState,s);if(i&&(a.memoizedState=s,xo=!0),a=a.queue,Oi(Ci.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ai(9,Si.bind(null,n,a,s,t),void 0,null),null===_l)throw Error(r(349));0!==(30&ri)||ki(n,t,s)}return s}function ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,a){t.value=n,t.getSnapshot=a,Ei(t)&&Ti(e)}function Ci(e,t,n){return n(function(){Ei(t)&&Ti(e)})}function Ei(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oa(e,n)}catch(a){return!0}}function Ti(e){var t=Rr(e,1);null!==t&&nc(t,e,1,-1)}function _i(e){var t=vi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},t.queue=e,e=e.dispatch=$i.bind(null,ii,e),[t.memoizedState,e]}function Ai(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Pi(){return yi().memoizedState}function Di(e,t,n,a){var s=vi();ii.flags|=e,s.memoizedState=Ai(1|t,n,void 0,void 0===a?null:a)}function Li(e,t,n,a){var s=yi();a=void 0===a?null:a;var r=void 0;if(null!==oi){var i=oi.memoizedState;if(r=i.destroy,null!==a&&pi(a,i.deps))return void(s.memoizedState=Ai(t,n,r,a))}ii.flags|=e,s.memoizedState=Ai(1|t,n,r,a)}function Ri(e,t){return Di(8390656,8,e,t)}function Oi(e,t){return Li(2048,8,e,t)}function Ii(e,t){return Li(4,2,e,t)}function Ui(e,t){return Li(4,4,e,t)}function Mi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Li(4,4,Mi.bind(null,t,e),n)}function zi(){}function Bi(e,t){var n=yi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&pi(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function qi(e,t){var n=yi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&pi(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&ri)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(oa(n,t)||(n=ft(),ii.lanes|=n,Il|=n,e.baseState=!0),t)}function Hi(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var a=si.transition;si.transition={};try{e(!1),t()}finally{xt=n,si.transition=a}}function Vi(){return yi().memoizedState}function Qi(e,t,n){var a=tc(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},Gi(e))Ki(t,n);else if(null!==(n=Lr(e,t,n,a))){nc(n,e,a,ec()),Ji(n,t,a)}}function $i(e,t,n){var a=tc(e),s={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gi(e))Ki(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,n);if(s.hasEagerState=!0,s.eagerState=o,oa(o,i)){var l=t.interleaved;return null===l?(s.next=s,Dr(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Lr(e,t,s,a))&&(nc(n,e,a,s=ec()),Ji(n,t,a))}}function Gi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Ki(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ji(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Yi={readContext:Ar,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Xi={readContext:Ar,useCallback:function(e,t){return vi().memoizedState=[e,void 0===t?null:t],e},useContext:Ar,useEffect:Ri,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,Mi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=vi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=vi();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Qi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},vi().memoizedState=e},useState:_i,useDebugValue:zi,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=_i(!1),t=e[0];return e=Hi.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ii,s=vi();if(sr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===_l)throw Error(r(349));0!==(30&ri)||ki(a,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ri(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Ai(9,Si.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=vi(),t=_l.identifierPrefix;if(sr){var n=Ys;t=":"+t+"R"+(n=(Js&~(1<<32-it(Js)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ar,useCallback:Bi,useContext:Ar,useEffect:Oi,useImperativeHandle:Fi,useInsertionEffect:Ii,useLayoutEffect:Ui,useMemo:qi,useReducer:bi,useRef:Pi,useState:function(){return bi(xi)},useDebugValue:zi,useDeferredValue:function(e){return Wi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(xi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ar,useCallback:Bi,useContext:Ar,useEffect:Oi,useImperativeHandle:Fi,useInsertionEffect:Ii,useLayoutEffect:Ui,useMemo:qi,useReducer:Ni,useRef:Pi,useState:function(){return Ni(xi)},useDebugValue:zi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[Ni(xi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ec(),s=tc(e),r=Mr(a,s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Fr(e,r,s))&&(nc(t,e,s,a),zr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ec(),s=tc(e),r=Mr(a,s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Fr(e,r,s))&&(nc(t,e,s,a),zr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),a=tc(e),s=Mr(n,a);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Fr(e,s,a))&&(nc(t,e,a,n),zr(t,e,a))}};function so(e,t,n,a,s,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(s,r))}function ro(e,t,n){var a=!1,s=Es,r=t.contextType;return"object"===typeof r&&null!==r?r=Ar(r):(s=Ds(t)?As:Ts.current,r=(a=null!==(a=t.contextTypes)&&void 0!==a)?Ps(e,s):Es),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function io(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,a){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ir(e);var r=t.contextType;"object"===typeof r&&null!==r?s.context=Ar(r):(r=Ds(t)?As:Ts.current,s.context=Ps(e,r)),s.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(no(e,t,r,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&ao.enqueueReplaceState(s,s.state,null),qr(e,n,s,a),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",a=t;do{n+=B(a),a=a.return}while(a);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:s,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Mr(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=a),uo(0,t)},n}function po(e,t,n){(n=Mr(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var s=t.value;n.payload=function(){return a(s)},n.callback=function(){uo(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof a&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new ho;var s=new Set;a.set(t,s)}else void 0===(s=a.get(t))&&(s=new Set,a.set(t,s));s.has(n)||(s.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,a,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mr(-1,1)).tag=2,Fr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,a){t.child=null===e?Nr(t,null,n,a):br(t,e.child,n,a)}function No(e,t,n,a,s){n=n.render;var r=t.ref;return _r(t,s),a=fi(e,t,n,a,r,s),n=gi(),null===e||xo?(sr&&n&&er(t),t.flags|=1,bo(e,t,a,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function jo(e,t,n,a,s){if(null===e){var r=n.type;return"function"!==typeof r||Dc(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,a,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,wo(e,t,r,a,s))}if(r=e.child,0===(e.lanes&s)){var i=r.memoizedProps;if((n=null!==(n=n.compare)?n:la)(i,a)&&e.ref===t.ref)return Ho(e,t,s)}return t.flags|=1,(e=Lc(r,a)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,n,a,s){if(null!==e){var r=e.memoizedProps;if(la(r,a)&&e.ref===t.ref){if(xo=!1,t.pendingProps=a=r,0===(e.lanes&s))return t.lanes=e.lanes,Ho(e,t,s);0!==(131072&e.flags)&&(xo=!0)}}return Co(e,t,n,a,s)}function ko(e,t,n){var a=t.pendingProps,s=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cs(Ll,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cs(Ll,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:n,Cs(Ll,Dl),Dl|=a}else null!==r?(a=r.baseLanes|n,t.memoizedState=null):a=n,Cs(Ll,Dl),Dl|=a;return bo(e,t,s,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,a,s){var r=Ds(n)?As:Ts.current;return r=Ps(t,r),_r(t,s),n=fi(e,t,n,a,r,s),a=gi(),null===e||xo?(sr&&a&&er(t),t.flags|=1,bo(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ho(e,t,s))}function Eo(e,t,n,a,s){if(Ds(n)){var r=!0;Is(t)}else r=!1;if(_r(t,s),null===t.stateNode)Wo(e,t),ro(t,n,a),oo(t,n,a,s),a=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ar(c):c=Ps(t,c=Ds(n)?As:Ts.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==a||l!==c)&&io(t,i,a,c),Or=!1;var h=t.memoizedState;i.state=h,qr(t,a,i,s),l=t.memoizedState,o!==a||h!==l||_s.current||Or?("function"===typeof d&&(no(t,n,d,a),l=t.memoizedState),(o=Or||so(t,n,o,a,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),i.props=a,i.state=l,i.context=c,a=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,Ur(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ar(l):l=Ps(t,l=Ds(n)?As:Ts.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,a,l),Or=!1,h=t.memoizedState,i.state=h,qr(t,a,i,s);var p=t.memoizedState;o!==u||h!==p||_s.current||Or?("function"===typeof m&&(no(t,n,m,a),p=t.memoizedState),(c=Or||so(t,n,c,a,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=p),i.props=a,i.state=p,i.context=l,a=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return To(e,t,n,a,r,s)}function To(e,t,n,a,s,r){So(e,t);var i=0!==(128&t.flags);if(!a&&!i)return s&&Us(t,n,!1),Ho(e,t,r);a=t.stateNode,yo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=br(t,e.child,null,r),t.child=br(t,null,o,r)):bo(e,t,o,r),t.memoizedState=a.state,s&&Us(t,n,!0),t.child}function _o(e){var t=e.stateNode;t.pendingContext?Rs(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Rs(0,t.context,!1),Kr(e,t.containerInfo)}function Ao(e,t,n,a,s){return mr(),pr(s),t.flags|=256,bo(e,t,n,a),t.child}var Po,Do,Lo,Ro,Oo={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var a,s=t.pendingProps,i=Zr.current,o=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cs(Zr,1&i),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,o?(s=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,s,0,null),e=Oc(e,s,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Oo,e):Mo(t,l));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,n,a,s,i,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,a=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,s=t.mode,a=Ic({mode:"visible",children:a.children},s,0,null),(i=Oc(i,s,o,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&br(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Oo,i);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===s.data){if(a=s.nextSibling&&s.nextSibling.dataset)var l=a.dgst;return a=l,Fo(e,t,o,a=co(i=Error(r(419)),a,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(a=_l)){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(a.suspendedLanes|o))?0:s)&&s!==i.retryLane&&(i.retryLane=s,Rr(e,s),nc(a,e,s,-1))}return fc(),Fo(e,t,o,a=co(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ar=cs(s.nextSibling),nr=t,sr=!0,rr=null,null!==e&&($s[Gs++]=Js,$s[Gs++]=Ys,$s[Gs++]=Ks,Js=e.id,Ys=e.overflow,Ks=t),t=Mo(t,a.children),t.flags|=4096,t)}(e,t,l,s,a,i,n);if(o){o=s.fallback,l=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==i?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Lc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?o=Lc(a,o):(o=Oc(o,l,n,null)).flags|=2,o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Oo,s}return e=(o=e.child).sibling,s=Lc(o,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Mo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,a){return null!==a&&pr(a),br(t,e.child,null,n),(e=Mo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Tr(e.return,t,n)}function Bo(e,t,n,a,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=n,r.tailMode=s)}function qo(e,t,n){var a=t.pendingProps,s=a.revealOrder,r=a.tail;if(bo(e,t,a.children,n),0!==(2&(a=Zr.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cs(Zr,a),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Bo(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ei(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Bo(t,!0,n,null,r);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=14680064&s.subtreeFlags,a|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function $o(e,t,n){var a=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Ds(t.type)&&Ls(),Qo(t),null;case 3:return a=t.stateNode,Jr(),Ss(_s),Ss(Ts),ni(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ic(rr),rr=null))),Do(e,t),Qo(t),null;case 5:Xr(t);var s=Gr($r.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(r(166));return Qo(t),null}if(e=Gr(Vr.current),ur(t)){a=t.stateNode,n=t.type;var i=t.memoizedProps;switch(a[hs]=t,a[ms]=i,e=0!==(1&t.mode),n){case"dialog":Fa("cancel",a),Fa("close",a);break;case"iframe":case"object":case"embed":Fa("load",a);break;case"video":case"audio":for(s=0;s<Oa.length;s++)Fa(Oa[s],a);break;case"source":Fa("error",a);break;case"img":case"image":case"link":Fa("error",a),Fa("load",a);break;case"details":Fa("toggle",a);break;case"input":J(a,i),Fa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Fa("invalid",a);break;case"textarea":se(a,i),Fa("invalid",a)}for(var l in ye(n,i),s=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Xa(a.textContent,c,e),s=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Xa(a.textContent,c,e),s=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fa("scroll",a)}switch(n){case"input":Q(a),Z(a,i,!0);break;case"textarea":Q(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Za)}a=s,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[hs]=t,e[ms]=a,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,a),n){case"dialog":Fa("cancel",e),Fa("close",e),s=a;break;case"iframe":case"object":case"embed":Fa("load",e),s=a;break;case"video":case"audio":for(s=0;s<Oa.length;s++)Fa(Oa[s],e);s=a;break;case"source":Fa("error",e),s=a;break;case"img":case"image":case"link":Fa("error",e),Fa("load",e),s=a;break;case"details":Fa("toggle",e),s=a;break;case"input":J(e,a),s=K(e,a),Fa("invalid",e);break;case"option":default:s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=U({},a,{value:void 0}),Fa("invalid",e);break;case"textarea":se(e,a),s=ae(e,a),Fa("invalid",e)}for(i in ye(n,s),c=s)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fa("scroll",e):null!=d&&x(e,i,d,l))}switch(n){case"input":Q(e),Z(e,a,!1);break;case"textarea":Q(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?ne(e,!!a.multiple,i,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Za)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(r(166));if(n=Gr($r.current),Gr(Vr.current),ur(t)){if(a=t.stateNode,n=t.memoizedProps,a[hs]=t,(i=a.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Xa(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xa(a.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[hs]=t,t.stateNode=a}return Qo(t),null;case 13:if(Ss(Zr),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sr&&null!==ar&&0!==(1&t.mode)&&0===(128&t.flags))hr(),mr(),t.flags|=98560,i=!1;else if(i=ur(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[hs]=t}else mr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),i=!1}else null!==rr&&(ic(rr),rr=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Rl&&(Rl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return Jr(),Do(e,t),null===e&&qa(t.stateNode.containerInfo),Qo(t),null;case 10:return Er(t.type._context),Qo(t),null;case 19:if(Ss(Zr),null===(i=t.memoizedState))return Qo(t),null;if(a=0!==(128&t.flags),null===(l=i.rendering))if(a)Vo(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cs(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==i.tail&&Ye()>ql&&(t.flags|=128,a=!0,Vo(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ei(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!sr)return Qo(t),null}else 2*Ye()-i.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,a=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ye(),t.sibling=null,n=Zr.current,Cs(Zr,a?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Go(e,t){switch(tr(t),t.tag){case 1:return Ds(t.type)&&Ls(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jr(),Ss(_s),Ss(Ts),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xr(t),null;case 13:if(Ss(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(Zr),null;case 4:return Jr(),null;case 10:return Er(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Lo=function(e,t,n,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,Gr(Vr.current);var r,i=null;switch(n){case"input":s=K(e,s),a=K(e,a),i=[];break;case"select":s=U({},s,{value:void 0}),a=U({},a,{value:void 0}),i=[];break;case"textarea":s=ae(e,s),a=ae(e,a),i=[];break;default:"function"!==typeof s.onClick&&"function"===typeof a.onClick&&(e.onclick=Za)}for(d in ye(n,a),n=null,s)if(!a.hasOwnProperty(d)&&s.hasOwnProperty(d)&&null!=s[d])if("style"===d){var l=s[d];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=s?s[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fa("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Ro=function(e,t,n,a){n!==a&&(t.flags|=4)};var Ko=!1,Jo=!1,Yo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){kc(e,t,a)}else n.current=null}function el(e,t,n){try{n()}catch(a){kc(e,t,a)}}var tl=!1;function nl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var s=a=a.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&el(t,n,r)}s=s.next}while(s!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[ms],delete t[fs],delete t[gs],delete t[vs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Za));else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var a=dl,s=ul;dl=null,hl(e,t,n),ul=s,null!==(dl=a)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),qt(e)):ls(dl,n.stateNode));break;case 4:a=dl,s=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=a,ul=s;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){s=a=a.next;do{var r=s,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&el(n,t,i),s=s.next}while(s!==a)}hl(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(a=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=a):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach(function(t){var a=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var s=n[a];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(r(160));ml(i,o,s),dl=null,ul=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(d){kc(s,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&a){try{nl(3,e,e.return),al(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&a&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),vl(e),512&a&&null!==n&&Zo(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){kc(e,e.return,g)}}if(4&a&&null!=(s=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&Y(s,i),xe(l,o);var d=xe(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(s,h):"dangerouslySetInnerHTML"===u?ue(s,h):"children"===u?he(s,h):x(s,u,h,d)}switch(l){case"input":X(s,i);break;case"textarea":re(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(s,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(s,!!i.multiple,i.defaultValue,!0):ne(s,!!i.multiple,i.multiple?[]:"",!1))}s[ms]=i}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&a){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(s=e.child).flags&&(i=null!==s.memoizedState,s.stateNode.isHidden=i,!i||null!==s.alternate&&null!==s.alternate.memoizedState||(Bl=Ye())),4&a&&pl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(d=Jo)||u,fl(t,e),Jo=d):fl(t,e),vl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(p=(m=Xo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){a=m,n=m.return;try{t=a,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(a,n,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){Nl(h);continue}}null!==p?(p.return=m,Xo=p):Nl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{s=h.stateNode,d?"function"===typeof(i=s.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&a&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var a=n;break e}n=n.return}throw Error(r(160))}switch(a.tag){case 5:var s=a.stateNode;32&a.flags&&(he(s,""),a.flags&=-33),cl(e,ol(e),s);break;case 3:case 4:var i=a.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(r(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,xl(e,t,n)}function xl(e,t,n){for(var a=0!==(1&e.mode);null!==Xo;){var s=Xo,r=s.child;if(22===s.tag&&a){var i=null!==s.memoizedState||Ko;if(!i){var o=s.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Ko;var c=Jo;if(Ko=i,(Jo=l)&&!c)for(Xo=s;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?jl(s):null!==l?(l.return=i,Xo=l):jl(s);for(;null!==r;)Xo=r,xl(r,t,n),r=r.sibling;Xo=s,Ko=o,Jo=c}bl(e)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,Xo=r):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Jo)if(null===n)a.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);a.componentDidUpdate(s,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Wr(t,i,a);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wr(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&qt(h)}}}break;default:throw Error(r(163))}Jo||512&t.flags&&sl(t)}catch(m){kc(t,t.return,m)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function Nl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){kc(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var s=t.return;try{a.componentDidMount()}catch(l){kc(t,s,l)}}var r=t.return;try{sl(t)}catch(l){kc(t,r,l)}break;case 5:var i=t.return;try{sl(t)}catch(l){kc(t,i,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var wl,kl=Math.ceil,Sl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,El=b.ReactCurrentBatchConfig,Tl=0,_l=null,Al=null,Pl=0,Dl=0,Ll=ks(0),Rl=0,Ol=null,Il=0,Ul=0,Ml=0,Fl=null,zl=null,Bl=0,ql=1/0,Wl=null,Hl=!1,Vl=null,Ql=null,$l=!1,Gl=null,Kl=0,Jl=0,Yl=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==fr.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,a){if(50<Jl)throw Jl=0,Yl=null,Error(r(185));vt(e,n,a),0!==(2&Tl)&&e===_l||(e===_l&&(0===(2&Tl)&&(Ul|=n),4===Rl&&oc(e,Pl)),ac(e,a),1===n&&0===Tl&&0===(1&t.mode)&&(ql=Ye()+500,Fs&&qs()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-it(r),o=1<<i,l=s[i];-1===l?0!==(o&n)&&0===(o&a)||(s[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var a=ht(e,e===_l?Pl:0);if(0===a)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fs=!0,Bs(e)}(lc.bind(null,e)):Bs(lc.bind(null,e)),is(function(){0===(6&Tl)&&qs()}),n=null;else{switch(bt(a)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=_c(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Xl=-1,Zl=0,0!==(6&Tl))throw Error(r(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var a=ht(e,e===_l?Pl:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var s=Tl;Tl|=2;var i=pc();for(_l===e&&Pl===t||(Wl=null,ql=Ye()+500,hc(e,t));;)try{yc();break}catch(l){mc(e,l)}Cr(),Sl.current=i,Tl=s,null!==Al?t=0:(_l=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(a=s,t=rc(e,s))),1===t)throw n=Ol,hc(e,0),oc(e,a),ac(e,Ye()),n;if(6===t)oc(e,a);else{if(s=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var s=n[a],r=s.getSnapshot;s=s.value;try{if(!oa(r(),s))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gc(e,a))&&(0!==(i=pt(e))&&(a=i,t=rc(e,i))),1===t))throw n=Ol,hc(e,0),oc(e,a),ac(e,Ye()),n;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:Nc(e,zl,Wl);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=as(Nc.bind(null,e,zl,Wl),t);break}Nc(e,zl,Wl);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,s=-1;0<a;){var o=31-it(a);i=1<<o,(o=t[o])>s&&(s=o),a&=~i}if(a=s,10<(a=(120>(a=Ye()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*kl(a/1960))-a)){e.timeoutHandle=as(Nc.bind(null,e,zl,Wl),a);break}Nc(e,zl,Wl);break;default:throw Error(r(329))}}}return ac(e,Ye()),e.callbackNode===n?sc.bind(null,e):null}function rc(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Ml,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),a=1<<n;e[n]=-1,t&=~a}}function lc(e){if(0!==(6&Tl))throw Error(r(327));jc();var t=ht(e,0);if(0===(1&t))return ac(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var a=pt(e);0!==a&&(t=a,n=rc(e,a))}if(1===n)throw n=Ol,hc(e,0),oc(e,t),ac(e,Ye()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nc(e,zl,Wl),ac(e,Ye()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(ql=Ye()+500,Fs&&qs())}}function dc(e){null!==Gl&&0===Gl.tag&&0===(6&Tl)&&jc();var t=Tl;Tl|=1;var n=El.transition,a=xt;try{if(El.transition=null,xt=1,e)return e()}finally{xt=a,El.transition=n,0===(6&(Tl=t))&&qs()}}function uc(){Dl=Ll.current,Ss(Ll)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Al)for(n=Al.return;null!==n;){var a=n;switch(tr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Ls();break;case 3:Jr(),Ss(_s),Ss(Ts),ni();break;case 5:Xr(a);break;case 4:Jr();break;case 13:case 19:Ss(Zr);break;case 10:Er(a.type._context);break;case 22:case 23:uc()}n=n.return}if(_l=e,Al=e=Lc(e.current,null),Pl=Dl=t,Rl=0,Ol=null,Ml=Ul=Il=0,zl=Fl=null,null!==Pr){for(t=0;t<Pr.length;t++)if(null!==(a=(n=Pr[t]).interleaved)){n.interleaved=null;var s=a.next,r=n.pending;if(null!==r){var i=r.next;r.next=s,a.next=i}n.pending=a}Pr=null}return e}function mc(e,t){for(;;){var n=Al;try{if(Cr(),ai.current=Yi,ci){for(var a=ii.memoizedState;null!==a;){var s=a.queue;null!==s&&(s.pending=null),a=a.next}ci=!1}if(ri=0,li=oi=ii=null,di=!1,ui=0,Cl.current=null,null===n||null===n.return){Rl=1,Ol=t,Al=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(r(426))}else if(sr&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),pr(lo(c,l));break e}}i=c=lo(c,l),4!==Rl&&(Rl=2),null===Fl?Fl=[i]:Fl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Br(i,mo(0,c,t));break e;case 1:l=c;var y=i.type,x=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Ql||!Ql.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t,Br(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Yi,null===e?Yi:e}function fc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===_l||0===(268435455&Il)&&0===(268435455&Ul)||oc(_l,Pl)}function gc(e,t){var n=Tl;Tl|=2;var a=pc();for(_l===e&&Pl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(s){mc(e,s)}if(Cr(),Tl=n,Sl.current=a,null!==Al)throw Error(r(261));return _l=null,Pl=0,Rl}function vc(){for(;null!==Al;)xc(Al)}function yc(){for(;null!==Al&&!Ke();)xc(Al)}function xc(e){var t=wl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=$o(n,t,Dl)))return void(Al=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Rl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Rl&&(Rl=5)}function Nc(e,t,n){var a=xt,s=El.transition;try{El.transition=null,xt=1,function(e,t,n,a){do{jc()}while(null!==Gl);if(0!==(6&Tl))throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-it(n),r=1<<s;t[s]=0,a[s]=-1,e[s]=-1,n&=~r}}(e,i),e===_l&&(Al=_l=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||$l||($l=!0,_c(tt,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=El.transition,El.transition=null;var o=xt;xt=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(es=Ht,ma(e=ha())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var s=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(N){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==a&&3!==h.nodeType||(c=o+a),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===n&&++d===s&&(l=o),m===i&&++u===a&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(r(163))}}catch(N){kc(t,t.return,N)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}f=tl,tl=!1}(e,n),gl(n,e),pa(ts),Ht=!!es,ts=es=null,e.current=n,yl(n,e,s),Je(),Tl=l,xt=o,El.transition=i}else e.current=n;if($l&&($l=!1,Gl=e,Kl=s),i=e.pendingLanes,0===i&&(Ql=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Ye()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],a(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Kl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Yl?Jl++:(Jl=0,Yl=e):Jl=0,qs()}(e,t,n,a)}finally{El.transition=s,xt=a}return null}function jc(){if(null!==Gl){var e=bt(Kl),t=El.transition,n=xt;try{if(El.transition=null,xt=16>e?16:e,null===Gl)var a=!1;else{if(e=Gl,Gl=null,Kl=0,0!==(6&Tl))throw Error(r(331));var s=Tl;for(Tl|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var m=(u=Xo).sibling,p=u.return;if(rl(u),u===d){Xo=null;break}if(null!==m){m.return=p,Xo=m;break}Xo=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var x=e.current;for(Xo=x;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=x;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(j){kc(l,l.return,j)}if(l===o){Xo=null;break e}var N=l.sibling;if(null!==N){N.return=l.return,Xo=N;break e}Xo=l.return}}if(Tl=s,qs(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(j){}a=!0}return a}finally{xt=n,El.transition=t}}return!1}function wc(e,t,n){e=Fr(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ac(e,t))}function kc(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Ql||!Ql.has(a))){t=Fr(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ac(t,e));break}}t=t.return}}function Sc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,_l===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Ye()-Bl?hc(e,0):Ml|=n),ac(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Rr(e,t))&&(vt(e,t,n),ac(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),Cc(e,n)}function _c(e,t){return $e(e,t)}function Ac(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,a){return new Ac(e,t,n,a)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,a,s,i){var o=2;if(a=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Oc(n.children,s,i,t);case k:o=8,s|=8;break;case S:return(e=Pc(12,n,t,2|s)).elementType=S,e.lanes=i,e;case _:return(e=Pc(13,n,t,s)).elementType=_,e.lanes=i,e;case A:return(e=Pc(19,n,t,s)).elementType=A,e.lanes=i,e;case L:return Ic(n,s,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case E:o=9;break e;case T:o=11;break e;case P:o=14;break e;case D:o=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,s)).elementType=e,t.type=a,t.lanes=i,t}function Oc(e,t,n,a){return(e=Pc(7,e,a,t)).lanes=n,e}function Ic(e,t,n,a){return(e=Pc(22,e,a,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Mc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,a,s,r,i,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Pc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ir(r),e}function Bc(e){if(!e)return Es;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ds(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Ds(n))return Os(e,n,t)}return t}function qc(e,t,n,a,s,r,i,o,l){return(e=zc(n,a,!0,e,0,r,0,o,l)).context=Bc(null),n=e.current,(r=Mr(a=ec(),s=tc(n))).callback=void 0!==t&&null!==t?t:null,Fr(n,r,s),e.current.lanes=s,vt(e,s,a),ac(e,a),e}function Wc(e,t,n,a){var s=t.current,r=ec(),i=tc(s);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mr(r,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Fr(s,t,i))&&(nc(e,s,i,r),zr(e,s,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_s.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:_o(t),mr();break;case 5:Yr(t);break;case 1:Ds(t.type)&&Is(t);break;case 4:Kr(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;Cs(jr,a._currentValue),a._currentValue=s;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Cs(Zr,1&Zr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Cs(Zr,1&Zr.current),null!==(e=Ho(e,t,n))?e.sibling:null);Cs(Zr,1&Zr.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return qo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Cs(Zr,Zr.current),a)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,sr&&0!==(1048576&t.flags)&&Zs(t,Qs,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Wo(e,t),e=t.pendingProps;var s=Ps(t,Ts.current);_r(t,n),s=fi(null,t,a,e,s,n);var i=gi();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ds(a)?(i=!0,Is(t)):i=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ir(t),s.updater=ao,t.stateNode=s,s._reactInternals=t,oo(t,a,e,n),t=To(null,t,a,!0,i,n)):(t.tag=0,sr&&i&&er(t),bo(null,t,s,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,a=(s=a._init)(a._payload),t.type=a,s=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(a),e=to(a,e),s){case 0:t=Co(null,t,a,e,n);break e;case 1:t=Eo(null,t,a,e,n);break e;case 11:t=No(null,t,a,e,n);break e;case 14:t=jo(null,t,a,to(a.type,e),n);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,Co(e,t,a,s=t.elementType===a?s:to(a,s),n);case 1:return a=t.type,s=t.pendingProps,Eo(e,t,a,s=t.elementType===a?s:to(a,s),n);case 3:e:{if(_o(t),null===e)throw Error(r(387));a=t.pendingProps,s=(i=t.memoizedState).element,Ur(e,t),qr(t,a,null,n);var o=t.memoizedState;if(a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ao(e,t,a,n,s=lo(Error(r(423)),t));break e}if(a!==s){t=Ao(e,t,a,n,s=lo(Error(r(424)),t));break e}for(ar=cs(t.stateNode.containerInfo.firstChild),nr=t,sr=!0,rr=null,n=Nr(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(mr(),a===s){t=Ho(e,t,n);break e}bo(e,t,a,n)}t=t.child}return t;case 5:return Yr(t),null===e&&cr(t),a=t.type,s=t.pendingProps,i=null!==e?e.memoizedProps:null,o=s.children,ns(a,s)?o=null:null!==i&&ns(a,i)&&(t.flags|=32),So(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Uo(e,t,n);case 4:return Kr(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=br(t,null,a,n):bo(e,t,a,n),t.child;case 11:return a=t.type,s=t.pendingProps,No(e,t,a,s=t.elementType===a?s:to(a,s),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Cs(jr,a._currentValue),a._currentValue=o,null!==i)if(oa(i.value,o)){if(i.children===s.children&&!_s.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Mr(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Tr(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(r(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Tr(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,_r(t,n),a=a(s=Ar(s)),t.flags|=1,bo(e,t,a,n),t.child;case 14:return s=to(a=t.type,t.pendingProps),jo(e,t,a,s=to(a.type,s),n);case 15:return wo(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:to(a,s),Wo(e,t),t.tag=1,Ds(a)?(e=!0,Is(t)):e=!1,_r(t,n),ro(t,a,s),oo(t,a,s,n),To(null,t,a,!0,e,n);case 19:return qo(e,t,n);case 22:return ko(e,t,n)}throw Error(r(156,t.tag))};var $c="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,n,a,s){var r=n._reactRootContainer;if(r){var i=r;if("function"===typeof s){var o=s;s=function(){var e=Hc(i);o.call(e)}}Wc(t,i,e,s)}else i=function(e,t,n,a,s){if(s){if("function"===typeof a){var r=a;a=function(){var e=Hc(i);r.call(e)}}var i=qc(t,a,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[ps]=i.current,qa(8===e.nodeType?e.parentNode:e),dc(),i}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof a){var o=a;a=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[ps]=l.current,qa(8===e.nodeType?e.parentNode:e),dc(function(){Wc(t,l,n,a)}),l}(n,t,e,s,a);return Hc(i)}Kc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Wc(e,t,null,null)},Kc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Wc(null,e,null,null)}),t[ps]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Ut(e)}},Nt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),ac(t,Ye()),0===(6&Tl)&&(ql=Ye()+500,qs()))}break;case 13:dc(function(){var t=Rr(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Qc(e,1)}},jt=function(e){if(13===e.tag){var t=Rr(e,134217728);if(null!==t)nc(t,e,134217728,ec());Qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),n=Rr(e,t);if(null!==n)nc(n,e,t,ec());Qc(e,t)}},kt=function(){return xt},St=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},je=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var s=Ns(a);if(!s)throw Error(r(90));$(a),X(a,s)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,_e=dc;var ed={usingClientEntryPoint:!1,Events:[xs,bs,Ns,Ce,Ee,cc]},td={findFiberByHostInstance:ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{st=ad.inject(nd),rt=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(r(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(r(299));var n=!1,a="",s=$c;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,a,s),e[ps]=t.current,qa(8===e.nodeType?e.parentNode:e),new Gc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(r(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(r(405));var a=null!=n&&n.hydratedSources||null,s=!1,i="",o=$c;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,s,0,i,o),e[ps]=t.current,qa(e),a)for(e=0;e<a.length;e++)s=(s=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Kc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(r(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(r(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Yc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,s){if(1&s&&(a=this(a)),8&s)return a;if("object"===typeof a&&a){if(4&s&&a.__esModule)return a;if(16&s&&"function"===typeof a.then)return a}var r=Object.create(null);n.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&a;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>a[e]);return i.default=()=>a,n.d(r,i),r}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};n.r(a),n.d(a,{Decoder:()=>Bt,Encoder:()=>Ft,PacketType:()=>Mt,protocol:()=>Ut});var s,r=n(43),i=n.t(r,2),o=n(391),l=n(950),c=n.t(l,2);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,a){return void 0===n&&(n=null),d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function y(e,t,n,a){void 0===a&&(a={});let{window:r=document.defaultView,v5Compat:i=!1}=a,o=r.history,l=s.Pop,c=null,m=v();function v(){return(o.state||{idx:null}).idx}function y(){l=s.Pop;let e=v(),t=null==e?null:e-m;m=e,c&&c({action:l,location:b.location,delta:t})}function x(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,o.replaceState(d({},o.state,{idx:m}),""));let b={get action(){return l},get location(){return e(r,o)},listen(e){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(u,y),c=e,()=>{r.removeEventListener(u,y),c=null}},createHref:e=>t(r,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let a=f(b.location,e,t);n&&n(a,e),m=v()+1;let d=p(a,m),u=b.createHref(a);try{o.pushState(d,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;r.location.assign(u)}i&&c&&c({action:l,location:b.location,delta:1})},replace:function(e,t){l=s.Replace;let a=f(b.location,e,t);n&&n(a,e),m=v();let r=p(a,m),d=b.createHref(a);o.replaceState(r,"",d),i&&c&&c({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var x;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(x||(x={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),N(e,t,n,!1)}function N(e,t,n,a){let s=O(("string"===typeof t?v(t):t).pathname||"/",n);if(null==s)return null;let r=j(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let o=0;null==i&&o<r.length;++o){let e=R(s);i=D(r[o],e,a)}return i}function j(e,t,n,a){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===a&&(a="");let s=(e,s,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};i.relativePath.startsWith("/")&&(h(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let o=z([a,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),j(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:P(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let a of w(e.path))s(e,t,a);else s(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[n,...a]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===a.length)return s?[r,""]:[r];let i=w(a.join("/")),o=[];return o.push(...i.map(e=>""===e?r:[r,e].join("/"))),s&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,S=3,C=2,E=1,T=10,_=-2,A=e=>"*"===e;function P(e,t){let n=e.split("/"),a=n.length;return n.some(A)&&(a+=_),t&&(a+=C),n.filter(e=>!A(e)).reduce((e,t)=>e+(k.test(t)?S:""===t?E:T),a)}function D(e,t,n){void 0===n&&(n=!1);let{routesMeta:a}=e,s={},r="/",i=[];for(let o=0;o<a.length;++o){let e=a[o],l=o===a.length-1,c="/"===r?t:t.slice(r.length)||"/",d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!a[a.length-1].route.index&&(d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),i.push({params:s,pathname:z([r,d.pathname]),pathnameBase:B(z([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=z([r,d.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(a.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let r=new RegExp(s,t?void 0:"i");return[r,a]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],i=r.replace(/(.)\/+$/,"$1"),o=s.slice(1),l=a.reduce((e,t,n)=>{let{paramName:a,isOptional:s}=t;if("*"===a){let e=o[n]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[a]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:r,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&"/"!==a?null:e.slice(n)||"/"}function I(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function U(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=U(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,a){let s;void 0===a&&(a=!1),"string"===typeof e?s=v(e):(s=d({},e),h(!s.pathname||!s.pathname.includes("?"),I("?","pathname","search",s)),h(!s.pathname||!s.pathname.includes("#"),I("#","pathname","hash",s)),h(!s.search||!s.search.includes("#"),I("#","search","hash",s)));let r,i=""===e||""===s.pathname,o=i?"/":s.pathname;if(null==o)r=n;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:a="",hash:s=""}="string"===typeof e?v(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:q(a),hash:W(s)}}(s,r),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const z=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],Q=(new Set(V),["get",...V]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$.apply(this,arguments)}const G=r.createContext(null);const K=r.createContext(null);const J=r.createContext(null);const Y=r.createContext(null);const X=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=r.createContext(null);function ee(){return null!=r.useContext(Y)}function te(){return ee()||h(!1),r.useContext(Y).location}function ne(e){r.useContext(J).static||r.useLayoutEffect(e)}function ae(){let{isDataRoute:e}=r.useContext(X);return e?function(){let{router:e}=me(ue.UseNavigateStable),t=fe(he.UseNavigateStable),n=r.useRef(!1);return ne(()=>{n.current=!0}),r.useCallback(function(a,s){void 0===s&&(s={}),n.current&&("number"===typeof a?e.navigate(a):e.navigate(a,$({fromRouteId:t},s)))},[e,t])}():function(){ee()||h(!1);let e=r.useContext(G),{basename:t,future:n,navigator:a}=r.useContext(J),{matches:s}=r.useContext(X),{pathname:i}=te(),o=JSON.stringify(M(s,n.v7_relativeSplatPath)),l=r.useRef(!1);return ne(()=>{l.current=!0}),r.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void a.go(n);let r=F(n,JSON.parse(o),i,"path"===s.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:z([t,r.pathname])),(s.replace?a.replace:a.push)(r,s.state,s)},[t,a,o,i,e])}()}function se(){let{matches:e}=r.useContext(X),t=e[e.length-1];return t?t.params:{}}function re(e,t,n,a){ee()||h(!1);let{navigator:i}=r.useContext(J),{matches:o}=r.useContext(X),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let u,m=te();if(t){var p;let e="string"===typeof t?v(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||h(!1),u=e}else u=m;let f=u.pathname||"/",g=f;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(e,{pathname:g});let x=de(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:z([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:z([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,a);return t&&x?r.createElement(Y.Provider,{value:{location:$({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:s.Pop}},x):x}function ie(){let e=function(){var e;let t=r.useContext(Z),n=pe(he.UseRouteError),a=fe(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[a]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:s},n):null,null)}const oe=r.createElement(ie,null);class le extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(X.Provider,{value:this.props.routeContext},r.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:a}=e,s=r.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(X.Provider,{value:t},a)}function de(e,t,n,a){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===a&&(a=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&a&&a.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:a}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||s){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,a,s)=>{let i,u=!1,h=null,m=null;var p;n&&(i=l&&a.route.id?l[a.route.id]:void 0,h=a.route.errorElement||oe,c&&(d<0&&0===s?(p="route-fallback",!1||ge[p]||(ge[p]=!0),u=!0,m=null):d===s&&(u=!0,m=a.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?h:u?m:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(ce,{match:a,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(a.route.ErrorBoundary||a.route.errorElement||0===s)?r.createElement(le,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function me(e){let t=r.useContext(G);return t||h(!1),t}function pe(e){let t=r.useContext(K);return t||h(!1),t}function fe(e){let t=function(){let e=r.useContext(X);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ge={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ye(e){let{to:t,replace:n,state:a,relative:s}=e;ee()||h(!1);let{future:i,static:o}=r.useContext(J),{matches:l}=r.useContext(X),{pathname:c}=te(),d=ae(),u=F(t,M(l,i.v7_relativeSplatPath),c,"path"===s),m=JSON.stringify(u);return r.useEffect(()=>d(JSON.parse(m),{replace:n,state:a,relative:s}),[d,m,s,n,a]),null}function xe(e){h(!1)}function be(e){let{basename:t="/",children:n=null,location:a,navigationType:i=s.Pop,navigator:o,static:l=!1,future:c}=e;ee()&&h(!1);let d=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:d,navigator:o,static:l,future:$({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof a&&(a=v(a));let{pathname:m="/",search:p="",hash:f="",state:g=null,key:y="default"}=a,x=r.useMemo(()=>{let e=O(m,d);return null==e?null:{location:{pathname:e,search:p,hash:f,state:g,key:y},navigationType:i}},[d,m,p,f,g,y,i]);return null==x?null:r.createElement(J.Provider,{value:u},r.createElement(Y.Provider,{children:n,value:x}))}function Ne(e){let{children:t,location:n}=e;return re(je(t),n)}new Promise(()=>{});r.Component;function je(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let s=[...t,a];if(e.type===r.Fragment)return void n.push.apply(n,je(e.props.children,s));e.type!==xe&&h(!1),e.props.index&&e.props.children&&h(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=je(e.props.children,s)),n.push(i)}),n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(va){}new Map;const we=i.startTransition;c.flushSync,i.useId;function ke(e){let{basename:t,children:n,future:a,window:s}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),y(function(e,t){let{pathname:n,search:a,hash:s}=e.location;return f("",{pathname:n,search:a,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,o)));let l=i.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:u}=a||{},h=r.useCallback(e=>{u&&we?we(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>l.listen(h),[l,h]),r.useEffect(()=>ve(a),[a]),r.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:a})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Se,Ce;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Se||(Se={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ce||(Ce={}));const Ee=Object.create(null);Ee.open="0",Ee.close="1",Ee.ping="2",Ee.pong="3",Ee.message="4",Ee.upgrade="5",Ee.noop="6";const Te=Object.create(null);Object.keys(Ee).forEach(e=>{Te[Ee[e]]=e});const _e={type:"error",data:"parser error"},Ae="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Pe="function"===typeof ArrayBuffer,De=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Le=(e,t,n)=>{let{type:a,data:s}=e;return Ae&&s instanceof Blob?t?n(s):Re(s,n):Pe&&(s instanceof ArrayBuffer||De(s))?t?n(s):Re(new Blob([s]),n):n(Ee[a]+(s||""))},Re=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Oe(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ie;const Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let xa=0;xa<64;xa++)Me[Ue.charCodeAt(xa)]=xa;const Fe="function"===typeof ArrayBuffer,ze=(e,t)=>{if("string"!==typeof e)return{type:"message",data:qe(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Be(e.substring(1),t)};return Te[n]?e.length>1?{type:Te[n],data:e.substring(1)}:{type:Te[n]}:_e},Be=(e,t)=>{if(Fe){const n=(e=>{let t,n,a,s,r,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)n=Me[e.charCodeAt(t)],a=Me[e.charCodeAt(t+1)],s=Me[e.charCodeAt(t+2)],r=Me[e.charCodeAt(t+3)],d[l++]=n<<2|a>>4,d[l++]=(15&a)<<4|s>>2,d[l++]=(3&s)<<6|63&r;return c})(e);return qe(n,t)}return{base64:!0,data:e}},qe=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,We=String.fromCharCode(30);function He(){return new TransformStream({transform(e,t){!function(e,t){Ae&&e.data instanceof Blob?e.data.arrayBuffer().then(Oe).then(t):Pe&&(e.data instanceof ArrayBuffer||De(e.data))?t(Oe(e.data)):Le(e,!1,e=>{Ie||(Ie=new TextEncoder),t(Ie.encode(e))})}(e,n=>{const a=n.length;let s;if(a<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,a);else if(a<65536){s=new Uint8Array(3);const e=new DataView(s.buffer);e.setUint8(0,126),e.setUint16(1,a)}else{s=new Uint8Array(9);const e=new DataView(s.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(a))}e.data&&"string"!==typeof e.data&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Ve;function Qe(e){return e.reduce((e,t)=>e+t.length,0)}function $e(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let a=0;for(let s=0;s<t;s++)n[s]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),n}function Ge(e){if(e)return function(e){for(var t in Ge.prototype)e[t]=Ge.prototype[t];return e}(e)}Ge.prototype.on=Ge.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Ge.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Ge.prototype.off=Ge.prototype.removeListener=Ge.prototype.removeAllListeners=Ge.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,a=this._callbacks["$"+e];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var s=0;s<a.length;s++)if((n=a[s])===t||n.fn===t){a.splice(s,1);break}return 0===a.length&&delete this._callbacks["$"+e],this},Ge.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(n){a=0;for(var s=(n=n.slice(0)).length;a<s;++a)n[a].apply(this,t)}return this},Ge.prototype.emitReserved=Ge.prototype.emit,Ge.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Ge.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ke="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Je="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const Xe=Je.setTimeout,Ze=Je.clearTimeout;function et(e,t){t.useNativeTimers?(e.setTimeoutFn=Xe.bind(Je),e.clearTimeoutFn=Ze.bind(Je)):(e.setTimeoutFn=Je.setTimeout.bind(Je),e.clearTimeoutFn=Je.clearTimeout.bind(Je))}function tt(e){return"string"===typeof e?function(e){let t=0,n=0;for(let a=0,s=e.length;a<s;a++)t=e.charCodeAt(a),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(a++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}function nt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class at extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class st extends Ge{constructor(e){super(),this.writable=!1,et(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new at(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ze(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class rt extends st{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(We),a=[];for(let s=0;s<n.length;s++){const e=ze(n[s],t);if(a.push(e),"error"===e.type)break}return a})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,a=new Array(n);let s=0;e.forEach((e,r)=>{Le(e,!1,e=>{a[r]=e,++s===n&&t(a.join(We))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=nt()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let it=!1;try{it="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(ya){}const ot=it;function lt(){}class ct extends rt{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class dt extends Ge{constructor(e,t,n){super(),this.createRequest=e,et(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Ye(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(va){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(va){}try{n.setRequestHeader("Accept","*/*")}catch(va){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"===typeof n.status?n.status:0)},0))},n.send(this._data)}catch(va){return void this.setTimeoutFn(()=>{this._onError(va)},0)}"undefined"!==typeof document&&(this._index=dt.requestsCount++,dt.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=lt,e)try{this._xhr.abort()}catch(va){}"undefined"!==typeof document&&delete dt.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(dt.requestsCount=0,dt.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ut);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Je?"pagehide":"unload",ut,!1)}function ut(){for(let e in dt.requests)dt.requests.hasOwnProperty(e)&&dt.requests[e].abort()}const ht=function(){const e=mt({xdomain:!1});return e&&null!==e.responseType}();function mt(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||ot))return new XMLHttpRequest}catch(va){}if(!t)try{return new(Je[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(va){}}const pt="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class ft extends st{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=pt?{}:Ye(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(ya){return this.emitReserved("error",ya)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],a=t===e.length-1;Le(n,this.supportsBinary,e=>{try{this.doWrite(n,e)}catch(va){}a&&Ke(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=nt()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const gt=Je.WebSocket||Je.MozWebSocket;const vt={websocket:class extends ft{createSocket(e,t,n){return pt?new gt(e,t,n):t?new gt(e,t):new gt(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends st{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(ya){return this.emitReserved("error",ya)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){Ve||(Ve=new TextDecoder);const n=[];let a=0,s=-1,r=!1;return new TransformStream({transform(i,o){for(n.push(i);;){if(0===a){if(Qe(n)<1)break;const e=$e(n,1);r=128===(128&e[0]),s=127&e[0],a=s<126?3:126===s?1:2}else if(1===a){if(Qe(n)<2)break;const e=$e(n,2);s=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),a=3}else if(2===a){if(Qe(n)<8)break;const e=$e(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),r=t.getUint32(0);if(r>Math.pow(2,21)-1){o.enqueue(_e);break}s=r*Math.pow(2,32)+t.getUint32(4),a=3}else{if(Qe(n)<s)break;const e=$e(n,s);o.enqueue(ze(r?e:Ve.decode(e),t)),a=0}if(0===s||s>e){o.enqueue(_e);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),a=He();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const s=()=>{n.read().then(e=>{let{done:t,value:n}=e;t||(this.onPacket(n),s())}).catch(e=>{})};s();const r={type:"open"};this.query.sid&&(r.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(r).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],a=t===e.length-1;this._writer.write(n).then(()=>{a&&Ke(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ct{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=ht&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new dt(mt,this.uri(),e)}}},yt=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function bt(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),a=e.indexOf("]");-1!=n&&-1!=a&&(e=e.substring(0,n)+e.substring(n,a).replace(/:/g,";")+e.substring(a,e.length));let s=yt.exec(e||""),r={},i=14;for(;i--;)r[xt[i]]=s[i]||"";return-1!=n&&-1!=a&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(e,t){const n=/\/{2,9}/g,a=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||a.splice(0,1);"/"==t.slice(-1)&&a.splice(a.length-1,1);return a}(0,r.path),r.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,a){t&&(n[t]=a)}),n}(0,r.query),r}const Nt="function"===typeof addEventListener&&"function"===typeof removeEventListener,jt=[];Nt&&addEventListener("offline",()=>{jt.forEach(e=>e())},!1);class wt extends Ge{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=bt(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=bt(t.host).host);et(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let a=0,s=n.length;a<s;a++){let e=n[a].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),Nt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&wt.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",wt.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=tt(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ke(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,a){if("function"===typeof t&&(a=t,t=void 0),"function"===typeof n&&(a=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const s={type:e,data:t,options:n};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(wt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Nt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=jt.indexOf(this._offlineEventListener);-1!==e&&jt.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}wt.protocol=4;class kt extends wt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;wt.priorWebsocketSuccess=!1;const a=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;wt.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function s(){n||(n=!0,c(),t.close(),t=null)}const r=e=>{const n=new Error("probe error: "+e);n.transport=t.name,s(),this.emitReserved("upgradeError",n)};function i(){r("transport closed")}function o(){r("socket closed")}function l(e){t&&e.name!==t.name&&s()}const c=()=>{t.removeListener("open",a),t.removeListener("error",r),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",a),t.once("error",r),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class St extends kt{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>vt[e]).filter(e=>!!e)),super(e,t)}}const Ct="function"===typeof ArrayBuffer,Et=Object.prototype.toString,Tt="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Et.call(Blob),_t="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Et.call(File);function At(e){return Ct&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Tt&&e instanceof Blob||_t&&e instanceof File}function Pt(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Pt(e[t]))return!0;return!1}if(At(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Pt(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Pt(e[n]))return!0;return!1}function Dt(e){const t=[],n=e.data,a=e;return a.data=Lt(n,t),a.attachments=t.length,{packet:a,buffers:t}}function Lt(e,t){if(!e)return e;if(At(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let a=0;a<e.length;a++)n[a]=Lt(e[a],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=Lt(e[a],t));return n}return e}function Rt(e,t){return e.data=Ot(e.data,t),delete e.attachments,e}function Ot(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ot(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ot(e[n],t));return e}const It=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ut=5;var Mt;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Mt||(Mt={}));class Ft{constructor(e){this.replacer=e}encode(e){return e.type!==Mt.EVENT&&e.type!==Mt.ACK||!Pt(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Mt.EVENT?Mt.BINARY_EVENT:Mt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Mt.BINARY_EVENT&&e.type!==Mt.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Dt(e),n=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(n),a}}function zt(e){return"[object Object]"===Object.prototype.toString.call(e)}class Bt extends Ge{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Mt.BINARY_EVENT;n||t.type===Mt.BINARY_ACK?(t.type=n?Mt.EVENT:Mt.ACK,this.reconstructor=new qt(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!At(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Mt[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Mt.BINARY_EVENT||n.type===Mt.BINARY_ACK){const a=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const s=e.substring(a,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(s)}if("/"===e.charAt(t+1)){const a=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(a,t)}else n.nsp="/";const a=e.charAt(t+1);if(""!==a&&Number(a)==a){const a=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(!Bt.isPayloadValid(n.type,a))throw new Error("invalid payload");n.data=a}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(va){return!1}}static isPayloadValid(e,t){switch(e){case Mt.CONNECT:return zt(t);case Mt.DISCONNECT:return void 0===t;case Mt.CONNECT_ERROR:return"string"===typeof t||zt(t);case Mt.EVENT:case Mt.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===It.indexOf(t[0]));case Mt.ACK:case Mt.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class qt{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Rt(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Wt(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Ht=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Vt extends Ge{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Wt(e,"open",this.onopen.bind(this)),Wt(e,"packet",this.onpacket.bind(this)),Wt(e,"error",this.onerror.bind(this)),Wt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,a;if(Ht.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:Mt.EVENT,data:r,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){const e=this.ids++,t=r.pop();this._registerAckCallback(e,t),o.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(a=this.io.engine)||void 0===a?void 0:a._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n,a=this;const s=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===s)return void(this.acks[e]=t);const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},s),i=function(){a.io.clearTimeoutFn(r);for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];t.apply(a,n)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return new Promise((t,a)=>{const s=(e,n)=>e?a(e):t(n);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(a!==t._queue[0])return;if(null!==e)a.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];n(null,...r)}return a.pending=!1,t._drainQueue()}),this._queue.push(a),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Mt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Mt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Mt.EVENT:case Mt.BINARY_EVENT:this.onevent(e);break;case Mt.ACK:case Mt.BINARY_ACK:this.onack(e);break;case Mt.DISCONNECT:this.ondisconnect();break;case Mt.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];t.packet({type:Mt.ACK,id:e,data:s})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Mt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Qt(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Qt.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Qt.prototype.reset=function(){this.attempts=0},Qt.prototype.setMin=function(e){this.ms=e},Qt.prototype.setMax=function(e){this.max=e},Qt.prototype.setJitter=function(e){this.jitter=e};class $t extends Ge{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,et(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Qt({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||a;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new St(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Wt(t,"open",function(){n.onopen(),e&&e()}),s=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},r=Wt(t,"error",s);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn(()=>{a(),s(new Error("timeout")),t.close()},e);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(a),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Wt(e,"ping",this.onping.bind(this)),Wt(e,"data",this.ondata.bind(this)),Wt(e,"error",this.onerror.bind(this)),Wt(e,"close",this.onclose.bind(this)),Wt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(va){this.onclose("parse error",va)}}ondecoded(e){Ke(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Vt(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Gt={};function Kt(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),a=bt(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const s=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+s+":"+a.port+t,a.href=a.protocol+"://"+s+(n&&n.port===a.port?"":":"+a.port),a}(e,(t=t||{}).path||"/socket.io"),a=n.source,s=n.id,r=n.path,i=Gt[s]&&r in Gt[s].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new $t(a,t):(Gt[s]||(Gt[s]=new $t(a,t)),o=Gt[s]),n.query&&!t.query&&(t.query=n.queryKey),o.socket(n.path,t)}Object.assign(Kt,{Manager:$t,Socket:Vt,io:Kt,connect:Kt});const Jt=new class{constructor(){this.speechEngine=null,this.voiceReady=!1,this.selectedVoice=null,this.isSpeaking=!1,this.socket=null,this.fallbackMode=!1,this.audioContext=null,this.audioElements=new Map,this.currentAudio=null,this.audioCache=new Map,this.isMP3Supported=!0,this.init()}setSocket(e){this.socket=e}init(){"speechSynthesis"in window||(console.warn("\u274c Speech synthesis not supported, using MP3 mode only"),this.fallbackMode=!0);const e=new Audio;this.isMP3Supported=!!e.canPlayType&&(""!==e.canPlayType("audio/mp3")||""!==e.canPlayType("audio/mpeg")),console.log("\ud83d\udd0a CENTRALIZED MP3 Support: ".concat(this.isMP3Supported?"\u2705":"\u274c")),this.speechEngine=window.speechSynthesis,this.loadVoices(),this.initFallbackMode()}initFallbackMode(){try{this.audioContext=new(window.AudioContext||window.webkitAudioContext),console.log("\u2705 Audio context created for fallback sounds")}catch(e){console.warn("\u274c Audio context not supported:",e)}}loadVoices(){if(!this.speechEngine)return;const e=()=>{const e=this.speechEngine.getVoices(),t=this.findBestUrduVoice(e);t?(this.selectedVoice=t,this.voiceReady=!0,console.log("\u2705 Centralized Urdu voice loaded:",t.name)):e.length>0?(this.selectedVoice=e[0],this.voiceReady=!0,console.log("\u2705 Centralized default voice loaded:",e[0].name)):(console.warn("\u274c No voices available, using MP3/fallback mode"),this.fallbackMode=!0)};this.speechEngine.getVoices().length>0?e():this.speechEngine.addEventListener("voiceschanged",e),setTimeout(()=>this.loadVoices(),1e3),setTimeout(()=>this.loadVoices(),3e3)}findBestUrduVoice(e){if(!e||0===e.length)return null;const t=e.map(e=>{let t=0;const n=e.lang.toLowerCase(),a=e.name.toLowerCase();return n.includes("ur-pk")&&(t+=1e3),n.includes("ur_in")&&(t+=800),n.includes("ur")&&(t+=600),a.includes("female")&&(t+=500),a.includes("pakistan")&&(t+=600),a.includes("urdu")&&(t+=400),e.localService&&(t+=200),e.default&&(t+=300),{voice:e,score:t}});return t.sort((e,t)=>t.score-e.score),t.length>0&&t[0].score>0?t[0].voice:null}async playMP3Announcement(e){const{audioUrl:t,ticketNumber:n,counterNumber:a,isRecall:s}=e;console.log("\ud83d\udd0a CENTRALIZED MP3 ANNOUNCEMENT: Playing ".concat(t));try{await this.playAudioFile(t),console.log("\u2705 Centralized MP3 announcement completed")}catch(r){console.error("\u274c Centralized MP3 playback failed:",r),await this.playTTSAnnouncement(e)}}playAudioFile(e){return new Promise((t,n)=>{if(this.currentAudio&&(this.currentAudio.pause(),this.currentAudio=null),this.audioCache.has(e)){console.log("\ud83d\udd0a Using cached centralized audio");const a=this.audioCache.get(e).cloneNode();return void this.setupAudioElement(a,t,n)}const a=new Audio(e);this.audioCache.set(e,a.cloneNode()),this.setupAudioElement(a,t,n)})}setupAudioElement(e,t,n){this.currentAudio=e,e.onended=()=>{this.currentAudio=null,t()},e.onerror=e=>{this.currentAudio=null,console.error("\u274c Centralized audio playback error:",e),n(e)},e.oncanplaythrough=()=>{console.log("\ud83d\udd0a Centralized audio loaded and ready to play")};const a=e.play();void 0!==a&&a.then(()=>{console.log("\ud83d\udd0a Centralized audio playback started successfully")}).catch(e=>{console.error("\u274c Centralized audio play failed:",e),n(e)})}async playTTSAnnouncement(e){const{ticketNumber:t,counterNumber:n,isRecall:a,message:s}=e;console.log("\ud83d\udd0a CENTRALIZED TTS FALLBACK: ".concat(t," for Counter ").concat(n));try{const e=s||this.getUrduAnnouncementMessage(t,n,a);await this.speakUrduAnnouncement(e),console.log("\u2705 Centralized TTS announcement completed")}catch(r){console.error("\u274c Centralized TTS announcement failed:",r),await this.playFallbackSound()}}convertToUrduPronunciation(e){if(!e)return e;let t="";for(let n=0;n<e.length;n++){const a=e[n];switch(a.toUpperCase()){case"A":case"E":t+="\u0627\u06cc ";break;case"B":t+="\u0628\u06cc ";break;case"C":t+="\u0633\u06cc ";break;case"D":t+="\u0688\u06cc ";break;case"F":t+="\u0627\u06cc\u0641 ";break;case"G":t+="\u062c\u06cc ";break;case"H":t+="\u0627\u06cc\u0686 ";break;case"I":t+="\u0622\u0626\u06cc ";break;case"J":t+="\u062c\u06d2 ";break;case"K":t+="\u06a9\u06d2 ";break;case"L":t+="\u0627\u06cc\u0644 ";break;case"M":t+="\u0627\u06cc\u0645 ";break;case"N":t+="\u0627\u06cc\u0646 ";break;case"O":t+="\u0627\u0648 ";break;case"P":t+="\u067e\u06cc ";break;case"Q":t+="\u06a9\u06cc\u0648 ";break;case"R":t+="\u0622\u0631 ";break;case"S":t+="\u0627\u06cc\u0633 ";break;case"T":t+="\u0679\u06cc ";break;case"U":t+="\u06cc\u0648 ";break;case"V":t+="\u0648\u06cc ";break;case"W":t+="\u0688\u0628\u0644\u06cc\u0648 ";break;case"X":t+="\u0627\u06cc\u06a9\u0633 ";break;case"Y":t+="\u0648\u0627\u0626\u06d2 ";break;case"Z":t+="\u0632\u06cc\u0688 ";break;case"0":t+="\u0632\u06cc\u0631\u0648 ";break;case"1":t+="\u0627\u06cc\u06a9 ";break;case"2":t+="\u062f\u0648 ";break;case"3":t+="\u062a\u06cc\u0646 ";break;case"4":t+="\u0686\u0627\u0631 ";break;case"5":t+="\u067e\u0627\u0646\u0686 ";break;case"6":t+="\u0686\u06be ";break;case"7":t+="\u0633\u0627\u062a ";break;case"8":t+="\u0622\u0679\u06be ";break;case"9":t+="\u0646\u0648 ";break;case"-":case" ":t+="  ";break;default:t+=a+" "}}return t.trim()}getUrduAnnouncementMessage(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=this.convertToUrduPronunciation(e),s=this.convertToUrduPronunciation(t.toString());return n?"\u0679\u06a9\u0679 \u0646\u0645\u0628\u0631 ".concat(a," \u0628\u0631\u0627\u0626\u06d2 \u06a9\u0631\u0645 \u0641\u0648\u0631\u06cc \u0637\u0648\u0631 \u067e\u0631 \u06a9\u0627\u0624\u0646\u0679\u0631 \u0646\u0645\u0628\u0631 ").concat(s," \u067e\u0631 \u062a\u0634\u0631\u06cc\u0641 \u0644\u0627\u0626\u06cc\u06ba\u06d4 \u0634\u06a9\u0631\u06cc\u06c1\u06d4"):"\u0679\u06a9\u0679 \u0646\u0645\u0628\u0631 ".concat(a," \u0628\u0631\u0627\u0626\u06d2 \u06a9\u0631\u0645 \u06a9\u0627\u0624\u0646\u0679\u0631 \u0646\u0645\u0628\u0631 ").concat(s," \u067e\u0631 \u062a\u0634\u0631\u06cc\u0641 \u0644\u0627\u0626\u06cc\u06ba\u06d4 \u0634\u06a9\u0631\u06cc\u06c1\u06d4")}speakUrduAnnouncement(e){return new Promise(t=>{if(this.fallbackMode||!this.isMP3Supported)return console.log("\ud83d\udd0a Using centralized fallback mode for announcement"),void this.playFallbackSound().then(t);if(!this.speechEngine||this.isSpeaking||!this.voiceReady)return console.warn("\u274c Centralized voice system not ready, using fallback"),void this.playFallbackSound().then(t);try{this.isSpeaking=!0;const n=new SpeechSynthesisUtterance(e);n.voice=this.selectedVoice,n.lang="ur-PK",n.rate=.85,n.pitch=1.2,n.volume=1,n.onend=()=>{this.isSpeaking=!1,console.log("\u2705 Centralized voice announcement completed"),setTimeout(t,500)},n.onerror=e=>{this.isSpeaking=!1,console.error("\u274c Centralized voice announcement error:",e),this.playFallbackSound().then(t)},this.speechEngine.speaking?(this.speechEngine.cancel(),setTimeout(()=>{this.speechEngine.speak(n)},300)):this.speechEngine.speak(n)}catch(n){this.isSpeaking=!1,console.error("\u274c Error in centralized voice announcement:",n),this.playFallbackSound().then(t)}})}playFallbackSound(){return new Promise(e=>{try{if(this.audioContext){const t=this.audioContext.createOscillator(),n=this.audioContext.createGain();t.connect(n),n.connect(this.audioContext.destination),t.frequency.value=800,t.type="sine",n.gain.setValueAtTime(0,this.audioContext.currentTime),n.gain.linearRampToValueAtTime(.1,this.audioContext.currentTime+.1),n.gain.linearRampToValueAtTime(0,this.audioContext.currentTime+.5),t.start(this.audioContext.currentTime),t.stop(this.audioContext.currentTime+.5),setTimeout(()=>{e()},800)}else setTimeout(()=>{e()},1e3)}catch(t){console.error("\u274c Centralized fallback sound error:",t),setTimeout(()=>{e()},1e3)}})}getVoiceStatus(){return{voiceReady:this.voiceReady,isSpeaking:this.isSpeaking,fallbackMode:this.fallbackMode,mp3Supported:this.isMP3Supported,currentAudio:!!this.currentAudio,audioCacheSize:this.audioCache.size,voicesAvailable:this.speechEngine?this.speechEngine.getVoices().length:0,selectedVoice:this.selectedVoice?this.selectedVoice.name:"None",system:"centralized_universal_mp3_tts_fallback"}}async testVoiceSystem(){console.log("\ud83d\udd0a Testing centralized voice system...");const e=this.getVoiceStatus();return console.log("Centralized Voice Status:",e),e.mp3Supported?e.voiceReady?(await this.speakUrduAnnouncement("\u0645\u0631\u06a9\u0632\u06cc \u0646\u0638\u0627\u0645 \u06a9\u0627\u0645\u06cc\u0627\u0628 \u06c1\u06d2\u06d4 \u0622\u0648\u0627\u0632 \u06a9\u0627 \u0646\u0638\u0627\u0645 \u06a9\u0627\u0645 \u06a9\u0631 \u0631\u06c1\u0627 \u06c1\u06d2\u06d4"),{success:!0,method:"centralized_tts"}):(await this.playFallbackSound(),{success:!0,method:"centralized_fallback"}):(console.warn("Centralized MP3 not supported, using fallback"),await this.playFallbackSound(),{success:!0,method:"centralized_fallback"})}clearAudioCache(){const e=this.audioCache.size;return this.audioCache.clear(),console.log("\ud83e\uddf9 Cleared centralized audio cache (".concat(e," entries)")),e}async preloadAudio(e){const t=e.map(e=>new Promise(t=>{if(this.audioCache.has(e))return void t(!0);const n=new Audio;n.src=e,n.preload="auto",n.oncanplaythrough=()=>{this.audioCache.set(e,n),t(!0)},n.onerror=()=>{console.warn("\u274c Failed to preload centralized audio: ".concat(e)),t(!1)}}));return Promise.all(t)}async announceTicket(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a={ticketNumber:e,counterNumber:t,isRecall:n,type:"centralized_tts_announcement",message:this.getUrduAnnouncementMessage(e,t,n)};return this.playTTSAnnouncement(a)}async processCentralizedAnnouncement(e){console.log("\ud83d\udd0a Processing centralized announcement:",e);const{type:t,audioUrl:n,ticketNumber:a,counterNumber:s,isRecall:r,message:i}=e;try{return"mp3_announcement"===t&&n?await this.playMP3Announcement(e):await this.playTTSAnnouncement(e),{success:!0,method:t}}catch(o){return console.error("\u274c Centralized announcement processing failed:",o),{success:!1,error:o.message}}}};window.voiceService=Jt;const Yt=Jt;var Xt=n(579);const Zt=(0,r.createContext)(),en=()=>{const e=(0,r.useContext)(Zt);if(!e)throw new Error("useSocket must be used within a SocketProvider");return e},tn=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)("disconnected"),[c,d]=(0,r.useState)(0);(0,r.useEffect)(()=>{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SOCKET_URL||"http://localhost:5000";console.log("\ud83d\udd0c Connecting to socket server: ".concat(e));const t=Kt(e,{transports:["websocket","polling"],withCredentials:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,timeout:1e4});return Yt.setSocket(t),t.on("connect",()=>{console.log("\u2705 Socket connected successfully"),i(!0),l("connected"),d(0)}),t.on("disconnect",e=>{console.log("\ud83d\udd0c Socket disconnected:",e),i(!1),l("disconnected")}),t.on("connect_error",e=>{console.error("\u274c Socket connection error:",e.message),i(!1),l("error")}),t.on("reconnect_attempt",e=>{console.log("\ud83d\udd04 Reconnection attempt ".concat(e)),d(e),l("reconnecting")}),t.on("reconnect",e=>{console.log("\u2705 Reconnected successfully after ".concat(e," attempts")),i(!0),l("connected"),d(0)}),t.on("reconnect_failed",()=>{console.error("\u274c Reconnection failed"),l("failed")}),t.on("error",e=>{console.error("\u274c Socket error:",e)}),t.on("broadcast-voice-call",e=>{console.log("\ud83d\udd0a Received broadcast voice call:",e)}),t.on("broadcast-voice-recall",e=>{console.log("\ud83d\udd0a Received broadcast voice recall:",e)}),t.on("central-voice-announcement",e=>{console.log("\ud83d\udd0a Received central voice announcement:",e)}),t.on("counter-updated",e=>{console.log("\ud83d\udcca Counter updated:",e)}),t.on("token-called",e=>{console.log("\ud83d\udcde Token called:",e)}),t.on("token-completed",e=>{console.log("\u2705 Token completed:",e)}),a(t),()=>{console.log("\ud83e\uddf9 Cleaning up socket connection"),t.close()}},[]);const u=(0,r.useCallback)((e,t,a)=>{if(!n||!s)return console.error("\u274c Cannot emit event: Socket not connected"),a&&a(new Error("Socket not connected")),!1;try{return console.log("\ud83d\udce4 Emitting event: ".concat(e),t),a?n.emit(e,t,a):n.emit(e,t),!0}catch(r){return console.error("\u274c Error emitting event ".concat(e,":"),r),a&&a(r),!1}},[n,s]),h=(0,r.useCallback)((e,t)=>n?(console.log("\ud83d\udce5 Adding listener for event: ".concat(e)),n.on(e,t),()=>{n&&(console.log("\ud83d\udce4 Removing listener for event: ".concat(e)),n.off(e,t))}):(console.error("\u274c Cannot add listener: Socket not initialized"),()=>{}),[n]),m=(0,r.useCallback)((e,t)=>{n?(console.log("\ud83d\udce4 Removing listener for event: ".concat(e)),n.off(e,t)):console.error("\u274c Cannot remove listener: Socket not initialized")},[n]),p=(0,r.useCallback)(e=>{if(!n||!s)return console.error("\u274c Cannot join room: Socket not connected"),!1;try{return console.log("\ud83d\udeaa Joining room: ".concat(e)),n.emit("join-room",e),!0}catch(t){return console.error("\u274c Error joining room ".concat(e,":"),t),!1}},[n,s]),f=(0,r.useCallback)(e=>{if(!n||!s)return console.error("\u274c Cannot leave room: Socket not connected"),!1;try{return console.log("\ud83d\udeaa Leaving room: ".concat(e)),n.emit("leave-room",e),!0}catch(t){return console.error("\u274c Error leaving room ".concat(e,":"),t),!1}},[n,s]),g=(0,r.useCallback)(()=>{if(!n)return console.error("\u274c Cannot reconnect: Socket not initialized"),!1;try{return console.log("\ud83d\udd04 Manual reconnection attempt"),n.connect(),!0}catch(e){return console.error("\u274c Manual reconnection failed:",e),!1}},[n]),v=(0,r.useCallback)(()=>{var e,t,a;return n?{status:o,connected:s,id:n.id,reconnectAttempts:c,transport:null===(e=n.io)||void 0===e||null===(t=e.engine)||void 0===t||null===(a=t.transport)||void 0===a?void 0:a.name}:{status:"not_initialized",connected:!1,id:null,reconnectAttempts:c}},[n,s,o,c]),y={socket:n,isConnected:s,connectionStatus:o,reconnectAttempts:c,emit:u,on:h,off:m,joinRoom:p,leaveRoom:f,reconnect:g,getConnectionDetails:v,isInitialized:!!n,isConnecting:"reconnecting"===o,hasError:"error"===o||"failed"===o,socketId:null===n||void 0===n?void 0:n.id};return(0,Xt.jsx)(Zt.Provider,{value:y,children:t})};function nn(e){return nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(e)}function an(e){var t=function(e,t){if("object"!=nn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=nn(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nn(t)?t:t+""}function sn(e,t,n){return(t=an(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach(function(t){sn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const ln={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";const cn=new class{constructor(){this.baseUrl=ln,this.timeout=3e4}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="".concat(this.baseUrl).concat(e),a=new AbortController,s=setTimeout(()=>a.abort(),this.timeout),r={};t.body instanceof FormData||(r["Content-Type"]="application/json");const i=localStorage.getItem("authToken");i&&(r.Authorization="Bearer ".concat(i));const o=on({headers:on(on({},r),t.headers),signal:a.signal},t);!o.body||"object"!==typeof o.body||o.body instanceof FormData||(o.body=JSON.stringify(o.body));try{console.log("\ud83d\udce4 API Request \u2192",{url:n,method:o.method||"GET",body:o.body instanceof FormData?"[FormData]":o.body});const e=await fetch(n,o);if(clearTimeout(s),204===e.status)return console.log("\u2705 API Response \u2192 204 No Content"),{success:!0,message:"Operation completed successfully"};const t=e.headers.get("content-type");let a;if(a=null!==t&&void 0!==t&&t.includes("application/json")?await e.json():null!==t&&void 0!==t&&t.includes("text/")?await e.text():await e.blob(),console.log("\u2705 API Response \u2192",{status:e.status,data:a instanceof Blob?"[Blob]":a}),!e.ok){var l,c;const t=(null===(l=a)||void 0===l?void 0:l.error)||(null===(c=a)||void 0===c?void 0:c.message)||"HTTP error! status: ".concat(e.status);throw new Error(t)}return a}catch(d){if(clearTimeout(s),console.error("\u274c API Request Failed:",{url:n,error:d.name,message:d.message}),"AbortError"===d.name)throw new Error("Request timeout. Please try again.");if("TypeError"===d.name&&d.message.includes("fetch"))throw new Error("Network error. Please check your connection.");throw d}}get(e){return this.request(e)}post(e,t){return this.request(e,{method:"POST",body:t})}put(e,t){return this.request(e,{method:"PUT",body:t})}patch(e,t){return this.request(e,{method:"PATCH",body:t})}delete(e){return this.request(e,{method:"DELETE"})}async deleteAllData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t={};return e&&(t.confirmationToken=e),console.log("\ud83d\uddd1\ufe0f  DELETE ALL DATA REQUEST \u2192",{hasConfirmationToken:!!e}),this.request("/admin/delete-all-data",{method:"DELETE",body:Object.keys(t).length>0?t:void 0})}async deleteAllDataWithConfirmation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"DELETE ALL DATA";return console.warn("\u26a0\ufe0f  CONFIRMING DELETE ALL DATA \u2192",{confirmationPhrase:e}),this.request("/admin/delete-all-data",{method:"DELETE",body:{confirmation:e,timestamp:(new Date).toISOString()}})}async deleteDataByType(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=["tickets","counters","departments","settings","logs","all"];if(!n.includes(e))throw new Error("Invalid data type: ".concat(e,". Must be one of: ").concat(n.join(", ")));return console.log("\ud83d\uddd1\ufe0f  DELETE DATA BY TYPE \u2192",{dataType:e,options:t}),this.request("/admin/data/".concat(e),{method:"DELETE",body:t})}async getDataStats(){return this.get("/admin/data-stats")}async backupData(){return console.log("\ud83d\udcbe CREATING DATA BACKUP \u2192"),this.post("/admin/backup")}async restoreData(e){return console.log("\ud83d\udd04 RESTORING DATA FROM BACKUP \u2192",{backupId:e}),this.post("/admin/restore",{backupId:e})}async exportData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json";const t=["json","csv","excel"];if(!t.includes(e))throw new Error("Invalid format: ".concat(e,". Must be one of: ").concat(t.join(", ")));console.log("\ud83d\udce4 EXPORTING DATA \u2192",{format:e});const n=await this.request("/admin/export?format=".concat(e));if(n instanceof Blob){const t=window.URL.createObjectURL(n),a=document.createElement("a");a.href=t,a.download="system-backup-".concat((new Date).toISOString().split("T")[0],".").concat(e),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)}return n}async upload(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new Promise((a,s)=>{const r=new XMLHttpRequest,i="".concat(this.baseUrl).concat(e);localStorage.getItem("authToken");r.upload.addEventListener("progress",e=>{if(e.lengthComputable&&n){const t=e.loaded/e.total*100;n(Math.round(t))}}),r.addEventListener("load",()=>{if(r.status>=200&&r.status<300)try{let e;const t=r.getResponseHeader("content-type");e=null!==t&&void 0!==t&&t.includes("application/json")?JSON.parse(r.responseText):r.responseText,console.log("\u2705 Upload Success \u2192",{status:r.status,response:e}),a(e)}catch(e){console.error("\u274c Upload Parse Error:",e),s(new Error("Failed to parse upload response"))}else{let e="Upload failed: ".concat(r.status);try{const t=JSON.parse(r.responseText);e=t.error||t.message||e}catch(va){}console.error("\u274c Upload Failed \u2192",{status:r.status,error:e}),s(new Error(e))}}),r.addEventListener("error",()=>{console.error("\u274c Upload Network Error"),s(new Error("Network error during upload"))}),r.addEventListener("abort",()=>{console.warn("\u26a0\ufe0f Upload Aborted"),s(new Error("Upload cancelled"))}),r.timeout=this.timeout,r.ontimeout=()=>{console.error("\u274c Upload Timeout"),s(new Error("Upload timeout"))},console.log("\ud83d\udce4 Upload Start \u2192",{url:i,fileCount:t.getAll("files").length}),r.open("POST",i),r.send(t)})}postFormData(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.upload(e,t,n)}putFormData(e,t){const n="".concat(this.baseUrl).concat(e);return fetch(n,{method:"PUT",body:t,headers:{Authorization:"Bearer ".concat(localStorage.getItem("authToken"))}}).then(e=>{if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()})}async uploadWithRetry(e,t){let n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(let i=1;i<=a;i++)try{console.log("\ud83d\udd04 Upload attempt ".concat(i,"/").concat(a));return await this.upload(e,t,s)}catch(r){if(n=r,console.warn("Upload attempt ".concat(i," failed:"),r.message),i<a){const e=Math.min(1e3*Math.pow(2,i-1),1e4);await new Promise(t=>setTimeout(t,e))}}throw n}async batchRequests(e){const t=[];for(const a of e)try{const e=await this.request(a.endpoint,a.options);t.push({success:!0,data:e})}catch(n){t.push({success:!1,error:n.message})}return t}async concurrentRequests(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const n=[];for(let a=0;a<e.length;a+=t){const s=e.slice(a,a+t),r=await Promise.allSettled(s.map(e=>this.request(e.endpoint,e.options)));n.push(...r.map((e,t)=>({request:s[t],success:"fulfilled"===e.status,data:"fulfilled"===e.status?e.value:null,error:"rejected"===e.status?e.reason.message:null})))}return n}async healthCheck(){try{return{healthy:!0,response:await this.request("/health",{timeout:5e3})}}catch(e){return{healthy:!1,error:e.message}}}async getWithCache(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5;const a=this.getFromCache(t);if(a&&Date.now()-a.timestamp<n)return console.log("\ud83d\udcbe Using cached data for:",t),a.data;const s=await this.get(e);return this.setCache(t,s),s}getFromCache(e){try{const t=localStorage.getItem("api_cache_".concat(e));return t?JSON.parse(t):null}catch(t){return console.warn("Cache read error:",t),null}}setCache(e,t){try{const n={data:t,timestamp:Date.now()};localStorage.setItem("api_cache_".concat(e),JSON.stringify(n))}catch(n){console.warn("Cache write error:",n)}}clearCache(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{e?Object.keys(localStorage).forEach(t=>{t.startsWith("api_cache_".concat(e))&&localStorage.removeItem(t)}):Object.keys(localStorage).forEach(e=>{e.startsWith("api_cache_")&&localStorage.removeItem(e)})}catch(t){console.warn("Cache clear error:",t)}}isNetworkError(e){return e.message.includes("Network")||e.message.includes("fetch")||e.message.includes("timeout")}isServerError(e){return e.message.includes("HTTP error")||e.message.includes("status: 5")}isAuthError(e){return e.message.includes("401")||e.message.includes("403")||e.message.includes("authentication")||e.message.includes("authorization")}addRequestInterceptor(e){this.requestInterceptors||(this.requestInterceptors=[]),this.requestInterceptors.push(e)}addResponseInterceptor(e){this.responseInterceptors||(this.responseInterceptors=[]),this.responseInterceptors.push(e)}async executeRequestInterceptors(e){if(!this.requestInterceptors)return e;let t=e;for(const n of this.requestInterceptors)t=await n(t);return t}async executeResponseInterceptors(e){if(!this.responseInterceptors)return e;let t=e;for(const n of this.responseInterceptors)t=await n(t);return t}async uploadLogo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.upload("/settings/upload-logo",e,t)}async uploadBackground(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e.get("screenType")||e.append("screenType",t),this.upload("/settings/upload-background",e,n)}async uploadVideo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.upload("/settings/upload-video",e,t)}async deleteLogo(){return this.delete("/settings/logo")}async deleteBackground(e){return this.delete("/settings/background/".concat(e))}async getSettings(){return this.getWithCache("/settings","system_settings",12e4)}async updateSettings(e){return this.clearCache("system_settings"),this.put("/settings",e)}async updateAdvertisements(e){return this.put("/settings/advertisements",{advertisements:e})}async resetSystem(){return this.clearCache(),this.post("/settings/reset")}setBaseUrl(e){this.baseUrl=e}setTimeout(e){this.timeout=e}getBaseUrl(){return this.baseUrl}enableMockMode(){this.mockMode=!0,console.warn("\u26a0\ufe0f Mock mode enabled - API calls will return mock data")}disableMockMode(){this.mockMode=!1,console.warn("\u2705 Mock mode disabled - Using real API")}};cn.addRequestInterceptor(async e=>(e.headers["X-Request-Timestamp"]=Date.now(),e)),cn.addResponseInterceptor(async e=>(e&&"object"===typeof e&&console.log("\ud83d\udd27 Response Interceptor \u2192",{timestamp:(new Date).toISOString(),hasData:!!e}),e));const dn=["exportDate","version","exportType"],un={async getSettings(){try{return await cn.get("/settings")}catch(e){throw console.error("Error fetching settings:",e),new Error("Failed to load system settings")}},async updateSettings(e){try{return await cn.put("/settings",e)}catch(t){throw console.error("Error updating settings:",t),new Error("Failed to update system settings")}},async uploadLogo(e){try{return await cn.upload("/settings/upload-logo",e)}catch(t){throw console.error("Error uploading logo:",t),new Error(t.message||"Failed to upload logo")}},async deleteLogo(){try{return await cn.delete("/settings/logo")}catch(e){throw console.error("Error deleting logo:",e),new Error(e.message||"Failed to delete logo")}},async uploadBackground(e){try{return await cn.upload("/settings/upload-background",e)}catch(t){throw console.error("Error uploading background:",t),new Error(t.message||"Failed to upload background image")}},async deleteBackground(e){try{return await cn.delete("/settings/background/".concat(e))}catch(t){throw console.error("Error deleting background:",t),new Error(t.message||"Failed to delete background image")}},async uploadVideo(e){try{return await cn.upload("/settings/upload-video",e)}catch(t){throw console.error("Error uploading video:",t),new Error(t.message||"Failed to upload video")}},async updateAdvertisements(e){try{return await cn.put("/settings/advertisements",{advertisements:e})}catch(t){throw console.error("Error updating advertisements:",t),new Error("Failed to update advertisements")}},async deleteAllData(){try{console.log("\ud83d\udea8 Starting delete all data process...");const e=await cn.delete("/settings/delete-all-data");return console.log("\u2705 Delete all data response:",e),e}catch(e){throw console.error("\u274c Error deleting all data:",e),new Error(e.message||"Failed to delete system data")}},async resetSystem(){try{return await cn.post("/settings/reset")}catch(e){throw console.error("Error resetting system:",e),new Error("Failed to reset system")}},async exportSettings(){try{return await cn.get("/settings/export")}catch(e){throw console.error("Error exporting settings:",e),new Error("Failed to export settings")}},async importSettings(e){try{return await cn.post("/settings/import",e)}catch(t){throw console.error("Error importing settings:",t),new Error("Failed to import settings")}},async validateSettings(e){try{const t=["hospitalName","language","maxWaitTime"].filter(t=>!e[t]);if(t.length>0)throw new Error("Missing required fields: ".concat(t.join(", ")));return!0}catch(t){throw console.error("Error validating settings:",t),t}},getDefaultSettings:async()=>({hospitalName:"Razi Hospital",hospitalLogo:"",language:"en",autoCall:!0,soundNotifications:!0,displayAnnouncements:!0,maxWaitTime:30,priorityRules:"emergency,priority,senior,child,normal",themes:{primaryColor:"#2980b9",secondaryColor:"#2c3e50",backgroundColor:"#ecf0f1",fontFamily:"Segoe UI"},advertisements:[{text:"Quality Healthcare Services - Welcome to Razi Hospital",duration:30,active:!0,type:"text"}],waitingScreen:{backgroundColor:"#1a5276",textColor:"#ffffff",showAds:!0,customMessage:"",backgroundImage:""},dispenserSettings:{backgroundColor:"#ffffff",textColor:"#000000",autoPrint:!0,welcomeMessage:"Welcome to Razi Hospital",backgroundImage:""},counterScreen:{backgroundColor:"#f8f9fa",textColor:"#333333"}}),async clearSettingsCache(){try{return"undefined"!==typeof window&&(localStorage.removeItem("system-settings"),sessionStorage.removeItem("system-settings")),{success:!0,message:"Settings cache cleared"}}catch(e){throw console.error("Error clearing cache:",e),new Error("Failed to clear settings cache")}},validateLogoFile(e){if(!["image/jpeg","image/png","image/gif","image/svg+xml"].includes(e.type))throw new Error("Invalid file type. Please upload JPEG, PNG, GIF, or SVG images.");if(e.size>5242880)throw new Error("File too large. Maximum size is 5MB.");return!0},validateBackgroundFile(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))throw new Error("Invalid file type. Please upload JPEG, PNG, or GIF images.");if(e.size>5242880)throw new Error("File too large. Maximum size is 5MB.");return!0},validateVideoFile(e){if(!["video/mp4","video/avi","video/mov","video/wmv"].includes(e.type))throw new Error("Invalid file type. Please upload MP4, AVI, MOV, or WMV videos.");if(e.size>52428800)throw new Error("File too large. Maximum size is 50MB.");return!0},transformSettingsForExport:e=>on(on({},e),{},{exportDate:(new Date).toISOString(),version:"1.0.0",exportType:"system-settings"}),transformSettingsForImport(e){const{exportDate:t,version:n,exportType:a}=e,s=function(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,dn),r=this.getDefaultSettings();return on(on(on({},r),s),{},{themes:on(on({},r.themes),s.themes),waitingScreen:on(on({},r.waitingScreen),s.waitingScreen),dispenserSettings:on(on({},r.dispenserSettings),s.dispenserSettings),counterScreen:on(on({},r.counterScreen),s.counterScreen),advertisements:s.advertisements||r.advertisements})}},hn=(0,r.createContext)(),mn=()=>{const e=(0,r.useContext)(hn);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},pn=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),o={hospitalName:"Razi Hospital",hospitalLogo:"",hospitalContact:"",language:"en",maxWaitTime:30,soundNotifications:!0,themes:{primaryColor:"#2980b9",secondaryColor:"#2c3e50",backgroundColor:"#ecf0f1",accentColor:"#e74c3c",fontFamily:"Segoe UI",fontSize:"medium",borderRadius:"medium",shadowIntensity:"medium"},waitingScreen:{backgroundColor:"#1a5276",textColor:"#ffffff",backgroundImage:"",showAds:!0,soundNotifications:!0,customMessage:"",language:"en",ads:[{id:1,type:"text",content:"Quality Healthcare Services Available 24/7",active:!0},{id:2,type:"text",content:"Expert Medical Professionals at Your Service",active:!0},{id:3,type:"text",content:"24/7 Emergency Services Available",active:!0}]},dispenserSettings:{backgroundColor:"#ffffff",textColor:"#000000",backgroundImage:"",welcomeMessage:"Welcome to Razi Hospital",autoPrint:!0,ticketLayout:"standard"},counterScreen:{backgroundColor:"#f8f9fa",textColor:"#333333",soundAlerts:!0,showActivityLog:!0,queueLimit:8},individualWaiting:{backgroundColor:"#1a5276",textColor:"#ffffff",backgroundImage:"",queueSize:8,showTime:!0},advertisements:[]},l=e=>{if(!e)return;const t=document.documentElement;t.style.setProperty("--primary-color",e.primaryColor),t.style.setProperty("--secondary-color",e.secondaryColor),t.style.setProperty("--background-color",e.backgroundColor),t.style.setProperty("--accent-color",e.accentColor),t.style.setProperty("--font-family",e.fontFamily);t.style.setProperty("--base-font-size",{small:"14px",medium:"16px",large:"18px",xlarge:"20px"}[e.fontSize]||"16px");t.style.setProperty("--border-radius",{none:"0",small:"4px",medium:"8px",large:"12px",full:"50px"}[e.borderRadius]||"8px");t.style.setProperty("--box-shadow",{none:"none",subtle:"0 1px 3px rgba(0,0,0,0.1)",medium:"0 2px 8px rgba(0,0,0,0.15)",strong:"0 4px 12px rgba(0,0,0,0.2)"}[e.shadowIntensity]||"0 2px 8px rgba(0,0,0,0.15)"),document.body.style.fontFamily=e.fontFamily},c=(e,t)=>{const n=on({},e);for(const a in t)t[a]&&"object"===typeof t[a]&&!Array.isArray(t[a])?n[a]=c(e[a]||{},t[a]):n[a]=t[a];return n};(0,r.useEffect)(()=>{d();const e=e=>{if("hospitalSettings"===e.key||"app_settings"===e.key)try{const t=JSON.parse(e.newValue);a(t),t.themes&&l(t.themes)}catch(t){console.error("Error parsing settings from storage:",t)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);const d=async()=>{try{i(!0);const t=localStorage.getItem("hospitalSettings");let n=t?JSON.parse(t):null;try{const e=await un.getSettings();e&&(n=e)}catch(e){console.warn("Failed to load settings from API, using local storage:",e)}const s=c(o,n||{});a(s),localStorage.setItem("hospitalSettings",JSON.stringify(s)),l(s.themes)}catch(t){console.error("Error loading settings:",t),a(o),localStorage.setItem("hospitalSettings",JSON.stringify(o)),l(o.themes)}finally{i(!1)}},u={settings:n,updateSettings:async e=>{try{const s="function"===typeof e?e(n):e,r=c(n,s);try{await un.updateSettings(r)}catch(t){console.warn("Failed to update settings via API, saving locally:",t)}return a(r),localStorage.setItem("hospitalSettings",JSON.stringify(r)),s.themes&&l(r.themes),window.dispatchEvent(new Event("storage")),r}catch(s){throw console.error("Error updating settings:",s),s}},resetSettings:()=>{a(o),localStorage.setItem("hospitalSettings",JSON.stringify(o));try{un.updateSettings(o)}catch(e){console.warn("Failed to reset settings via API:",e)}l(o.themes),window.dispatchEvent(new Event("storage"))},deleteAllData:async()=>{try{console.log("\ud83d\uddd1\ufe0f Starting deletion of all system data...");if(["hospitalSettings","app_settings","counterData","queueData","tokenData","patientData","departmentData","userPreferences","activityLogs","reportsData"].forEach(e=>{localStorage.removeItem(e)}),sessionStorage.clear(),window.indexedDB)try{(await window.indexedDB.databases()).forEach(e=>{e.name&&window.indexedDB.deleteDatabase(e.name)})}catch(e){console.warn("Could not clear indexedDB:",e)}try{await un.deleteAllData(),console.log("\u2705 Server data deletion completed")}catch(t){console.warn("\u26a0\ufe0f Server data deletion failed, but local data cleared:",t)}return a(o),localStorage.setItem("hospitalSettings",JSON.stringify(o)),l(o.themes),window.dispatchEvent(new Event("storage")),console.log("\u2705 All system data deleted successfully"),{success:!0,message:"All system data has been deleted successfully"}}catch(n){throw console.error("\u274c Error deleting all data:",n),new Error("Failed to delete all data: ".concat(n.message))}},refreshSettings:()=>{d()},loading:s};return(0,Xt.jsx)(hn.Provider,{value:u,children:t})},fn=(0,r.createContext)(),gn=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token")||sessionStorage.getItem("token"),t=localStorage.getItem("user")||sessionStorage.getItem("user");if(e&&t)try{const n=JSON.parse(t);await o(e)?a(n):l()}catch(n){console.error("Error parsing user data:",n),l()}i(!1)})()},[]);const o=async e=>!!e,l=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),a(null)},c={user:n,login:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a(e),t?(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e))):(sessionStorage.setItem("token",e.token),sessionStorage.setItem("user",JSON.stringify(e)))},logout:()=>{l(),window.location.href="/login"},loading:s};return(0,Xt.jsx)(fn.Provider,{value:c,children:t})},vn={async getStats(){try{return await cn.get("/analytics/stats")}catch(e){return console.error("Error fetching stats:",e),{totalWaiting:0,servedToday:0,avgWaitTime:0,activeCounters:0}}},async getDepartments(){try{return await cn.get("/departments")}catch(e){return console.error("Error fetching departments:",e),[{_id:"1",name:"General OPD",waitingCount:0,estimatedWaitTime:15},{_id:"2",name:"Cardiology",waitingCount:0,estimatedWaitTime:25},{_id:"3",name:"Orthopedics",waitingCount:0,estimatedWaitTime:20}]}},async getCounters(){try{return await cn.get("/counters")}catch(e){return console.error("Error fetching counters:",e),Array.from({length:10},(e,t)=>({_id:"counter-".concat(t+1),counterNumber:t+1,name:"Counter ".concat(t+1),status:"active",department:{name:"General OPD"},currentTicket:null}))}},async getActivities(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;try{return await cn.get("/activities?limit=".concat(e))}catch(t){return console.error("Error fetching activities:",t),[]}},async getQueue(e){try{return await cn.get("/departments/".concat(e,"/queue"))}catch(t){return console.error("Error fetching queue:",t),[]}},async updateCounterStatus(e,t){try{return await cn.put("/counters/".concat(e,"/status"),{status:t})}catch(n){throw console.error("Error updating counter status:",n),n}},async callNextTicket(e){try{return await cn.post("/counters/".concat(e,"/call-next"))}catch(t){throw console.error("Error calling next ticket:",t),t}},async completeTicket(e){try{return await cn.post("/counters/".concat(e,"/complete"))}catch(t){throw console.error("Error completing ticket:",t),t}},async recallTicket(e){try{return await cn.post("/counters/".concat(e,"/recall"))}catch(t){throw console.error("Error recalling ticket:",t),t}},async createCounter(e){try{return await cn.post("/counters",e)}catch(t){throw console.error("Error creating counter:",t),t}},async deleteCounter(e){try{return await cn.delete("/counters/".concat(e))}catch(t){throw console.error("Error deleting counter:",t),t}},async callSpecificTicket(e,t){try{return await cn.post("/tickets/call-specific",{ticketId:e,counterId:t})}catch(n){throw console.error("Error calling specific ticket:",n),n}},async skipTicket(e){try{return await cn.post("/tickets/".concat(e,"/skip"))}catch(t){throw console.error("Error skipping ticket:",t),t}},async generateReport(e){try{return await cn.post("/analytics/reports",e)}catch(t){throw console.error("Error generating report:",t),t}},async createDepartment(e){try{return await cn.post("/departments",e)}catch(t){throw console.error("Error creating department:",t),t}},async deleteDepartment(e){try{return await cn.delete("/departments/".concat(e))}catch(t){throw console.error("Error deleting department:",t),t}},async updateDepartment(e,t){try{return await cn.put("/departments/".concat(e),t)}catch(n){throw console.error("Error updating department:",n),n}},async getDepartmentStats(e){try{return await cn.get("/departments/".concat(e,"/stats"))}catch(t){throw console.error("Error fetching department stats:",t),t}},async reassignCounter(e,t){try{return await cn.put("/counters/".concat(e,"/department"),{departmentId:t})}catch(n){throw console.error("Error reassigning counter:",n),n}},async getActiveTickets(){try{return await cn.get("/tickets/active")}catch(e){throw console.error("Error fetching active tickets:",e),e}},async transferTicket(e,t){try{return await cn.put("/tickets/".concat(e,"/transfer"),{departmentId:t})}catch(n){throw console.error("Error transferring ticket:",n),n}},async cancelTicket(e){try{return await cn.post("/tickets/".concat(e,"/cancel"))}catch(t){throw console.error("Error canceling ticket:",t),t}},async getSystemLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;try{return await cn.get("/system/logs?limit=".concat(e))}catch(t){throw console.error("Error fetching system logs:",t),t}},async clearOldData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;try{return await cn.delete("/system/clear-old-data?days=".concat(e))}catch(t){throw console.error("Error clearing old data:",t),t}},async createBackup(){try{return await cn.post("/system/backup")}catch(e){throw console.error("Error creating backup:",e),e}},async restoreBackup(e){try{return await cn.post("/system/restore",e)}catch(t){throw console.error("Error restoring backup:",t),t}}},yn={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5000/api";const xn=new class{constructor(){this.isBrowserClosing=!1,this.initializeSessionHandlers()}async login(e,t,n){console.log("\ud83d\udd10 Attempting login for: ".concat(e,", component: ").concat(n));const a=await fetch("".concat(yn,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,component:n})}),s=await a.json();if(!a.ok)throw console.error("\u274c Login failed:",s.message),new Error(s.message||"Login failed");console.log("\u2705 Login successful");const r=on(on({},s.user),{},{component:n});return sessionStorage.setItem("user",JSON.stringify(r)),sessionStorage.setItem("accessToken",s.accessToken),sessionStorage.setItem("refreshToken",s.refreshToken),sessionStorage.setItem("component",n),sessionStorage.setItem("loginTime",(new Date).toISOString()),{user:r,tokens:s}}async logout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=this.getToken();if(t||e){(await fetch("".concat(yn,"/auth/logout"),{method:"POST",headers:on({"Content-Type":"application/json"},t&&{Authorization:"Bearer ".concat(t)}),body:JSON.stringify({refreshToken:e})})).ok||console.warn("Logout API call failed, but clearing local storage anyway")}}catch(t){console.error("Error calling logout API:",t)}finally{this.clearSession()}}async refreshToken(e){const t=await fetch("".concat(yn,"/auth/refresh-token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})}),n=await t.json();if(!t.ok)throw new Error(n.message||"Token refresh failed");return sessionStorage.setItem("accessToken",n.accessToken),sessionStorage.setItem("refreshToken",n.refreshToken),n}async validateToken(e){try{return(await fetch("".concat(yn,"/auth/validate"),{headers:{Authorization:"Bearer ".concat(e)}})).ok}catch(t){return!1}}clearLocalStorage(){const e={};["settings","language","theme"].forEach(t=>{localStorage.getItem(t)&&(e[t]=localStorage.getItem(t))}),localStorage.clear(),Object.keys(e).forEach(t=>{localStorage.setItem(t,e[t])})}clearSessionStorage(){sessionStorage.clear()}clearSession(){this.clearSessionStorage(),this.clearLocalStorage()}isAuthenticated(){const e=this.getToken(),t=this.getCurrentUser();return!(!e||!t)&&(console.log("\ud83d\udd10 User authenticated, session valid until browser close"),!0)}getCurrentUser(){try{const e=sessionStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("Error parsing user data:",e),null}}getToken(){return sessionStorage.getItem("accessToken")}getRefreshToken(){return sessionStorage.getItem("refreshToken")}getCurrentComponent(){return sessionStorage.getItem("component")}hasPermission(e){var t;const n=this.getCurrentUser();return(null===n||void 0===n||null===(t=n.permissions)||void 0===t?void 0:t[e])||"admin"===(null===n||void 0===n?void 0:n.role)}validateComponentAccess(e){const t=this.getCurrentComponent(),n=this.getCurrentUser();if(!this.isAuthenticated())return console.log("\u274c Not authenticated, redirecting to login"),{valid:!1,redirect:"/login?component=".concat(e)};if("admin"===(null===n||void 0===n?void 0:n.role))return console.log("\u2705 Admin access granted to all components"),{valid:!0};if(t!==e)return console.log("\u274c Component mismatch: current=".concat(t,", requested=").concat(e)),{valid:!1,redirect:"/login?component=".concat(e)};return(t=>{switch(e){case"admin":return"admin"===(null===n||void 0===n?void 0:n.role);case"counter":return["admin","operator","counter"].includes(null===n||void 0===n?void 0:n.role);case"dispenser":return["admin","dispenser"].includes(null===n||void 0===n?void 0:n.role)||(null===n||void 0===n||null===(t=n.permissions)||void 0===t?void 0:t.canGenerateTickets);case"waiting":case"display":return["admin","display"].includes(null===n||void 0===n?void 0:n.role);default:return!0}})()?(console.log("\u2705 Access granted to component: ".concat(e)),{valid:!0}):(console.log("\u274c Access denied for component: ".concat(e,", role: ").concat(null===n||void 0===n?void 0:n.role)),{valid:!1,redirect:"/login",message:"Access denied for this component"})}canAccessComponent(e){var t;const n=this.getCurrentUser();if(!n)return!1;if("admin"===n.role)return!0;switch(e){case"admin":return"admin"===n.role;case"counter":return["admin","operator","counter"].includes(n.role);case"dispenser":return["admin","dispenser"].includes(n.role)||(null===(t=n.permissions)||void 0===t?void 0:t.canGenerateTickets);case"waiting":case"display":return["admin","display"].includes(n.role);default:return!0}}generateComponentAccess(e){const t=this.getCurrentUser();if(!t)return null;if("admin"===t.role){return{user:on(on({},t),{},{component:e,temporary:!0}),accessToken:this.getToken(),component:e,expiresAt:Date.now()+36e5}}return null}initializeSessionHandlers(){window.addEventListener("beforeunload",e=>{this.isBrowserClosing=!0}),window.addEventListener("pagehide",e=>{this.isBrowserClosing=!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&console.log("\ud83d\udd04 Tab hidden, session maintained")}),window.addEventListener("pageshow",e=>{e.persisted&&console.log("\ud83d\udd04 Page restored from bfcache, session maintained")}),console.log("\ud83d\udd04 Session handlers initialized - session will persist until browser close")}async checkAndRefreshToken(){const e=this.getToken(),t=this.getRefreshToken();if(!e&&t)try{console.log("\ud83d\udd04 Token expired, attempting refresh...");const e=await this.refreshToken(t);return console.log("\u2705 Token refreshed successfully"),e}catch(n){throw console.error("\u274c Token refresh failed:",n),this.clearSession(),new Error("Session expired. Please login again.")}return null}async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.getToken();let a="".concat(yn,"/auth/users");const s=new URLSearchParams;e&&s.append("role",e),t&&s.append("counterId",t),s.toString()&&(a+="?".concat(s.toString()));const r=await fetch(a,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),i=await r.json();if(!r.ok)throw new Error(i.message||"Failed to fetch users");return i}async getUserById(e){const t=this.getToken(),n=await fetch("".concat(yn,"/auth/users/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),a=await n.json();if(!n.ok)throw new Error(a.message||"Failed to fetch user");return a}async createUser(e){const t=this.getToken(),n=await fetch("".concat(yn,"/auth/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)}),a=await n.json();if(!n.ok)throw new Error(a.message||"Failed to create user");return a}async updateUser(e,t){const n=this.getToken(),a=await fetch("".concat(yn,"/auth/users/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to update user");return s}async deleteUser(e){const t=this.getToken(),n=await fetch("".concat(yn,"/auth/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}),a=await n.json();if(!n.ok)throw new Error(a.message||"Failed to delete user");return a}async createCounterUser(e,t){const n=this.getToken(),a=await fetch("".concat(yn,"/auth/counters/").concat(e,"/create-user"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to create counter user");return s}async updateUserPassword(e,t){const n=this.getToken(),a=await fetch("".concat(yn,"/auth/users/").concat(e,"/password"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to update password");return s}async resetUserPassword(e,t){const n=this.getToken(),a=await fetch("".concat(yn,"/auth/users/").concat(e,"/reset-password"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to reset password");return s}async toggleUserStatus(e,t){const n=this.getToken(),a=await fetch("".concat(yn,"/auth/users/").concat(e,"/status"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({isActive:t})}),s=await a.json();if(!a.ok)throw new Error(s.message||"Failed to update user status");return s}async getUserStats(){const e=this.getToken(),t=await fetch("".concat(yn,"/auth/users/stats"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to fetch user statistics");return n}async getUserActivityLogs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;const n=this.getToken();let a="".concat(yn,"/auth/users/activity-logs?limit=").concat(t);e&&(a+="&userId=".concat(e));const s=await fetch(a,{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}}),r=await s.json();if(!s.ok)throw new Error(r.message||"Failed to fetch activity logs");return r}async bulkUpdateUsers(e){const t=this.getToken(),n=await fetch("".concat(yn,"/auth/users/bulk-update"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({users:e})}),a=await n.json();if(!n.ok)throw new Error(a.message||"Failed to bulk update users");return a}},bn=window.fetch;window.fetch=async function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[a,s={}]=t;if(a.includes("/api/")&&!a.includes("/auth/login")&&!a.includes("/auth/refresh-token")&&!a.includes("/auth/logout")){const e=xn.getToken();e&&(s.headers=on(on({},s.headers),{},{Authorization:"Bearer ".concat(e)}))}let r=await bn(a,s);if(401===r.status&&!a.includes("/auth/login")){const e=xn.getRefreshToken();if(!e)throw xn.logout(),new Error("Session expired. Please login again.");try{const t=await xn.refreshToken(e);s.headers&&(s.headers.Authorization="Bearer ".concat(t.accessToken)),r=await bn(a,s)}catch(i){throw xn.logout(),new Error("Session expired. Please login again.")}}return r};const Nn=()=>{var e,t,n;const a=en(),{settings:s}=mn(),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(null),[p,f]=(0,r.useState)([]),[g,v]=(0,r.useState)(""),[y,x]=(0,r.useState)([]),[b,N]=(0,r.useState)(!0),[j,w]=(0,r.useState)("queue");(0,r.useEffect)(()=>(k(),C(),()=>{a&&(a.off("ticket-generated"),a.off("token-called"),a.off("token-completed"),a.off("token-recalled"),a.off("counter-updated"))}),[]);const k=async()=>{try{N(!0);const[e,t]=await Promise.all([vn.getDepartments(),vn.getCounters()]);o(e),f(t),e.length>0&&(c(e[0]._id),S(e[0]._id)),t.length>0&&v(t[0]._id)}catch(e){console.error("Error loading initial data:",e),T("Error loading initial data","error")}finally{N(!1)}},S=async e=>{try{const t=await vn.getQueue(e);u(t)}catch(t){console.error("Error loading queue:",t),T("Error loading queue","error")}},C=()=>{a&&(a.on("ticket-generated",e=>{e.department===l&&(S(l),T("New ticket generated: ".concat(e.ticketNumber),"info"))}),a.on("token-called",e=>{m(e.ticket),S(l),E(e.counter._id,"busy"),T("Ticket ".concat(e.ticket.ticketNumber," called to Counter ").concat(e.counter.counterNumber),"success")}),a.on("token-completed",e=>{h&&h._id===e.ticket._id&&m(null),S(l),E(e.counter._id,"active"),T("Ticket ".concat(e.ticket.ticketNumber," completed at Counter ").concat(e.counter.counterNumber),"info")}),a.on("token-recalled",e=>{T("Ticket ".concat(e.ticket.ticketNumber," recalled at Counter ").concat(e.counter.counterNumber),"warning")}),a.on("counter-updated",e=>{f(t=>t.map(t=>t._id===e._id?e:t))}))},E=(e,t)=>{f(n=>n.map(n=>n._id===e?on(on({},n),{},{status:t}):n))},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n={id:Date.now(),message:e,type:t,timestamp:(new Date).toLocaleTimeString()};x(e=>[n,...e.slice(0,49)])},_=async(e,t)=>{try{await vn.callNextTicket(t)}catch(n){throw console.error("Error calling ticket:",n),T("Error calling ticket: "+n.message,"error"),n}},A=()=>{if(null===s||void 0===s||!s.priorityRules)return d[0];const e=s.priorityRules.split(",");for(const t of e){const e=d.find(e=>e.priority===t);if(e)return e}return d[0]},P=e=>{switch(e){case"emergency":return"#ef4444";case"priority":return"#f59e0b";case"senior":return"#8b5cf6";case"child":return"#3b82f6";default:return"#10b981"}},D=e=>{switch(e){case"emergency":return"Emergency";case"priority":return"Priority";case"senior":return"Senior";case"child":return"Child";default:return"Normal"}},L=e=>{switch(e){case"active":return"#10b981";case"busy":return"#f59e0b";default:return"#6b7280"}};return b?(0,Xt.jsx)("div",{className:"queue-control-loading",children:(0,Xt.jsxs)("div",{className:"loading-spinner",children:[(0,Xt.jsx)("div",{className:"spinner"}),(0,Xt.jsx)("div",{children:"Loading Queue Control..."})]})}):(0,Xt.jsxs)("div",{className:"queue-control",children:[(0,Xt.jsx)("div",{className:"control-header",children:(0,Xt.jsx)("div",{className:"header-content",children:(0,Xt.jsxs)("div",{className:"header-title",children:[(0,Xt.jsx)("h1",{children:"Queue Control Center"}),(0,Xt.jsx)("p",{children:"Manage and monitor patient queues in real-time"})]})})}),(0,Xt.jsx)("div",{className:"control-navigation",children:(0,Xt.jsxs)("div",{className:"nav-tabs",children:[(0,Xt.jsxs)("button",{className:"nav-tab ".concat("queue"===j?"active":""),onClick:()=>w("queue"),children:[(0,Xt.jsx)("i",{className:"fas fa-list"}),"Queue Management"]}),(0,Xt.jsxs)("button",{className:"nav-tab ".concat("counters"===j?"active":""),onClick:()=>w("counters"),children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"}),"Counters"]}),(0,Xt.jsxs)("button",{className:"nav-tab ".concat("activity"===j?"active":""),onClick:()=>w("activity"),children:[(0,Xt.jsx)("i",{className:"fas fa-history"}),"Activity Log"]})]})}),(0,Xt.jsxs)("div",{className:"quick-stats",children:[(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon",children:(0,Xt.jsx)("i",{className:"fas fa-users"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:d.length}),(0,Xt.jsx)("div",{className:"stat-label",children:"Waiting"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon",children:(0,Xt.jsx)("i",{className:"fas fa-user-clock"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:p.filter(e=>{var t;return"busy"===e.status&&(null===(t=e.department)||void 0===t?void 0:t._id)===l}).length}),(0,Xt.jsx)("div",{className:"stat-label",children:"Active"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon",children:(0,Xt.jsx)("i",{className:"fas fa-check-circle"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:p.filter(e=>{var t;return"active"===e.status&&(null===(t=e.department)||void 0===t?void 0:t._id)===l}).length}),(0,Xt.jsx)("div",{className:"stat-label",children:"Available"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon",children:(0,Xt.jsx)("i",{className:"fas fa-clock"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:d.length>0?Math.round(5*d.length):0}),(0,Xt.jsx)("div",{className:"stat-label",children:"Est. Wait (min)"})]})]})]}),(0,Xt.jsxs)("div",{className:"control-content",children:[(0,Xt.jsxs)("div",{className:"control-filters",children:[(0,Xt.jsxs)("div",{className:"filter-group",children:[(0,Xt.jsx)("label",{children:"Department"}),(0,Xt.jsx)("select",{value:l,onChange:e=>{c(e.target.value),S(e.target.value)},className:"filter-select",children:i.map(e=>(0,Xt.jsxs)("option",{value:e._id,children:[e.name," (",e.waitingCount||0," waiting)"]},e._id))})]}),(0,Xt.jsxs)("div",{className:"filter-group",children:[(0,Xt.jsx)("label",{children:"Counter"}),(0,Xt.jsxs)("select",{value:g,onChange:e=>v(e.target.value),className:"filter-select",children:[(0,Xt.jsx)("option",{value:"",children:"Select Counter"}),p.map(e=>{var t;return(0,Xt.jsxs)("option",{value:e._id,children:["Counter ",e.counterNumber," - ",null===(t=e.department)||void 0===t?void 0:t.name]},e._id)})]})]}),(0,Xt.jsxs)("div",{className:"control-buttons",children:[(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(e)try{const t=A();if(!t)return void T("No tickets available in queue","warning");await _(t._id,e)}catch(t){console.error("Error calling next ticket:",t),T("Error calling next ticket: "+t.message,"error")}else T("Please select a counter first","warning")}(),disabled:0===d.length||!g,children:[(0,Xt.jsx)("i",{className:"fas fa-phone"}),"Call Next"]}),(0,Xt.jsxs)("button",{className:"btn btn-warning",onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(e)try{const t=p.find(t=>t._id===e);if(null===t||void 0===t||!t.currentTicket)return void T("No active ticket to recall","warning");await vn.recallTicket(e),T("Recalled ticket at Counter ".concat(t.counterNumber),"warning")}catch(t){console.error("Error recalling ticket:",t),T("Error recalling ticket: "+t.message,"error")}else T("Please select a counter first","warning")}(),disabled:!h,children:[(0,Xt.jsx)("i",{className:"fas fa-redo"}),"Recall"]}),(0,Xt.jsxs)("button",{className:"btn btn-success",onClick:()=>async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;if(e)try{const t=p.find(t=>t._id===e);if(null===t||void 0===t||!t.currentTicket)return void T("No active ticket to complete","warning");await vn.completeTicket(e),T("Completed ticket at Counter ".concat(t.counterNumber),"info")}catch(t){console.error("Error completing ticket:",t),T("Error completing ticket: "+t.message,"error")}else T("Please select a counter first","warning")}(),disabled:!h,children:[(0,Xt.jsx)("i",{className:"fas fa-check"}),"Complete"]}),(0,Xt.jsx)("button",{className:"btn btn-secondary",onClick:()=>S(l),children:(0,Xt.jsx)("i",{className:"fas fa-sync"})})]})]}),h&&(0,Xt.jsx)("div",{className:"current-call-banner",children:(0,Xt.jsxs)("div",{className:"call-content",children:[(0,Xt.jsx)("div",{className:"call-icon",children:(0,Xt.jsx)("i",{className:"fas fa-bullhorn"})}),(0,Xt.jsxs)("div",{className:"call-details",children:[(0,Xt.jsx)("div",{className:"ticket-number-large",children:h.ticketNumber}),(0,Xt.jsxs)("div",{className:"call-meta",children:[(0,Xt.jsxs)("span",{children:["Counter ",null===(e=h.assignedCounter)||void 0===e?void 0:e.counterNumber]}),(0,Xt.jsx)("span",{children:"\u2022"}),(0,Xt.jsx)("span",{children:null===(t=h.department)||void 0===t?void 0:t.name}),(0,Xt.jsx)("span",{children:"\u2022"}),(0,Xt.jsx)("span",{className:"priority-tag",style:{backgroundColor:P(h.priority)},children:D(h.priority)})]})]}),(0,Xt.jsxs)("div",{className:"call-time",children:["Called at ",new Date(h.calledAt).toLocaleTimeString()]})]})}),"queue"===j&&(0,Xt.jsxs)("div",{className:"queue-management",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"Waiting Queue"}),(0,Xt.jsxs)("div",{className:"queue-info",children:[(0,Xt.jsxs)("span",{className:"queue-count",children:[d.length," patients waiting"]}),(0,Xt.jsx)("span",{className:"department-name",children:null===(n=i.find(e=>e._id===l))||void 0===n?void 0:n.name})]})]}),(0,Xt.jsxs)("div",{className:"queue-list",children:[d.map((e,t)=>(0,Xt.jsxs)("div",{className:"queue-item",children:[(0,Xt.jsxs)("div",{className:"item-main",children:[(0,Xt.jsxs)("div",{className:"ticket-header",children:[(0,Xt.jsx)("div",{className:"ticket-number",children:e.ticketNumber}),(0,Xt.jsxs)("div",{className:"position-badge",children:["#",t+1]})]}),(0,Xt.jsxs)("div",{className:"ticket-details",children:[(0,Xt.jsxs)("div",{className:"patient-info",children:[(0,Xt.jsx)("span",{className:"patient-name",children:e.patientName||"Anonymous"}),(0,Xt.jsx)("span",{className:"ticket-time",children:new Date(e.generatedAt).toLocaleTimeString()})]}),(0,Xt.jsx)("div",{className:"priority-badge",style:{backgroundColor:P(e.priority),color:"white"},children:D(e.priority)})]})]}),(0,Xt.jsxs)("div",{className:"item-actions",children:[(0,Xt.jsx)("button",{className:"btn-icon primary",onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;if(t)try{await vn.callSpecificTicket(e,t),T("Manually called specific ticket ".concat(e),"info")}catch(n){console.error("Error calling specific ticket:",n),T("Error calling specific ticket: "+n.message,"error")}else T("Please select a counter first","warning")}(e._id),disabled:!g,title:"Call this ticket",children:(0,Xt.jsx)("i",{className:"fas fa-phone"})}),(0,Xt.jsx)("button",{className:"btn-icon warning",onClick:()=>(async e=>{try{await vn.skipTicket(e);const t=d.filter(t=>t._id!==e),n=d.find(t=>t._id===e);u([...t,n]),T("Skipped ticket ".concat(n.ticketNumber),"warning")}catch(t){console.error("Error skipping ticket:",t),T("Error skipping ticket: "+t.message,"error")}})(e._id),title:"Skip this ticket",children:(0,Xt.jsx)("i",{className:"fas fa-forward"})})]})]},e._id)),0===d.length&&(0,Xt.jsxs)("div",{className:"empty-state",children:[(0,Xt.jsx)("i",{className:"fas fa-check-circle"}),(0,Xt.jsx)("h4",{children:"No patients in queue"}),(0,Xt.jsx)("p",{children:"All patients have been served"})]})]})]}),"counters"===j&&(0,Xt.jsxs)("div",{className:"counters-view",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"Counter Status"}),(0,Xt.jsxs)("div",{className:"counters-summary",children:[(0,Xt.jsxs)("span",{className:"summary-item",children:[(0,Xt.jsx)("span",{className:"dot active"}),"Available: ",p.filter(e=>"active"===e.status).length]}),(0,Xt.jsxs)("span",{className:"summary-item",children:[(0,Xt.jsx)("span",{className:"dot busy"}),"Busy: ",p.filter(e=>"busy"===e.status).length]}),(0,Xt.jsxs)("span",{className:"summary-item",children:[(0,Xt.jsx)("span",{className:"dot offline"}),"Offline: ",p.filter(e=>"offline"===e.status).length]})]})]}),(0,Xt.jsx)("div",{className:"counters-grid",children:p.map(e=>{var t;return(0,Xt.jsxs)("div",{className:"counter-card ".concat(e.status),children:[(0,Xt.jsxs)("div",{className:"counter-header",children:[(0,Xt.jsxs)("div",{className:"counter-number",children:["Counter ",e.counterNumber]}),(0,Xt.jsx)("div",{className:"status-indicator",style:{backgroundColor:L(e.status)}})]}),(0,Xt.jsxs)("div",{className:"counter-info",children:[(0,Xt.jsx)("div",{className:"counter-department",children:(null===(t=e.department)||void 0===t?void 0:t.name)||"Unassigned"}),(0,Xt.jsx)("div",{className:"counter-status",children:e.status})]}),e.currentTicket&&(0,Xt.jsxs)("div",{className:"current-ticket",children:[(0,Xt.jsx)("div",{className:"ticket-number-small",children:e.currentTicket.ticketNumber}),(0,Xt.jsx)("div",{className:"ticket-time",children:"Active"})]})]},e._id)})})]}),"activity"===j&&(0,Xt.jsxs)("div",{className:"activity-view",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"Activity Log"}),(0,Xt.jsx)("button",{className:"btn btn-text",onClick:()=>x([]),children:"Clear Log"})]}),(0,Xt.jsxs)("div",{className:"activity-list",children:[y.map(e=>(0,Xt.jsxs)("div",{className:"activity-item ".concat(e.type),children:[(0,Xt.jsx)("div",{className:"activity-icon",children:(0,Xt.jsx)("i",{className:"fas ".concat("success"===e.type?"fa-check-circle":"error"===e.type?"fa-exclamation-circle":"warning"===e.type?"fa-exclamation-triangle":"fa-info-circle")})}),(0,Xt.jsxs)("div",{className:"activity-content",children:[(0,Xt.jsx)("div",{className:"activity-message",children:e.message}),(0,Xt.jsx)("div",{className:"activity-time",children:e.timestamp})]})]},e.id)),0===y.length&&(0,Xt.jsxs)("div",{className:"empty-state",children:[(0,Xt.jsx)("i",{className:"fas fa-history"}),(0,Xt.jsx)("h4",{children:"No activities yet"}),(0,Xt.jsx)("p",{children:"Activities will appear here as they occur"})]})]})]})]})]})},jn=e=>{let{counters:t}=e;const n=en(),[a,s]=(0,r.useState)(t||[]),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)({counterNumber:"",name:"",department:"",type:"department"}),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(!1),[g,v]=(0,r.useState)(new Date),[y,x]=(0,r.useState)(!1),[b,N]=(0,r.useState)({name:"",code:"",prefix:"",estimatedWaitTime:15}),[j,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&0!==t.length||k(),S(),E()},[]);const k=async()=>{try{o(!0);const e=await vn.getCounters();s(e),v(new Date)}catch(e){console.error("Error loading counters:",e)}finally{o(!1)}},S=async()=>{try{w(!0),console.log("\ud83d\udd04 Loading departments...");const e=await fetch("/api/departments");if(e.ok){const t=await e.json();console.log("\u2705 Departments loaded:",t),m(t)}else console.error("\u274c Failed to load departments:",e.status),C()}catch(e){console.error("\u274c Error loading departments:",e),C()}finally{w(!1)}},C=()=>{console.log("\ud83d\udd04 Creating default departments...");m([{_id:"1",name:"General OPD",code:"GENERAL",prefix:"G",estimatedWaitTime:15,active:!0},{_id:"2",name:"Cardiology",code:"CARDIO",prefix:"C",estimatedWaitTime:25,active:!0},{_id:"3",name:"Orthopedics",code:"ORTHO",prefix:"O",estimatedWaitTime:20,active:!0},{_id:"4",name:"Pediatrics",code:"PEDIA",prefix:"P",estimatedWaitTime:18,active:!0},{_id:"5",name:"Dental",code:"DENTAL",prefix:"D",estimatedWaitTime:22,active:!0}]),console.log("\u2705 Default departments created")},E=()=>{if(n)return n.on("counter-updated",e=>{s(t=>t.map(t=>t._id===e._id?e:t)),v(new Date)}),n.on("counter-created",e=>{s(t=>t.find(t=>t._id===e._id)?t:[...t,e]),c(!1),f(!1),v(new Date)}),n.on("counter-deleted",e=>{s(t=>t.filter(t=>t._id!==e)),v(new Date)}),n.on("token-called",e=>{s(t=>t.map(t=>t._id===e.counter._id?e.counter:t)),v(new Date)}),n.on("token-completed",e=>{s(t=>t.map(t=>t._id===e.counter._id?e.counter:t)),v(new Date)}),n.on("token-recalled",e=>{s(t=>t.map(t=>t._id===e.counter._id?e.counter:t)),v(new Date)}),()=>{n.off("counter-updated"),n.off("counter-created"),n.off("counter-deleted"),n.off("token-called"),n.off("token-completed"),n.off("token-recalled")};console.warn("Socket not available for counter management")},T={active:a.filter(e=>"active"===e.status).length,busy:a.filter(e=>"busy"===e.status).length,onBreak:a.filter(e=>"break"===e.status).length,offline:a.filter(e=>"offline"===e.status).length,total:a.length};return i&&0===a.length?(0,Xt.jsx)("div",{className:"counter-management loading",children:(0,Xt.jsxs)("div",{className:"loading-spinner",children:[(0,Xt.jsx)("div",{className:"spinner"}),(0,Xt.jsx)("div",{className:"loading-text",children:"Loading counters..."})]})}):(0,Xt.jsxs)("div",{className:"counter-management",children:[(0,Xt.jsxs)("div",{className:"management-header",children:[(0,Xt.jsxs)("div",{className:"header-content",children:[(0,Xt.jsxs)("div",{className:"header-title-section",children:[(0,Xt.jsx)("h1",{className:"page-title",children:"Counter Management"}),(0,Xt.jsxs)("p",{className:"page-subtitle",children:[(0,Xt.jsx)("i",{className:"fas fa-info-circle"}),"Manage counter access and open operator interfaces"]})]}),(0,Xt.jsxs)("div",{className:"header-info",children:[(0,Xt.jsxs)("div",{className:"last-update",children:[(0,Xt.jsx)("i",{className:"fas fa-clock"}),"Last updated: ",g.toLocaleTimeString()]}),!n&&(0,Xt.jsxs)("div",{className:"socket-warning",children:[(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"}),"Real-time updates disabled"]})]})]}),(0,Xt.jsxs)("div",{className:"header-actions",children:[(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>c(!0),disabled:p,children:[(0,Xt.jsx)("i",{className:"fas fa-plus"})," Add Counter"]}),(0,Xt.jsxs)("button",{className:"btn btn-secondary",onClick:()=>x(!0),children:[(0,Xt.jsx)("i",{className:"fas fa-building"})," Manage Departments"]}),(0,Xt.jsxs)("button",{className:"btn btn-outline",onClick:async()=>{await k(),await S()},disabled:i,children:[(0,Xt.jsx)("i",{className:"fas fa-sync ".concat(i?"fa-spin":"")})," Refresh"]})]})]}),(0,Xt.jsxs)("div",{className:"stats-overview",children:[(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon active",children:(0,Xt.jsx)("i",{className:"fas fa-play-circle"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:T.active}),(0,Xt.jsx)("div",{className:"stat-label",children:"Active"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon busy",children:(0,Xt.jsx)("i",{className:"fas fa-phone-alt"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:T.busy}),(0,Xt.jsx)("div",{className:"stat-label",children:"Busy"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon break",children:(0,Xt.jsx)("i",{className:"fas fa-coffee"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:T.onBreak}),(0,Xt.jsx)("div",{className:"stat-label",children:"On Break"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-icon offline",children:(0,Xt.jsx)("i",{className:"fas fa-power-off"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:T.offline}),(0,Xt.jsx)("div",{className:"stat-label",children:"Offline"})]})]}),(0,Xt.jsxs)("div",{className:"stat-card total",children:[(0,Xt.jsx)("div",{className:"stat-icon",children:(0,Xt.jsx)("i",{className:"fas fa-layer-group"})}),(0,Xt.jsxs)("div",{className:"stat-content",children:[(0,Xt.jsx)("div",{className:"stat-value",children:T.total}),(0,Xt.jsx)("div",{className:"stat-label",children:"Total Counters"})]})]})]}),l&&(0,Xt.jsx)("div",{className:"form-overlay",children:(0,Xt.jsxs)("div",{className:"form-modal",children:[(0,Xt.jsxs)("div",{className:"form-header",children:[(0,Xt.jsx)("h3",{children:"Add New Counter"}),(0,Xt.jsx)("button",{className:"btn-close",onClick:()=>{c(!1),f(!1)},disabled:p,children:(0,Xt.jsx)("i",{className:"fas fa-times"})})]}),(0,Xt.jsxs)("div",{className:"form-body",children:[(0,Xt.jsxs)("div",{className:"form-grid",children:[(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Counter Name"}),(0,Xt.jsx)("input",{type:"text",className:"form-input",value:d.name,onChange:e=>u(t=>on(on({},t),{},{name:e.target.value})),placeholder:"e.g., Reception Counter 1",disabled:p})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Department *"}),j?(0,Xt.jsxs)("div",{className:"loading-small",children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Loading departments..."]}):(0,Xt.jsxs)("select",{className:"form-select",value:d.department,onChange:e=>u(t=>on(on({},t),{},{department:e.target.value})),disabled:p||0===h.length,required:!0,children:[(0,Xt.jsx)("option",{value:"",children:"Select Department"}),h.map(e=>(0,Xt.jsxs)("option",{value:e._id,children:[e.name," (",e.code,")"]},e._id))]}),0===h.length&&!j&&(0,Xt.jsx)("div",{className:"form-error",children:"No departments available. Please create a department first."})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Counter Type"}),(0,Xt.jsxs)("select",{className:"form-select",value:d.type,onChange:e=>u(t=>on(on({},t),{},{type:e.target.value})),disabled:p,children:[(0,Xt.jsx)("option",{value:"reception",children:"Reception"}),(0,Xt.jsx)("option",{value:"department",children:"Department"}),(0,Xt.jsx)("option",{value:"special",children:"Special"})]})]})]}),p&&(0,Xt.jsxs)("div",{className:"form-notice",children:[(0,Xt.jsx)("i",{className:"fas fa-circle-notch fa-spin"}),"Creating counter, please wait..."]})]}),(0,Xt.jsxs)("div",{className:"form-actions",children:[(0,Xt.jsx)("button",{className:"btn btn-success",onClick:async()=>{if(!p)try{f(!0);const e=a.map(e=>e.counterNumber),t=d.counterNumber||(e.length>0?Math.max(...e)+1:1),n={counterNumber:t,name:d.name||"Counter ".concat(t),department:d.department,type:d.type||"department"};console.log("\ud83d\udcdd Creating counter with data:",n),await vn.createCounter(n),u({counterNumber:"",name:"",department:"",type:"department"})}catch(e){console.error("Error adding counter:",e),alert("Error adding counter: "+e.message),f(!1)}},disabled:p||!d.department||0===h.length,children:p?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-circle-notch fa-spin"})," Creating..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-plus"})," Create Counter"]})}),(0,Xt.jsx)("button",{className:"btn btn-outline",onClick:()=>{c(!1),f(!1)},disabled:p,children:"Cancel"})]})]})}),y&&(0,Xt.jsx)("div",{className:"form-overlay",children:(0,Xt.jsxs)("div",{className:"form-modal large",children:[(0,Xt.jsxs)("div",{className:"form-header",children:[(0,Xt.jsx)("h3",{children:"Manage Departments"}),(0,Xt.jsx)("button",{className:"btn-close",onClick:()=>x(!1),children:(0,Xt.jsx)("i",{className:"fas fa-times"})})]}),(0,Xt.jsxs)("div",{className:"form-body",children:[(0,Xt.jsxs)("div",{className:"form-section",children:[(0,Xt.jsx)("h4",{children:"Add New Department"}),(0,Xt.jsxs)("div",{className:"form-grid",children:[(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Department Name *"}),(0,Xt.jsx)("input",{type:"text",className:"form-input",value:b.name,onChange:e=>N(t=>on(on({},t),{},{name:e.target.value})),placeholder:"e.g., General OPD",required:!0})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Department Code *"}),(0,Xt.jsx)("input",{type:"text",className:"form-input",value:b.code,onChange:e=>N(t=>on(on({},t),{},{code:e.target.value})),placeholder:"e.g., general",required:!0})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Ticket Prefix *"}),(0,Xt.jsx)("input",{type:"text",className:"form-input",value:b.prefix,onChange:e=>N(t=>on(on({},t),{},{prefix:e.target.value})),placeholder:"e.g., A",maxLength:"3",required:!0})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{className:"form-label",children:"Estimated Wait Time (minutes)"}),(0,Xt.jsx)("input",{type:"number",className:"form-input",value:b.estimatedWaitTime,onChange:e=>N(t=>on(on({},t),{},{estimatedWaitTime:parseInt(e.target.value)||15})),min:"5",max:"120"})]})]}),(0,Xt.jsx)("div",{className:"form-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-success",onClick:async()=>{try{const e={name:b.name,code:b.code.toLowerCase(),prefix:b.prefix.toUpperCase(),estimatedWaitTime:b.estimatedWaitTime};console.log("\ud83d\udcdd Creating department with data:",e);const t=await fetch("/api/departments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to create department")}const n=await t.json();N({name:"",code:"",prefix:"",estimatedWaitTime:15}),x(!1),await S(),alert(n.message||"Department created successfully!")}catch(e){console.error("Error adding department:",e),alert("Error adding department: "+e.message)}},disabled:!b.name||!b.code||!b.prefix,children:[(0,Xt.jsx)("i",{className:"fas fa-plus"})," Add Department"]})})]}),(0,Xt.jsxs)("div",{className:"form-section",children:[(0,Xt.jsxs)("h4",{children:["Existing Departments (",h.length,")"]}),j?(0,Xt.jsxs)("div",{className:"loading-small",children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Loading departments..."]}):(0,Xt.jsxs)("div",{className:"departments-list",children:[h.map(e=>(0,Xt.jsxs)("div",{className:"department-item",children:[(0,Xt.jsxs)("div",{className:"dept-info",children:[(0,Xt.jsx)("div",{className:"dept-name",children:e.name}),(0,Xt.jsxs)("div",{className:"dept-details",children:["Code: ",e.code," | Prefix: ",e.prefix," | Wait: ",e.estimatedWaitTime,"m"]}),(0,Xt.jsxs)("div",{className:"dept-counters",children:["Counters: ",e.counters?e.counters.length:0]})]}),(0,Xt.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this department? This action cannot be undone."))try{const t=await fetch("/api/departments/".concat(e),{method:"DELETE"});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to delete department")}await S(),alert("Department deleted successfully!")}catch(t){console.error("Error deleting department:",t),alert("Error deleting department: "+t.message)}})(e._id),disabled:e.counters&&e.counters.length>0,title:e.counters&&e.counters.length>0?"Cannot delete department with counters":"Delete department",children:(0,Xt.jsx)("i",{className:"fas fa-trash"})})]},e._id)),0===h.length&&(0,Xt.jsx)("div",{className:"empty-departments",children:"No departments found. Add your first department above."})]})]})]}),(0,Xt.jsx)("div",{className:"form-actions",children:(0,Xt.jsx)("button",{className:"btn btn-outline",onClick:()=>x(!1),children:"Close"})})]})}),(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsxs)("h3",{children:["Service Counters (",a.length,")"]}),(0,Xt.jsx)("div",{className:"section-info",children:(0,Xt.jsxs)("span",{className:"info-text",children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"})," Open counter interfaces with dedicated login"]})})]}),(0,Xt.jsx)("div",{className:"counters-grid",children:a.map(e=>{var t;return(0,Xt.jsxs)("div",{className:"counter-card ".concat(e.status),children:[(0,Xt.jsxs)("div",{className:"card-header",children:[(0,Xt.jsxs)("div",{className:"counter-title",children:[(0,Xt.jsxs)("div",{className:"counter-number",children:["Counter ",e.counterNumber]}),(0,Xt.jsx)("div",{className:"counter-name",children:e.name})]}),(0,Xt.jsxs)("div",{className:"status-badge ".concat(e.status),children:[(0,Xt.jsx)("span",{className:"status-dot"}),e.status.charAt(0).toUpperCase()+e.status.slice(1)]})]}),(0,Xt.jsxs)("div",{className:"card-body",children:[(0,Xt.jsxs)("div",{className:"counter-info",children:[(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-building"}),(0,Xt.jsx)("span",{children:(null===(t=e.department)||void 0===t?void 0:t.name)||"No Department"})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-tag"}),(0,Xt.jsxs)("span",{children:["Type: ",e.type]})]})]}),(0,Xt.jsxs)("div",{className:"current-ticket",children:[(0,Xt.jsx)("div",{className:"ticket-label",children:"Current Ticket"}),e.currentTicket?(0,Xt.jsxs)("div",{className:"ticket-info",children:[(0,Xt.jsx)("div",{className:"ticket-number",children:e.currentTicket.ticketNumber}),(0,Xt.jsx)("div",{className:"patient-name",children:e.currentTicket.patientName||"Patient"}),(0,Xt.jsxs)("div",{className:"ticket-time",children:[(0,Xt.jsx)("i",{className:"fas fa-clock"}),e.currentTicket.calledAt?new Date(e.currentTicket.calledAt).toLocaleTimeString():"Recently"]})]}):(0,Xt.jsx)("div",{className:"no-ticket",children:"No active ticket"})]})]}),(0,Xt.jsxs)("div",{className:"card-actions",children:[(0,Xt.jsxs)("div",{className:"action-group",children:[(0,Xt.jsxs)("button",{className:"btn-action primary",onClick:()=>(e=>{const t=window.location.origin;window.open("".concat(t,"/login/counter"),"Counter_".concat(e._id),"width=1200,height=800")})(e),title:"Open Counter Operator Interface",children:[(0,Xt.jsx)("i",{className:"fas fa-sign-in-alt"}),"Operator"]}),(0,Xt.jsxs)("button",{className:"btn-action info",onClick:()=>(e=>{const t=window.location.origin;window.open("".concat(t,"/waiting/counter/").concat(e._id),"Waiting_".concat(e._id),"width=1400,height=900")})(e),title:"Open Waiting Screen Display",children:[(0,Xt.jsx)("i",{className:"fas fa-tv"}),"Display"]})]}),(0,Xt.jsxs)("div",{className:"action-group",children:[(0,Xt.jsx)("button",{className:"btn-action success",onClick:t=>{t.stopPropagation(),(async e=>{try{await vn.callNextTicket(e)}catch(t){console.error("Error calling next ticket:",t),alert("Error calling next ticket: "+t.message)}})(e._id)},disabled:"busy"===e.status||"offline"===e.status,title:"Call Next Ticket",children:(0,Xt.jsx)("i",{className:"fas fa-phone"})}),(0,Xt.jsxs)("select",{value:e.status,onChange:t=>{t.stopPropagation(),(async(e,t)=>{try{await vn.updateCounterStatus(e,t)}catch(n){console.error("Error updating counter status:",n),alert("Error updating counter status: "+n.message)}})(e._id,t.target.value)},className:"status-select",onClick:e=>e.stopPropagation(),children:[(0,Xt.jsx)("option",{value:"active",children:"Active"}),(0,Xt.jsx)("option",{value:"busy",children:"Busy"}),(0,Xt.jsx)("option",{value:"break",children:"Break"}),(0,Xt.jsx)("option",{value:"offline",children:"Offline"})]}),(0,Xt.jsx)("button",{className:"btn-action danger",onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this counter? This action cannot be undone."))try{await vn.deleteCounter(e)}catch(t){console.error("Error deleting counter:",t),alert("Error deleting counter: "+t.message)}})(e._id)},disabled:"busy"===e.status,title:"Delete Counter",children:(0,Xt.jsx)("i",{className:"fas fa-trash"})})]})]}),(0,Xt.jsx)("div",{className:"card-footer",children:(0,Xt.jsxs)("div",{className:"access-info",children:[(0,Xt.jsx)("i",{className:"fas fa-key"})," Requires separate login for operator access"]})})]},e._id)})}),0===a.length&&!i&&(0,Xt.jsxs)("div",{className:"empty-state",children:[(0,Xt.jsx)("div",{className:"empty-icon",children:(0,Xt.jsx)("i",{className:"fas fa-desktop"})}),(0,Xt.jsx)("h3",{children:"No Counters Found"}),(0,Xt.jsx)("p",{children:"Get started by adding your first service counter."}),(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[(0,Xt.jsx)("i",{className:"fas fa-plus"})," Add First Counter"]})]})]})},wn=e=>{let{hasUnsavedChanges:t,onRefresh:n,message:a}=e;return(0,Xt.jsxs)("div",{className:"settings-header",children:[(0,Xt.jsxs)("div",{className:"header-content",children:[(0,Xt.jsxs)("div",{className:"header-title-section",children:[(0,Xt.jsx)("h1",{className:"page-title",children:"System Settings"}),(0,Xt.jsx)("p",{className:"page-subtitle",children:"Configure and customize your hospital management system"})]}),(0,Xt.jsx)("div",{className:"header-info",children:(0,Xt.jsxs)("div",{className:"status-indicator",children:[(0,Xt.jsx)("span",{className:"status-dot ".concat(t?"unsaved":"saved")}),t?"Unsaved Changes":"All Changes Saved"]})})]}),(0,Xt.jsx)("div",{className:"header-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-outline",onClick:n,children:[(0,Xt.jsx)("i",{className:"fas fa-sync"})," Refresh"]})}),a&&(0,Xt.jsxs)("div",{className:"alert ".concat(a.includes("Error")?"alert-error":"alert-success"),children:[(0,Xt.jsx)("i",{className:"fas ".concat(a.includes("Error")?"fa-exclamation-circle":"fa-check-circle")}),(0,Xt.jsx)("span",{children:a})]})]})},kn=e=>{let{activeTab:t,onTabChange:n}=e;return(0,Xt.jsx)("div",{className:"settings-navigation",children:(0,Xt.jsx)("div",{className:"nav-tabs",children:[{key:"general",icon:"cog",title:"General",subtitle:"Basic system configuration"},{key:"queue",icon:"list-ol",title:"Queue Settings",subtitle:"Patient flow management"},{key:"theme",icon:"palette",title:"Theme Settings",subtitle:"Visual customization"},{key:"ads",icon:"ad",title:"Advertisements",subtitle:"Display messages"},{key:"maintenance",icon:"tools",title:"Maintenance",subtitle:"System management"}].map(e=>(0,Xt.jsxs)("button",{className:"nav-tab ".concat(t===e.key?"active":""),onClick:()=>n(e.key),children:[(0,Xt.jsx)("div",{className:"tab-icon",children:(0,Xt.jsx)("i",{className:"fas fa-".concat(e.icon)})}),(0,Xt.jsxs)("div",{className:"tab-content",children:[(0,Xt.jsx)("div",{className:"tab-title",children:e.title}),(0,Xt.jsx)("div",{className:"tab-subtitle",children:e.subtitle})]})]},e.key))})})},Sn=e=>{let{saving:t,hasUnsavedChanges:n,onSave:a,onDiscard:s}=e;return(0,Xt.jsxs)("div",{className:"settings-footer",children:[(0,Xt.jsxs)("div",{className:"footer-actions",children:[(0,Xt.jsx)("button",{className:"btn btn-primary",onClick:a,disabled:t||!n,children:t?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Saving Changes..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-save"})," Save Changes"]})}),(0,Xt.jsxs)("button",{className:"btn btn-outline",onClick:s,disabled:t||!n,children:[(0,Xt.jsx)("i",{className:"fas fa-times"})," Discard Changes"]})]}),n&&(0,Xt.jsxs)("div",{className:"footer-note",children:[(0,Xt.jsx)("i",{className:"fas fa-exclamation-circle"}),"You have unsaved changes"]})]})},Cn=e=>{let{onClose:t,onConfirm:n,saving:a}=e;const[s,i]=(0,r.useState)("");return(0,Xt.jsx)("div",{className:"modal-overlay",children:(0,Xt.jsxs)("div",{className:"modal-content danger-modal",children:[(0,Xt.jsxs)("div",{className:"modal-header",children:[(0,Xt.jsxs)("div",{className:"modal-title",children:[(0,Xt.jsx)("div",{className:"title-icon danger",children:(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"})}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("h3",{children:"Delete All Data"}),(0,Xt.jsx)("p",{children:"This action cannot be undone"})]})]}),(0,Xt.jsx)("button",{className:"close-btn",onClick:t,children:(0,Xt.jsx)("i",{className:"fas fa-times"})})]}),(0,Xt.jsxs)("div",{className:"modal-body",children:[(0,Xt.jsx)("div",{className:"warning-section",children:(0,Xt.jsxs)("div",{className:"warning-content",children:[(0,Xt.jsx)("h4",{children:"This will permanently delete:"}),(0,Xt.jsxs)("div",{className:"warning-list",children:[(0,Xt.jsxs)("div",{className:"warning-item",children:[(0,Xt.jsx)("i",{className:"fas fa-users"}),(0,Xt.jsx)("span",{children:"All patient tickets and queue data"})]}),(0,Xt.jsxs)("div",{className:"warning-item",children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"}),(0,Xt.jsx)("span",{children:"All counter assignments and history"})]}),(0,Xt.jsxs)("div",{className:"warning-item",children:[(0,Xt.jsx)("i",{className:"fas fa-building"}),(0,Xt.jsx)("span",{children:"All department queues and statistics"})]})]})]})}),(0,Xt.jsxs)("div",{className:"confirmation-section",children:[(0,Xt.jsxs)("label",{className:"confirmation-label",children:["Type ",(0,Xt.jsx)("strong",{children:"DELETE ALL DATA"})," to confirm:"]}),(0,Xt.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"DELETE ALL DATA",className:"confirmation-input"})]})]}),(0,Xt.jsxs)("div",{className:"modal-actions",children:[(0,Xt.jsx)("button",{className:"btn btn-danger",onClick:()=>{"DELETE ALL DATA"===s&&n()},disabled:"DELETE ALL DATA"!==s||a,children:a?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Deleting..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-trash"})," Delete All Data"]})}),(0,Xt.jsx)("button",{className:"btn btn-outline",onClick:t,disabled:a,children:"Cancel"})]})]})})},En=e=>{let{settings:t,onInputChange:n,setHasUnsavedChanges:a,setMessage:s}=e;const[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),d=async e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return s("Please select a valid image file (JPEG, PNG, GIF, etc.)"),void setTimeout(()=>s(""),3e3);try{o(!0),s("");const r=new FormData;r.append("logo",t);const i=await un.uploadLogo(r);n("hospitalLogo",i.logoUrl),a(!0),s("Logo uploaded successfully!"),setTimeout(()=>s(""),3e3),e.target.value=""}catch(r){console.error("Error uploading logo:",r),s("Error uploading logo: "+r.message),setTimeout(()=>s(""),3e3)}finally{o(!1)}}};return(0,Xt.jsxs)("div",{className:"settings-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h2",{children:"General Settings"}),(0,Xt.jsx)("p",{children:"Basic configuration for your hospital management system"})]}),(0,Xt.jsxs)("div",{className:"settings-grid",children:[(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-hospital"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Hospital Name"}),(0,Xt.jsx)("input",{type:"text",className:"setting-input",value:t.hospitalName,onChange:e=>n("hospitalName",e.target.value),placeholder:"Enter hospital name",required:!0}),(0,Xt.jsx)("div",{className:"setting-description",children:"This name will be displayed throughout the system"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-language"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Default Language"}),(0,Xt.jsxs)("select",{className:"setting-select",value:t.language,onChange:e=>n("language",e.target.value),children:[(0,Xt.jsx)("option",{value:"en",children:"English"}),(0,Xt.jsx)("option",{value:"ar",children:"Arabic (\u0627\u0644\u0639\u0631\u0628\u064a\u0629)"}),(0,Xt.jsx)("option",{value:"ur",children:"Urdu (\u0627\u0631\u062f\u0648)"}),(0,Xt.jsx)("option",{value:"fr",children:"French (Fran\xe7ais)"}),(0,Xt.jsx)("option",{value:"es",children:"Spanish (Espa\xf1ol)"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"System language for all interfaces"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-clock"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Maximum Wait Time"}),(0,Xt.jsxs)("div",{className:"input-with-unit",children:[(0,Xt.jsx)("input",{type:"number",className:"setting-input",value:t.maxWaitTime,onChange:e=>n("maxWaitTime",parseInt(e.target.value)||30),min:"5",max:"120",required:!0}),(0,Xt.jsx)("span",{className:"input-unit",children:"minutes"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Maximum estimated wait time shown to patients"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-image"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Hospital Logo"}),(0,Xt.jsxs)("div",{className:"logo-upload-section",children:[t.hospitalLogo?(0,Xt.jsxs)("div",{className:"logo-preview-with-actions",children:[(0,Xt.jsx)("div",{className:"logo-preview",children:(0,Xt.jsx)("img",{src:t.hospitalLogo,alt:"Hospital Logo"})}),(0,Xt.jsxs)("div",{className:"logo-actions",children:[(0,Xt.jsxs)("label",{className:"btn btn-outline btn-sm",children:[(0,Xt.jsx)("i",{className:"fas fa-sync"})," Change Logo",(0,Xt.jsx)("input",{type:"file",accept:"image/*",onChange:d,style:{display:"none"},disabled:i||l})]}),(0,Xt.jsxs)("button",{className:"btn btn-danger btn-sm",onClick:async()=>{if(!t.hospitalLogo)return s("No logo to delete"),void setTimeout(()=>s(""),3e3);if(window.confirm("Are you sure you want to delete the logo?"))try{c(!0),s(""),await un.deleteLogo(),n("hospitalLogo",""),a(!0),s("Logo deleted successfully!"),setTimeout(()=>s(""),3e3)}catch(e){console.error("Error deleting logo:",e),s("Error deleting logo: "+e.message),setTimeout(()=>s(""),3e3)}finally{c(!1)}},disabled:i||l,children:[l?(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,Xt.jsx)("i",{className:"fas fa-trash"}),"Delete Logo"]})]})]}):(0,Xt.jsx)("div",{className:"logo-upload-area",children:(0,Xt.jsxs)("label",{className:"upload-area",children:[(0,Xt.jsxs)("div",{className:"upload-placeholder",children:[(0,Xt.jsx)("i",{className:"fas fa-cloud-upload-alt"}),(0,Xt.jsx)("div",{children:"Click to upload hospital logo"}),(0,Xt.jsx)("div",{className:"upload-hint",children:"Recommended: 300x100px PNG or SVG"})]}),(0,Xt.jsx)("input",{type:"file",accept:"image/*",onChange:d,style:{display:"none"},disabled:i})]})}),i&&(0,Xt.jsxs)("div",{className:"upload-status",children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Uploading logo..."]}),l&&(0,Xt.jsxs)("div",{className:"upload-status",children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Deleting logo..."]})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Upload your hospital logo for branding. Supported formats: JPG, PNG, GIF, SVG"})]})]})]})]})},Tn=e=>{let{settings:t,onInputChange:n}=e;return(0,Xt.jsxs)("div",{className:"settings-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h2",{children:"Queue Settings"}),(0,Xt.jsx)("p",{children:"Configure patient flow and notification preferences"})]}),(0,Xt.jsxs)("div",{className:"settings-grid",children:[(0,Xt.jsxs)("div",{className:"setting-card toggle-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-phone"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsxs)("div",{className:"toggle-header",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Auto-Call Next Patient"}),(0,Xt.jsxs)("label",{className:"toggle-switch",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.autoCall,onChange:e=>n("autoCall",e.target.checked)}),(0,Xt.jsx)("span",{className:"toggle-slider"})]})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Automatically call next patient when current is completed"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card toggle-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-volume-up"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsxs)("div",{className:"toggle-header",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Sound Notifications"}),(0,Xt.jsxs)("label",{className:"toggle-switch",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.soundNotifications,onChange:e=>n("soundNotifications",e.target.checked)}),(0,Xt.jsx)("span",{className:"toggle-slider"})]})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Play sound when calling patients"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card toggle-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-bullhorn"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsxs)("div",{className:"toggle-header",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Display Announcements"}),(0,Xt.jsxs)("label",{className:"toggle-switch",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.displayAnnouncements,onChange:e=>n("displayAnnouncements",e.target.checked)}),(0,Xt.jsx)("span",{className:"toggle-slider"})]})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Display announcements on waiting area screens"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-sort-amount-down"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Priority Rules Order"}),(0,Xt.jsxs)("select",{className:"setting-select",value:t.priorityRules,onChange:e=>n("priorityRules",e.target.value),children:[(0,Xt.jsx)("option",{value:"emergency,priority,senior,child,normal",children:"Emergency \u2192 Priority \u2192 Senior \u2192 Child \u2192 Normal"}),(0,Xt.jsx)("option",{value:"priority,emergency,senior,child,normal",children:"Priority \u2192 Emergency \u2192 Senior \u2192 Child \u2192 Normal"}),(0,Xt.jsx)("option",{value:"senior,emergency,priority,child,normal",children:"Senior \u2192 Emergency \u2192 Priority \u2192 Child \u2192 Normal"}),(0,Xt.jsx)("option",{value:"child,senior,emergency,priority,normal",children:"Child \u2192 Senior \u2192 Emergency \u2192 Priority \u2192 Normal"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Define the order in which patients are called based on priority"})]})]})]})]})},_n=e=>{var t,n,a,s,r;let{settings:i}=e;return(0,Xt.jsx)("div",{className:"setting-card full-width",children:(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Theme Preview"}),(0,Xt.jsx)("div",{className:"theme-preview",children:(0,Xt.jsxs)("div",{className:"preview-container",style:{backgroundColor:null===(t=i.themes)||void 0===t?void 0:t.backgroundColor,color:null===(n=i.themes)||void 0===n?void 0:n.secondaryColor,fontFamily:null===(a=i.themes)||void 0===a?void 0:a.fontFamily},children:[(0,Xt.jsxs)("div",{className:"preview-header",style:{backgroundColor:null===(s=i.themes)||void 0===s?void 0:s.primaryColor},children:[(0,Xt.jsx)("h3",{children:i.hospitalName}),(0,Xt.jsxs)("div",{className:"preview-nav",children:[(0,Xt.jsx)("span",{children:"Dashboard"}),(0,Xt.jsx)("span",{children:"Queue"}),(0,Xt.jsx)("span",{children:"Reports"})]})]}),(0,Xt.jsx)("div",{className:"preview-body",children:(0,Xt.jsxs)("div",{className:"preview-card",children:[(0,Xt.jsx)("div",{className:"preview-button",style:{backgroundColor:null===(r=i.themes)||void 0===r?void 0:r.primaryColor,color:"#ffffff"},children:"Action Button"}),(0,Xt.jsxs)("div",{className:"preview-content",children:[(0,Xt.jsx)("p",{children:"This is a preview of how your theme will appear throughout the application."}),(0,Xt.jsxs)("div",{className:"preview-stats",children:[(0,Xt.jsxs)("div",{className:"stat-item",children:[(0,Xt.jsx)("span",{className:"stat-value",children:"42"}),(0,Xt.jsx)("span",{className:"stat-label",children:"Patients Today"})]}),(0,Xt.jsxs)("div",{className:"stat-item",children:[(0,Xt.jsx)("span",{className:"stat-value",children:"15"}),(0,Xt.jsx)("span",{className:"stat-label",children:"In Queue"})]})]})]})]})})]})})]})})},An=e=>{var t,n,a,s,i,o,l,c,d,u,h,m;let{settings:p,onSettingsChange:f,setHasUnsavedChanges:g}=e;const[v,y]=(0,r.useState)("templates"),x=(e,t)=>{f(n=>on(on({},n),{},{themes:on(on({},n.themes),{},{[e]:t})})),g(!0)};return(0,Xt.jsxs)("div",{className:"settings-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h2",{children:"Theme Settings"}),(0,Xt.jsx)("p",{children:"Customize the visual appearance of your system"})]}),(0,Xt.jsxs)("div",{className:"theme-tabs",children:[(0,Xt.jsxs)("button",{className:"theme-tab ".concat("templates"===v?"active":""),onClick:()=>y("templates"),children:[(0,Xt.jsx)("i",{className:"fas fa-palette"}),"Theme Templates"]}),(0,Xt.jsxs)("button",{className:"theme-tab ".concat("custom"===v?"active":""),onClick:()=>y("custom"),children:[(0,Xt.jsx)("i",{className:"fas fa-sliders-h"}),"Customize"]})]}),"templates"===v&&(0,Xt.jsxs)("div",{className:"templates-section",children:[(0,Xt.jsxs)("div",{className:"section-subheader",children:[(0,Xt.jsx)("h3",{children:"Predefined Themes"}),(0,Xt.jsx)("p",{children:"Choose from professionally designed theme templates"})]}),(0,Xt.jsx)("div",{className:"templates-grid",children:Object.entries({modern:{name:"Modern Blue",primaryColor:"#2980b9",secondaryColor:"#2c3e50",backgroundColor:"#ecf0f1",accentColor:"#e74c3c",fontFamily:"Segoe UI",description:"Clean and professional blue theme"},healthcare:{name:"Healthcare Green",primaryColor:"#27ae60",secondaryColor:"#2c3e50",backgroundColor:"#f8f9fa",accentColor:"#e67e22",fontFamily:"Arial",description:"Calming green theme for healthcare environment"},corporate:{name:"Corporate Dark",primaryColor:"#34495e",secondaryColor:"#2c3e50",backgroundColor:"#f5f6fa",accentColor:"#9b59b6",fontFamily:"Inter",description:"Professional dark theme for corporate settings"},emergency:{name:"Emergency Red",primaryColor:"#c0392b",secondaryColor:"#7f8c8d",backgroundColor:"#fdf2f2",accentColor:"#e74c3c",fontFamily:"Roboto",description:"High visibility theme for emergency departments"},soothing:{name:"Soothing Purple",primaryColor:"#8e44ad",secondaryColor:"#34495e",backgroundColor:"#f8f9fa",accentColor:"#3498db",fontFamily:"Open Sans",description:"Calming purple theme for patient comfort"},classic:{name:"Classic Hospital",primaryColor:"#1a5276",secondaryColor:"#566573",backgroundColor:"#f4f6f6",accentColor:"#dc7633",fontFamily:"Helvetica",description:"Traditional hospital color scheme"}}).map(e=>{let[t,n]=e;return(0,Xt.jsxs)("div",{className:"template-card",onClick:()=>(e=>{f(t=>on(on({},t),{},{themes:on(on({},t.themes),e)})),g(!0)})(n),children:[(0,Xt.jsx)("div",{className:"template-preview",style:{background:"linear-gradient(135deg, ".concat(n.primaryColor," 0%, ").concat(n.secondaryColor," 100%)")},children:(0,Xt.jsxs)("div",{className:"template-colors",children:[(0,Xt.jsx)("div",{className:"color-swatch primary",style:{backgroundColor:n.primaryColor}}),(0,Xt.jsx)("div",{className:"color-swatch secondary",style:{backgroundColor:n.secondaryColor}}),(0,Xt.jsx)("div",{className:"color-swatch accent",style:{backgroundColor:n.accentColor}})]})}),(0,Xt.jsxs)("div",{className:"template-info",children:[(0,Xt.jsx)("h4",{children:n.name}),(0,Xt.jsx)("p",{children:n.description}),(0,Xt.jsxs)("div",{className:"template-font",children:[(0,Xt.jsx)("i",{className:"fas fa-font"}),n.fontFamily]})]}),(0,Xt.jsxs)("button",{className:"apply-template-btn",children:[(0,Xt.jsx)("i",{className:"fas fa-check"}),"Apply Theme"]})]},t)})}),(0,Xt.jsx)("div",{className:"template-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-outline",onClick:()=>{f(e=>on(on({},e),{},{themes:{primaryColor:"#2980b9",secondaryColor:"#2c3e50",backgroundColor:"#ecf0f1",accentColor:"#e74c3c",fontFamily:"Segoe UI",fontSize:"medium",borderRadius:"medium",shadowIntensity:"medium"}})),g(!0)},children:[(0,Xt.jsx)("i",{className:"fas fa-undo"}),"Reset to Default"]})})]}),"custom"===v&&(0,Xt.jsxs)("div",{className:"customize-section",children:[(0,Xt.jsxs)("div",{className:"section-subheader",children:[(0,Xt.jsx)("h3",{children:"Custom Theme Settings"}),(0,Xt.jsx)("p",{children:"Fine-tune your theme with custom colors and fonts"})]}),(0,Xt.jsxs)("div",{className:"settings-grid",children:[(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-paint-brush"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Primary Color"}),(0,Xt.jsxs)("div",{className:"color-input-group",children:[(0,Xt.jsx)("input",{type:"color",className:"color-picker",value:(null===(t=p.themes)||void 0===t?void 0:t.primaryColor)||"#2980b9",onChange:e=>x("primaryColor",e.target.value)}),(0,Xt.jsx)("input",{type:"text",className:"color-input",value:(null===(n=p.themes)||void 0===n?void 0:n.primaryColor)||"#2980b9",onChange:e=>x("primaryColor",e.target.value),placeholder:"#2980b9"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Main brand color for buttons and headers"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-fill-drip"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Secondary Color"}),(0,Xt.jsxs)("div",{className:"color-input-group",children:[(0,Xt.jsx)("input",{type:"color",className:"color-picker",value:(null===(a=p.themes)||void 0===a?void 0:a.secondaryColor)||"#2c3e50",onChange:e=>x("secondaryColor",e.target.value)}),(0,Xt.jsx)("input",{type:"text",className:"color-input",value:(null===(s=p.themes)||void 0===s?void 0:s.secondaryColor)||"#2c3e50",onChange:e=>x("secondaryColor",e.target.value),placeholder:"#2c3e50"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Secondary color for backgrounds and borders"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-square"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Background Color"}),(0,Xt.jsxs)("div",{className:"color-input-group",children:[(0,Xt.jsx)("input",{type:"color",className:"color-picker",value:(null===(i=p.themes)||void 0===i?void 0:i.backgroundColor)||"#ecf0f1",onChange:e=>x("backgroundColor",e.target.value)}),(0,Xt.jsx)("input",{type:"text",className:"color-input",value:(null===(o=p.themes)||void 0===o?void 0:o.backgroundColor)||"#ecf0f1",onChange:e=>x("backgroundColor",e.target.value),placeholder:"#ecf0f1"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Background color for screens and panels"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-star"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Accent Color"}),(0,Xt.jsxs)("div",{className:"color-input-group",children:[(0,Xt.jsx)("input",{type:"color",className:"color-picker",value:(null===(l=p.themes)||void 0===l?void 0:l.accentColor)||"#e74c3c",onChange:e=>x("accentColor",e.target.value)}),(0,Xt.jsx)("input",{type:"text",className:"color-input",value:(null===(c=p.themes)||void 0===c?void 0:c.accentColor)||"#e74c3c",onChange:e=>x("accentColor",e.target.value),placeholder:"#e74c3c"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Accent color for highlights and important elements"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-font"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Font Family"}),(0,Xt.jsxs)("select",{className:"setting-select",value:(null===(d=p.themes)||void 0===d?void 0:d.fontFamily)||"Segoe UI",onChange:e=>x("fontFamily",e.target.value),children:[(0,Xt.jsx)("option",{value:"Segoe UI",children:"Segoe UI"}),(0,Xt.jsx)("option",{value:"Arial",children:"Arial"}),(0,Xt.jsx)("option",{value:"Helvetica",children:"Helvetica"}),(0,Xt.jsx)("option",{value:"Inter",children:"Inter"}),(0,Xt.jsx)("option",{value:"Roboto",children:"Roboto"}),(0,Xt.jsx)("option",{value:"Open Sans",children:"Open Sans"}),(0,Xt.jsx)("option",{value:"Montserrat",children:"Montserrat"}),(0,Xt.jsx)("option",{value:"Lato",children:"Lato"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Font family for all text in the system"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-text-height"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Base Font Size"}),(0,Xt.jsxs)("select",{className:"setting-select",value:(null===(u=p.themes)||void 0===u?void 0:u.fontSize)||"medium",onChange:e=>x("fontSize",e.target.value),children:[(0,Xt.jsx)("option",{value:"small",children:"Small"}),(0,Xt.jsx)("option",{value:"medium",children:"Medium"}),(0,Xt.jsx)("option",{value:"large",children:"Large"}),(0,Xt.jsx)("option",{value:"xlarge",children:"Extra Large"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Base font size for all text elements"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-border-style"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Border Radius"}),(0,Xt.jsxs)("select",{className:"setting-select",value:(null===(h=p.themes)||void 0===h?void 0:h.borderRadius)||"medium",onChange:e=>x("borderRadius",e.target.value),children:[(0,Xt.jsx)("option",{value:"none",children:"None"}),(0,Xt.jsx)("option",{value:"small",children:"Small"}),(0,Xt.jsx)("option",{value:"medium",children:"Medium"}),(0,Xt.jsx)("option",{value:"large",children:"Large"}),(0,Xt.jsx)("option",{value:"full",children:"Full Rounded"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Border radius for buttons and cards"})]})]}),(0,Xt.jsxs)("div",{className:"setting-card",children:[(0,Xt.jsx)("div",{className:"setting-icon",children:(0,Xt.jsx)("i",{className:"fas fa-box-shadow"})}),(0,Xt.jsxs)("div",{className:"setting-content",children:[(0,Xt.jsx)("label",{className:"setting-label",children:"Shadow Intensity"}),(0,Xt.jsxs)("select",{className:"setting-select",value:(null===(m=p.themes)||void 0===m?void 0:m.shadowIntensity)||"medium",onChange:e=>x("shadowIntensity",e.target.value),children:[(0,Xt.jsx)("option",{value:"none",children:"None"}),(0,Xt.jsx)("option",{value:"subtle",children:"Subtle"}),(0,Xt.jsx)("option",{value:"medium",children:"Medium"}),(0,Xt.jsx)("option",{value:"strong",children:"Strong"})]}),(0,Xt.jsx)("div",{className:"setting-description",children:"Shadow intensity for cards and containers"})]})]})]})]}),(0,Xt.jsxs)("div",{className:"theme-preview-section",children:[(0,Xt.jsxs)("div",{className:"section-subheader",children:[(0,Xt.jsx)("h3",{children:"Theme Preview"}),(0,Xt.jsx)("p",{children:"See how your theme will look across different screens"})]}),(0,Xt.jsx)(_n,{settings:p})]})]})},Pn=e=>{let{settings:t,onSettingsChange:n,setHasUnsavedChanges:a,setMessage:s}=e;const[i,o]=(0,r.useState)(null),l=(e,s,r)=>{const i=[...t.advertisements];i[e]=on(on({},i[e]),{},{[s]:r}),n(e=>on(on({},e),{},{advertisements:i})),a(!0)};return(0,Xt.jsxs)("div",{className:"settings-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsxs)("div",{className:"header-content",children:[(0,Xt.jsx)("h2",{children:"Advertisement Management"}),(0,Xt.jsx)("p",{children:"Manage messages displayed on waiting area screens"})]}),(0,Xt.jsx)("div",{className:"header-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>{if(t.advertisements.length>=10)return s("Maximum 10 advertisements allowed"),void setTimeout(()=>s(""),3e3);n(e=>on(on({},e),{},{advertisements:[...e.advertisements,{text:"New Advertisement - Edit this text",duration:30,active:!0,type:"text"}]})),a(!0)},disabled:t.advertisements.length>=10,children:[(0,Xt.jsx)("i",{className:"fas fa-plus"})," Add Advertisement"]})})]}),(0,Xt.jsx)("div",{className:"advertisements-grid",children:t.advertisements.map((e,r)=>(0,Xt.jsxs)("div",{className:"advertisement-card",children:[(0,Xt.jsxs)("div",{className:"card-header",children:[(0,Xt.jsxs)("div",{className:"card-title",children:[(0,Xt.jsxs)("span",{className:"ad-number",children:["Advertisement ",r+1]}),(0,Xt.jsx)("span",{className:"status-badge ".concat(e.active?"active":"inactive"),children:e.active?"Active":"Inactive"})]}),(0,Xt.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(e=>{if(t.advertisements.length<=1)return s("You must have at least one advertisement"),void setTimeout(()=>s(""),3e3);const r=t.advertisements.filter((t,n)=>n!==e);n(e=>on(on({},e),{},{advertisements:r})),a(!0)})(r),disabled:1===t.advertisements.length,children:(0,Xt.jsx)("i",{className:"fas fa-trash"})})]}),(0,Xt.jsxs)("div",{className:"card-content",children:[(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Advertisement Text"}),(0,Xt.jsx)("textarea",{className:"form-textarea",value:e.text,onChange:e=>l(r,"text",e.target.value),placeholder:"Enter advertisement text",rows:"3"})]}),(0,Xt.jsxs)("div",{className:"form-row",children:[(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Display Duration"}),(0,Xt.jsxs)("div",{className:"input-with-unit",children:[(0,Xt.jsx)("input",{type:"number",className:"form-input",value:e.duration,onChange:e=>l(r,"duration",parseInt(e.target.value)||30),min:"10",max:"120"}),(0,Xt.jsx)("span",{className:"input-unit",children:"seconds"})]})]}),(0,Xt.jsx)("div",{className:"form-group",children:(0,Xt.jsxs)("label",{className:"toggle-label",children:[(0,Xt.jsx)("span",{children:"Active"}),(0,Xt.jsxs)("label",{className:"toggle-switch small",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:e.active,onChange:e=>l(r,"active",e.target.checked)}),(0,Xt.jsx)("span",{className:"toggle-slider"})]})]})})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Video Advertisement"}),(0,Xt.jsxs)("div",{className:"video-upload-section",children:[e.video&&(0,Xt.jsx)("div",{className:"video-preview",children:(0,Xt.jsxs)("video",{controls:!0,children:[(0,Xt.jsx)("source",{src:e.video,type:"video/mp4"}),"Your browser does not support the video tag."]})}),(0,Xt.jsxs)("label",{className:"btn btn-outline btn-sm",children:[(0,Xt.jsx)("i",{className:"fas fa-upload"})," Upload Video",(0,Xt.jsx)("input",{type:"file",accept:"video/*",onChange:e=>(async(e,r)=>{const i=e.target.files[0];if(i){if(!i.type.startsWith("video/"))return s("Please select a valid video file"),void setTimeout(()=>s(""),3e3);try{o(r),s("");const l=new FormData;l.append("video",i);const c=await un.uploadVideo(l),d=[...t.advertisements];d[r]=on(on({},d[r]),{},{video:c.videoUrl,type:"video"}),n(e=>on(on({},e),{},{advertisements:d})),a(!0),s("Video uploaded successfully!"),setTimeout(()=>s(""),3e3),e.target.value=""}catch(l){console.error("Error uploading video:",l),s("Error uploading video: "+l.message),setTimeout(()=>s(""),3e3)}finally{o(null)}}})(e,r),style:{display:"none"},disabled:i===r})]}),i===r&&(0,Xt.jsxs)("div",{className:"upload-status",children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Uploading..."]})]})]})]})]},r))}),t.advertisements.length>=10&&(0,Xt.jsxs)("div",{className:"limit-message",children:[(0,Xt.jsx)("i",{className:"fas fa-info-circle"}),"Maximum of 10 advertisements reached"]})]})},Dn=e=>{let{settings:t,onSettingsChange:n,setMessage:a,onShowDeleteConfirm:s}=e;const[i,o]=(0,r.useState)(!1);return(0,Xt.jsxs)("div",{className:"settings-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h2",{children:"System Maintenance"}),(0,Xt.jsx)("p",{children:"Manage system data and perform maintenance operations"})]}),(0,Xt.jsxs)("div",{className:"maintenance-grid",children:[(0,Xt.jsxs)("div",{className:"maintenance-card",children:[(0,Xt.jsx)("div",{className:"card-icon primary",children:(0,Xt.jsx)("i",{className:"fas fa-download"})}),(0,Xt.jsxs)("div",{className:"card-content",children:[(0,Xt.jsx)("h3",{children:"Backup & Restore"}),(0,Xt.jsx)("p",{children:"Export and import system settings"}),(0,Xt.jsxs)("div",{className:"card-actions",children:[(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>{if(!t)return;const e=JSON.stringify(t,null,2),n=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(n),r=document.createElement("a");r.href=s,r.download="hospital-settings-backup-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),a("Settings exported successfully!"),setTimeout(()=>a(""),3e3)},disabled:i,children:[(0,Xt.jsx)("i",{className:"fas fa-file-export"})," Export Settings"]}),(0,Xt.jsxs)("label",{className:"btn btn-outline",children:[(0,Xt.jsx)("i",{className:"fas fa-file-import"})," Import Settings",(0,Xt.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=async t=>{try{const s=JSON.parse(t.target.result);if(!s.hospitalName||!s.language)throw new Error("Invalid settings file format");o(!0);const r=await un.updateSettings(s);n(r),a("Settings imported successfully!"),setTimeout(()=>a(""),3e3),e.target.value=""}catch(s){console.error("Error importing settings:",s),a("Error importing settings: Invalid file format"),setTimeout(()=>a(""),3e3)}finally{o(!1)}},s.onerror=()=>{a("Error reading file"),setTimeout(()=>a(""),3e3)},s.readAsText(t)},style:{display:"none"},disabled:i})]})]})]})]}),(0,Xt.jsxs)("div",{className:"maintenance-card",children:[(0,Xt.jsx)("div",{className:"card-icon warning",children:(0,Xt.jsx)("i",{className:"fas fa-undo"})}),(0,Xt.jsxs)("div",{className:"card-content",children:[(0,Xt.jsx)("h3",{children:"System Reset"}),(0,Xt.jsx)("p",{children:"Restore all settings to factory defaults"}),(0,Xt.jsx)("div",{className:"card-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-warning",onClick:async()=>{if(window.confirm("Are you sure you want to reset all settings to defaults? This cannot be undone."))try{o(!0);const e={hospitalName:"Razi Hospital",hospitalLogo:"",language:"en",autoCall:!0,soundNotifications:!0,displayAnnouncements:!0,maxWaitTime:30,priorityRules:"emergency,priority,senior,child,normal",themes:{primaryColor:"#2980b9",secondaryColor:"#2c3e50",backgroundColor:"#ecf0f1",fontFamily:"Segoe UI"},advertisements:[{text:"Quality Healthcare Services - Welcome to Razi Hospital",duration:30,active:!0,type:"text"}],waitingScreen:{backgroundColor:"#1a5276",textColor:"#ffffff",showAds:!0,customMessage:"",backgroundImage:""},dispenserSettings:{backgroundColor:"#ffffff",textColor:"#000000",autoPrint:!0,welcomeMessage:"Welcome to Razi Hospital",backgroundImage:""},counterScreen:{backgroundColor:"#f8f9fa",textColor:"#333333"}},t=await un.updateSettings(e);n(t),a("Settings reset to defaults successfully!"),setTimeout(()=>a(""),3e3)}catch(e){console.error("Error resetting settings:",e),a("Error resetting settings: "+(e.message||"Unknown error"))}finally{o(!1)}},disabled:i,children:[(0,Xt.jsx)("i",{className:"fas fa-undo"})," Reset to Defaults"]})})]})]}),(0,Xt.jsxs)("div",{className:"maintenance-card danger",children:[(0,Xt.jsx)("div",{className:"card-icon danger",children:(0,Xt.jsx)("i",{className:"fas fa-trash"})}),(0,Xt.jsxs)("div",{className:"card-content",children:[(0,Xt.jsx)("h3",{children:"Danger Zone"}),(0,Xt.jsx)("p",{children:"Permanently delete all system data"}),(0,Xt.jsx)("div",{className:"card-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-danger",onClick:s,disabled:i,children:[(0,Xt.jsx)("i",{className:"fas fa-trash"})," Delete All Data"]})})]})]})]}),(0,Xt.jsxs)("div",{className:"system-info-section",children:[(0,Xt.jsx)("h3",{children:"System Information"}),(0,Xt.jsxs)("div",{className:"info-grid",children:[(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("span",{className:"info-label",children:"Version"}),(0,Xt.jsx)("span",{className:"info-value",children:"1.0.0"})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("span",{className:"info-label",children:"Last Backup"}),(0,Xt.jsx)("span",{className:"info-value",children:(new Date).toLocaleDateString()})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("span",{className:"info-label",children:"Settings Updated"}),(0,Xt.jsx)("span",{className:"info-value",children:new Date(t.updatedAt||new Date).toLocaleString()})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("span",{className:"info-label",children:"Total Advertisements"}),(0,Xt.jsx)("span",{className:"info-value",children:t.advertisements.length})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("span",{className:"info-label",children:"Current Language"}),(0,Xt.jsxs)("span",{className:"info-value",children:["en"===t.language&&"English","ar"===t.language&&"Arabic","ur"===t.language&&"Urdu","fr"===t.language&&"French","es"===t.language&&"Spanish"]})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("span",{className:"info-label",children:"Hospital Name"}),(0,Xt.jsx)("span",{className:"info-value",children:t.hospitalName})]})]})]})]})},Ln=()=>{const{settings:e,updateSettings:t,refreshSettings:n}=mn(),[a,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)("general"),[h,m]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&s(JSON.parse(JSON.stringify(e)))},[e]);const g=(e,t)=>{s(n=>{if(e.includes(".")){const a=e.split(".");return on(on({},n),{},{[a[0]]:on(on({},n[a[0]]),{},{[a[1]]:t})})}return on(on({},n),{},{[e]:t})}),f(!0)};if(!a)return(0,Xt.jsx)("div",{className:"system-settings loading",children:(0,Xt.jsxs)("div",{className:"loading-state",children:[(0,Xt.jsx)("div",{className:"loading-spinner",children:(0,Xt.jsx)("div",{className:"spinner"})}),(0,Xt.jsx)("div",{className:"loading-text",children:"Loading Settings..."})]})});return(0,Xt.jsxs)("div",{className:"system-settings",children:[h&&(0,Xt.jsx)(Cn,{onClose:()=>m(!1),onConfirm:async()=>{try{o(!0),await un.deleteAllData(),c("All data deleted successfully! System will reload..."),m(!1),setTimeout(()=>window.location.reload(),2e3)}catch(e){console.error("Error deleting data:",e),c("Error deleting data: "+(e.message||"Unknown error"))}finally{o(!1)}},saving:i}),(0,Xt.jsx)(wn,{hasUnsavedChanges:p,onRefresh:async()=>{try{await n(),f(!1),c("Settings refreshed successfully!"),setTimeout(()=>c(""),3e3)}catch(e){c("Error refreshing settings"),setTimeout(()=>c(""),3e3)}},message:l}),(0,Xt.jsx)(kn,{activeTab:d,onTabChange:u}),(0,Xt.jsx)("div",{className:"settings-content",children:(()=>{const e={settings:a,onInputChange:g,setHasUnsavedChanges:f,setMessage:c,onSettingsChange:s};switch(d){case"general":default:return(0,Xt.jsx)(En,on({},e));case"queue":return(0,Xt.jsx)(Tn,on({},e));case"theme":return(0,Xt.jsx)(An,on({},e));case"ads":return(0,Xt.jsx)(Pn,on({},e));case"maintenance":return(0,Xt.jsx)(Dn,on(on({},e),{},{onShowDeleteConfirm:()=>m(!0)}))}})()}),(0,Xt.jsx)(Sn,{saving:i,hasUnsavedChanges:p,onSave:async()=>{if(a)try{o(!0),c("Saving settings...");const e=await t(a);s(e),f(!1),c("Settings saved successfully!"),setTimeout(()=>c(""),3e3),await n()}catch(e){console.error("Error saving settings:",e),c("Error saving settings: "+(e.message||"Unknown error"))}finally{o(!1)}},onDiscard:()=>{s(JSON.parse(JSON.stringify(e))),f(!1),c("Changes discarded"),setTimeout(()=>c(""),3e3)}})]})},Rn=e=>{if(!e)return"#2ecc71";switch(e.toLowerCase()){case"emergency":return"#e74c3c";case"priority":return"#f39c12";case"senior":return"#9b59b6";case"child":return"#3498db";default:return"#2ecc71"}},On=(e,t)=>{if(!t||0===t.length)return 0;let n=0;for(let s=0;s<e;s++){var a;n+=(null===(a=t[s])||void 0===a?void 0:a.percentage)||0}return n/100*360},In=(e,t,n)=>{if(!n||0===n.length)return"circle(50% at 50% 50%)";let a=0;for(let u=0;u<t;u++){var s;a+=(null===(s=n[u])||void 0===s?void 0:s.percentage)||0}const r=a+(e||0);if(100===e)return"circle(50% at 50% 50%)";const i=50+50*Math.cos((3.6*a-90)*(Math.PI/180)),o=50+50*Math.sin((3.6*a-90)*(Math.PI/180)),l=50+50*Math.cos((3.6*r-90)*(Math.PI/180)),c=50+50*Math.sin((3.6*r-90)*(Math.PI/180)),d=e>50?1:0;return"path('M 50 50 L ".concat(i," ").concat(o," A 50 50 0 ").concat(d," 1 ").concat(l," ").concat(c," Z')")},Un=()=>{var e,t,n,a,s;const[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)({startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],department:"all",reportType:"daily"}),[h,m]=(0,r.useState)([]),[p,f]=(0,r.useState)(null),[g,v]=(0,r.useState)("hourly");(0,r.useEffect)(()=>{y(),x()},[]);const y=async()=>{try{const e=await vn.getDepartments();m(e)}catch(p){console.error("Error loading departments:",p),m([])}},x=async()=>{try{c(!0),f(null);const e=await vn.generateReport(d);o(e)}catch(p){console.error("Error generating report:",p),f("Failed to generate report. Using sample data."),o(b())}finally{c(!1)}},b=()=>({summary:{totalPatients:156,servedPatients:142,averageWaitTime:18,averageServiceTime:12,efficiency:91},departmentStats:[{name:"General OPD",served:45,avgWait:15,efficiency:92},{name:"Cardiology",served:28,avgWait:25,efficiency:85},{name:"Orthopedics",served:32,avgWait:20,efficiency:88},{name:"Pediatrics",served:22,avgWait:10,efficiency:95},{name:"Dental Care",served:15,avgWait:30,efficiency:78}],hourlyDistribution:Array.from({length:24},(e,t)=>({hour:t,count:Math.floor(20*Math.random())+5})),priorityBreakdown:[{priority:"Normal",count:120,percentage:77},{priority:"Priority",count:20,percentage:13},{priority:"Emergency",count:10,percentage:6},{priority:"Senior",count:4,percentage:3},{priority:"Child",count:2,percentage:1}]}),N=()=>i||b(),j=e=>{var t,n,a,s,r;const i=e||b();return[["Metric","Value"],...[["Total Patients",(null===(t=i.summary)||void 0===t?void 0:t.totalPatients)||0],["Served Patients",(null===(n=i.summary)||void 0===n?void 0:n.servedPatients)||0],["Average Wait Time",(null===(a=i.summary)||void 0===a?void 0:a.averageWaitTime)||0],["Average Service Time",(null===(s=i.summary)||void 0===s?void 0:s.averageServiceTime)||0],["Efficiency",(null===(r=i.summary)||void 0===r?void 0:r.efficiency)||0]]].map(e=>e.join(",")).join("\n")},w=N();return(0,Xt.jsxs)("div",{className:"reports-tab",children:[(0,Xt.jsxs)("div",{className:"reports-header",children:[(0,Xt.jsxs)("div",{className:"header-content",children:[(0,Xt.jsxs)("div",{className:"header-title-section",children:[(0,Xt.jsx)("h1",{className:"page-title",children:"Reports & Analytics"}),(0,Xt.jsx)("p",{className:"page-subtitle",children:"Comprehensive insights into hospital operations and patient flow"})]}),(0,Xt.jsx)("div",{className:"header-info",children:(0,Xt.jsxs)("div",{className:"report-period",children:[(0,Xt.jsx)("i",{className:"fas fa-calendar"}),d.startDate," to ",d.endDate]})})]}),p&&(0,Xt.jsxs)("div",{className:"alert alert-warning",children:[(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,Xt.jsx)("span",{children:p})]})]}),(0,Xt.jsxs)("div",{className:"filter-section",children:[(0,Xt.jsxs)("div",{className:"filter-grid",children:[(0,Xt.jsxs)("div",{className:"filter-group",children:[(0,Xt.jsx)("label",{className:"filter-label",children:"Start Date"}),(0,Xt.jsx)("input",{type:"date",className:"filter-input",value:d.startDate,onChange:e=>u(t=>on(on({},t),{},{startDate:e.target.value}))})]}),(0,Xt.jsxs)("div",{className:"filter-group",children:[(0,Xt.jsx)("label",{className:"filter-label",children:"End Date"}),(0,Xt.jsx)("input",{type:"date",className:"filter-input",value:d.endDate,onChange:e=>u(t=>on(on({},t),{},{endDate:e.target.value}))})]}),(0,Xt.jsxs)("div",{className:"filter-group",children:[(0,Xt.jsx)("label",{className:"filter-label",children:"Department"}),(0,Xt.jsxs)("select",{className:"filter-select",value:d.department,onChange:e=>u(t=>on(on({},t),{},{department:e.target.value})),children:[(0,Xt.jsx)("option",{value:"all",children:"All Departments"}),h.map(e=>(0,Xt.jsx)("option",{value:e._id,children:e.name},e._id))]})]}),(0,Xt.jsxs)("div",{className:"filter-group",children:[(0,Xt.jsx)("label",{className:"filter-label",children:"Report Type"}),(0,Xt.jsxs)("select",{className:"filter-select",value:d.reportType,onChange:e=>u(t=>on(on({},t),{},{reportType:e.target.value})),children:[(0,Xt.jsx)("option",{value:"daily",children:"Daily"}),(0,Xt.jsx)("option",{value:"weekly",children:"Weekly"}),(0,Xt.jsx)("option",{value:"monthly",children:"Monthly"})]})]})]}),(0,Xt.jsx)("div",{className:"filter-actions",children:(0,Xt.jsx)("button",{className:"btn btn-primary",onClick:x,disabled:l,children:l?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Generating..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-chart-bar"})," Generate Report"]})})})]}),l?(0,Xt.jsxs)("div",{className:"loading-state",children:[(0,Xt.jsx)("div",{className:"loading-spinner",children:(0,Xt.jsx)("div",{className:"spinner"})}),(0,Xt.jsx)("div",{className:"loading-text",children:"Generating comprehensive report..."})]}):(0,Xt.jsxs)("div",{className:"reports-content",children:[(0,Xt.jsxs)("div",{className:"metrics-overview",children:[(0,Xt.jsxs)("div",{className:"metric-card",children:[(0,Xt.jsx)("div",{className:"metric-icon primary",children:(0,Xt.jsx)("i",{className:"fas fa-users"})}),(0,Xt.jsxs)("div",{className:"metric-content",children:[(0,Xt.jsx)("div",{className:"metric-value",children:(null===(e=w.summary)||void 0===e?void 0:e.totalPatients)||0}),(0,Xt.jsx)("div",{className:"metric-label",children:"Total Patients"}),(0,Xt.jsxs)("div",{className:"metric-trend positive",children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-up"}),"12% from last period"]})]})]}),(0,Xt.jsxs)("div",{className:"metric-card",children:[(0,Xt.jsx)("div",{className:"metric-icon success",children:(0,Xt.jsx)("i",{className:"fas fa-user-check"})}),(0,Xt.jsxs)("div",{className:"metric-content",children:[(0,Xt.jsx)("div",{className:"metric-value",children:(null===(t=w.summary)||void 0===t?void 0:t.servedPatients)||0}),(0,Xt.jsx)("div",{className:"metric-label",children:"Served Patients"}),(0,Xt.jsxs)("div",{className:"metric-trend positive",children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-up"}),"8% from last period"]})]})]}),(0,Xt.jsxs)("div",{className:"metric-card",children:[(0,Xt.jsx)("div",{className:"metric-icon warning",children:(0,Xt.jsx)("i",{className:"fas fa-clock"})}),(0,Xt.jsxs)("div",{className:"metric-content",children:[(0,Xt.jsxs)("div",{className:"metric-value",children:[(null===(n=w.summary)||void 0===n?void 0:n.averageWaitTime)||0,"m"]}),(0,Xt.jsx)("div",{className:"metric-label",children:"Avg Wait Time"}),(0,Xt.jsxs)("div",{className:"metric-trend negative",children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-down"}),"5% improvement"]})]})]}),(0,Xt.jsx)("div",{className:"metric-card",children:(0,Xt.jsxs)("div",{className:"metric-card",children:[(0,Xt.jsx)("div",{className:"metric-icon info",children:(0,Xt.jsx)("i",{className:"fas fa-chart-line"})}),(0,Xt.jsxs)("div",{className:"metric-content",children:[(0,Xt.jsxs)("div",{className:"metric-value",children:[(null===(a=w.summary)||void 0===a?void 0:a.efficiency)||0,"%"]}),(0,Xt.jsx)("div",{className:"metric-label",children:"Efficiency Rate"}),(0,Xt.jsxs)("div",{className:"metric-trend positive",children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-up"}),"3% improvement"]})]})]})})]}),(0,Xt.jsxs)("div",{className:"charts-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"Performance Analytics"}),(0,Xt.jsxs)("div",{className:"chart-controls",children:[(0,Xt.jsx)("button",{className:"chart-toggle ".concat("hourly"===g?"active":""),onClick:()=>v("hourly"),children:"Hourly Flow"}),(0,Xt.jsx)("button",{className:"chart-toggle ".concat("priority"===g?"active":""),onClick:()=>v("priority"),children:"Priority Distribution"})]})]}),(0,Xt.jsxs)("div",{className:"charts-grid",children:[(0,Xt.jsxs)("div",{className:"chart-container",children:[(0,Xt.jsxs)("div",{className:"chart-header",children:[(0,Xt.jsx)("h4",{children:"Patient Flow by Hour"}),(0,Xt.jsx)("div",{className:"chart-legend",children:(0,Xt.jsxs)("div",{className:"legend-item",children:[(0,Xt.jsx)("span",{className:"legend-color primary"}),"Patient Volume"]})})]}),(0,Xt.jsx)("div",{className:"bar-chart",children:(w.hourlyDistribution||Array.from({length:24},(e,t)=>({hour:t,count:0}))).map((e,t)=>(0,Xt.jsxs)("div",{className:"bar-group",children:[(0,Xt.jsx)("div",{className:"bar-wrapper",children:(0,Xt.jsx)("div",{className:"bar",style:{height:"".concat((e.count||0)/25*100,"%")},title:"".concat(e.count||0," patients at ").concat(e.hour,":00"),children:(0,Xt.jsx)("div",{className:"bar-value",children:e.count||0})})}),(0,Xt.jsxs)("div",{className:"bar-label",children:[e.hour,":00"]})]},t))})]}),(0,Xt.jsxs)("div",{className:"chart-container",children:[(0,Xt.jsxs)("div",{className:"chart-header",children:[(0,Xt.jsx)("h4",{children:"Priority Distribution"}),(0,Xt.jsx)("div",{className:"chart-legend",children:(w.priorityBreakdown||[]).map((e,t)=>(0,Xt.jsxs)("div",{className:"legend-item",children:[(0,Xt.jsx)("span",{className:"legend-color",style:{backgroundColor:Rn(e.priority)}}),e.priority]},t))})]}),(0,Xt.jsxs)("div",{className:"pie-chart-container",children:[(0,Xt.jsxs)("div",{className:"pie-chart",children:[(w.priorityBreakdown||[]).map((e,t)=>(0,Xt.jsx)("div",{className:"pie-segment-container",children:(0,Xt.jsx)("div",{className:"pie-segment",style:{backgroundColor:Rn(e.priority),transform:"rotate(".concat(On(t,w.priorityBreakdown||[]),"deg)"),clipPath:In(e.percentage||0,t,w.priorityBreakdown||[])}})},t)),(0,Xt.jsxs)("div",{className:"pie-center",children:[(0,Xt.jsx)("div",{className:"pie-total",children:(null===(s=w.priorityBreakdown)||void 0===s?void 0:s.reduce((e,t)=>e+(t.count||0),0))||0}),(0,Xt.jsx)("div",{className:"pie-label",children:"Total"})]})]}),(0,Xt.jsx)("div",{className:"pie-labels",children:(w.priorityBreakdown||[]).map((e,t)=>(0,Xt.jsxs)("div",{className:"pie-label-item",children:[(0,Xt.jsx)("span",{className:"label-color",style:{backgroundColor:Rn(e.priority)}}),(0,Xt.jsxs)("div",{className:"label-text",children:[(0,Xt.jsx)("span",{className:"label-name",children:e.priority}),(0,Xt.jsxs)("span",{className:"label-value",children:[e.percentage||0,"% (",e.count||0,")"]})]})]},t))})]})]})]})]}),(0,Xt.jsxs)("div",{className:"performance-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"Department Performance"}),(0,Xt.jsx)("div",{className:"section-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-outline",children:[(0,Xt.jsx)("i",{className:"fas fa-sort"})," Sort"]})})]}),(0,Xt.jsxs)("div",{className:"performance-table",children:[(0,Xt.jsxs)("div",{className:"table-header",children:[(0,Xt.jsx)("div",{className:"table-col department",children:"Department"}),(0,Xt.jsx)("div",{className:"table-col served",children:"Patients Served"}),(0,Xt.jsx)("div",{className:"table-col wait-time",children:"Avg Wait Time"}),(0,Xt.jsx)("div",{className:"table-col efficiency",children:"Efficiency"}),(0,Xt.jsx)("div",{className:"table-col trend",children:"Trend"})]}),(0,Xt.jsxs)("div",{className:"table-body",children:[(w.departmentStats||[]).map((e,t)=>(0,Xt.jsxs)("div",{className:"table-row",children:[(0,Xt.jsx)("div",{className:"table-col department",children:(0,Xt.jsxs)("div",{className:"dept-info",children:[(0,Xt.jsx)("div",{className:"dept-name",children:e.name||"Unknown Department"}),(0,Xt.jsx)("div",{className:"dept-type",children:"Medical Department"})]})}),(0,Xt.jsxs)("div",{className:"table-col served",children:[(0,Xt.jsx)("div",{className:"value-highlight",children:e.served||0}),(0,Xt.jsx)("div",{className:"value-subtext",children:"patients"})]}),(0,Xt.jsx)("div",{className:"table-col wait-time",children:(0,Xt.jsxs)("div",{className:"time-indicator ".concat((e.avgWait||0)>20?"high":"low"),children:[e.avgWait||0,"m"]})}),(0,Xt.jsx)("div",{className:"table-col efficiency",children:(0,Xt.jsxs)("div",{className:"efficiency-display",children:[(0,Xt.jsx)("div",{className:"efficiency-bar",children:(0,Xt.jsx)("div",{className:"efficiency-progress",style:{width:"".concat(e.efficiency||0,"%")},"data-efficiency":e.efficiency||0})}),(0,Xt.jsxs)("span",{className:"efficiency-value",children:[e.efficiency||0,"%"]})]})}),(0,Xt.jsx)("div",{className:"table-col trend",children:(0,Xt.jsx)("div",{className:"trend-indicator ".concat(t%3===0?"up":t%3===1?"down":"stable"),children:t%3===0?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-up"})," 5.2%"]}):t%3===1?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-down"})," 2.1%"]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-minus"})," 0.3%"]})})})]},t)),(!w.departmentStats||0===w.departmentStats.length)&&(0,Xt.jsxs)("div",{className:"empty-state",children:[(0,Xt.jsx)("i",{className:"fas fa-chart-bar"}),(0,Xt.jsx)("div",{children:"No department performance data available"})]})]})]})]}),(0,Xt.jsxs)("div",{className:"export-section",children:[(0,Xt.jsxs)("div",{className:"export-header",children:[(0,Xt.jsx)("h4",{children:"Export Report"}),(0,Xt.jsx)("p",{children:"Download your report in various formats for further analysis"})]}),(0,Xt.jsxs)("div",{className:"export-actions",children:[(0,Xt.jsxs)("button",{className:"btn btn-success",onClick:()=>{const e=N(),t=j(e),n=new Blob([t],{type:"text/csv"}),a=window.URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download="hospital-report-".concat(d.startDate,"-to-").concat(d.endDate,".csv"),s.click(),window.URL.revokeObjectURL(a)},children:[(0,Xt.jsx)("i",{className:"fas fa-file-csv"})," Export CSV"]}),(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>{alert("PDF export feature would be implemented here")},children:[(0,Xt.jsx)("i",{className:"fas fa-file-pdf"})," Export PDF"]}),(0,Xt.jsxs)("button",{className:"btn btn-outline",onClick:()=>{window.print()},children:[(0,Xt.jsx)("i",{className:"fas fa-print"})," Print Report"]})]})]})]})]})},Mn=e=>{let{user:t,onEdit:n,onDelete:a,getLoginUrl:s,getRoleDisplayName:r}=e;return(0,Xt.jsxs)("tr",{className:"user-row",children:[(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"user-info-cell",children:[(0,Xt.jsx)("div",{className:"user-avatar-small",children:t.username.charAt(0).toUpperCase()}),(0,Xt.jsxs)("div",{children:[(0,Xt.jsx)("div",{className:"username",children:t.username}),(0,Xt.jsx)("div",{className:"login-url",children:(0,Xt.jsxs)("a",{href:s(t),target:"_blank",rel:"noopener noreferrer",children:[(0,Xt.jsx)("i",{className:"fas fa-external-link-alt"})," Login URL"]})})]})]})}),(0,Xt.jsx)("td",{children:(0,Xt.jsx)("span",{className:"role-badge role-".concat(t.role),children:r(t.role)})}),(0,Xt.jsx)("td",{children:t.counter?"Counter ".concat(t.counter.counterNumber):"-"}),(0,Xt.jsx)("td",{children:t.department?t.department.name:"-"}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"permissions-list",children:[t.permissions.canGenerateTickets&&(0,Xt.jsx)("span",{className:"permission-tag",children:"Generate Tickets"}),t.permissions.canCallTokens&&(0,Xt.jsx)("span",{className:"permission-tag",children:"Call Tokens"}),t.permissions.canManageCounters&&(0,Xt.jsx)("span",{className:"permission-tag",children:"Manage Counters"}),t.permissions.canViewReports&&(0,Xt.jsx)("span",{className:"permission-tag",children:"View Reports"}),!Object.values(t.permissions).some(Boolean)&&(0,Xt.jsx)("span",{className:"no-permissions",children:"No permissions"})]})}),(0,Xt.jsx)("td",{children:t.lastLogin?new Date(t.lastLogin).toLocaleDateString():"Never"}),(0,Xt.jsx)("td",{children:(0,Xt.jsxs)("div",{className:"action-buttons",children:[(0,Xt.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>n(t),title:"Edit User",children:(0,Xt.jsx)("i",{className:"fas fa-edit"})}),(0,Xt.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>a(t._id),title:"Delete User",children:(0,Xt.jsx)("i",{className:"fas fa-trash"})})]})})]})},Fn=e=>{var t;let{counter:n,user:a,onCreateUser:s,onDeleteUser:r,onEditUser:i}=e;return(0,Xt.jsxs)("div",{className:"counter-user-card",children:[(0,Xt.jsxs)("div",{className:"counter-header",children:[(0,Xt.jsxs)("div",{className:"counter-number",children:["Counter ",n.counterNumber]}),(0,Xt.jsx)("div",{className:"counter-department",children:(null===(t=n.department)||void 0===t?void 0:t.name)||"General"}),(0,Xt.jsxs)("div",{className:"counter-status ".concat(n.status),children:[(0,Xt.jsx)("i",{className:"fas ".concat(Bn(n.status))}),n.status]})]}),a?(0,Xt.jsxs)("div",{className:"user-assigned",children:[(0,Xt.jsxs)("div",{className:"assigned-user-info",children:[(0,Xt.jsx)("div",{className:"username",children:a.username}),(0,Xt.jsx)("div",{className:"user-role",children:"Counter Staff"})]}),(0,Xt.jsxs)("div",{className:"user-actions",children:[(0,Xt.jsx)("button",{className:"btn btn-outline btn-sm",onClick:()=>i(a),title:"Edit User",children:(0,Xt.jsx)("i",{className:"fas fa-edit"})}),(0,Xt.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>r(a._id),title:"Delete User",children:(0,Xt.jsx)("i",{className:"fas fa-trash"})})]})]}):(0,Xt.jsxs)("div",{className:"no-user",children:[(0,Xt.jsxs)("div",{className:"no-user-message",children:[(0,Xt.jsx)("i",{className:"fas fa-user-slash"}),(0,Xt.jsx)("span",{children:"No user assigned"})]}),(0,Xt.jsxs)("button",{className:"btn btn-primary btn-sm",onClick:()=>s(n._id),children:[(0,Xt.jsx)("i",{className:"fas fa-user-plus"})," Auto Create User"]})]})]})},zn=e=>{let{formData:t,setFormData:n,showPassword:a,setShowPassword:s,editingUser:r,onSubmit:i,onClose:o,counters:l,departments:c}=e;return(0,Xt.jsx)("div",{className:"modal-overlay",children:(0,Xt.jsxs)("div",{className:"modal-content",children:[(0,Xt.jsxs)("div",{className:"modal-header",children:[(0,Xt.jsx)("h4",{children:r?"Edit User":"Create New User"}),(0,Xt.jsx)("button",{className:"btn-close",onClick:o,children:(0,Xt.jsx)("i",{className:"fas fa-times"})})]}),(0,Xt.jsxs)("div",{className:"modal-body",children:[(0,Xt.jsxs)("div",{className:"form-grid",children:[(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Username *"}),(0,Xt.jsx)("input",{type:"text",value:t.username,onChange:e=>n(t=>on(on({},t),{},{username:e.target.value})),placeholder:"Enter username",required:!0})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsxs)("label",{children:["Password ",r?"(leave blank to keep current)":"*"]}),(0,Xt.jsxs)("div",{className:"password-input-container",children:[(0,Xt.jsx)("input",{type:a?"text":"password",value:t.password,onChange:e=>n(t=>on(on({},t),{},{password:e.target.value})),placeholder:r?"Enter new password":"Enter password",required:!r}),(0,Xt.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>s(!a),children:(0,Xt.jsx)("i",{className:"fas ".concat(a?"fa-eye-slash":"fa-eye")})})]})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Role *"}),(0,Xt.jsxs)("select",{value:t.role,onChange:e=>n(t=>on(on({},t),{},{role:e.target.value})),children:[(0,Xt.jsx)("option",{value:"operator",children:"Operator"}),(0,Xt.jsx)("option",{value:"dispenser",children:"Ticket Dispenser"}),(0,Xt.jsx)("option",{value:"display",children:"Display Screen"}),(0,Xt.jsx)("option",{value:"counter",children:"Counter Staff"}),(0,Xt.jsx)("option",{value:"admin",children:"Administrator"})]})]}),"counter"===t.role&&(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Assign to Counter *"}),(0,Xt.jsxs)("select",{value:t.counterId,onChange:e=>n(t=>on(on({},t),{},{counterId:e.target.value})),required:!0,children:[(0,Xt.jsx)("option",{value:"",children:"Select Counter"}),l.map(e=>{var t;return(0,Xt.jsxs)("option",{value:e._id,children:["Counter ",e.counterNumber," - ",null===(t=e.department)||void 0===t?void 0:t.name]},e._id)})]})]}),(0,Xt.jsxs)("div",{className:"form-group",children:[(0,Xt.jsx)("label",{children:"Department"}),(0,Xt.jsxs)("select",{value:t.departmentId,onChange:e=>n(t=>on(on({},t),{},{departmentId:e.target.value})),children:[(0,Xt.jsx)("option",{value:"",children:"Select Department"}),c.map(e=>(0,Xt.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,Xt.jsxs)("div",{className:"permissions-section",children:[(0,Xt.jsx)("label",{children:"Permissions"}),(0,Xt.jsxs)("div",{className:"permissions-grid",children:[(0,Xt.jsxs)("label",{className:"permission-item",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.permissions.canGenerateTickets,onChange:e=>n(t=>on(on({},t),{},{permissions:on(on({},t.permissions),{},{canGenerateTickets:e.target.checked})}))}),(0,Xt.jsx)("span",{children:"Generate Tickets"})]}),(0,Xt.jsxs)("label",{className:"permission-item",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.permissions.canCallTokens,onChange:e=>n(t=>on(on({},t),{},{permissions:on(on({},t.permissions),{},{canCallTokens:e.target.checked})}))}),(0,Xt.jsx)("span",{children:"Call Tokens"})]}),(0,Xt.jsxs)("label",{className:"permission-item",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.permissions.canManageCounters,onChange:e=>n(t=>on(on({},t),{},{permissions:on(on({},t.permissions),{},{canManageCounters:e.target.checked})}))}),(0,Xt.jsx)("span",{children:"Manage Counters"})]}),(0,Xt.jsxs)("label",{className:"permission-item",children:[(0,Xt.jsx)("input",{type:"checkbox",checked:t.permissions.canViewReports,onChange:e=>n(t=>on(on({},t),{},{permissions:on(on({},t.permissions),{},{canViewReports:e.target.checked})}))}),(0,Xt.jsx)("span",{children:"View Reports"})]})]})]})]}),(0,Xt.jsxs)("div",{className:"modal-actions",children:[(0,Xt.jsxs)("button",{className:"btn btn-success",onClick:i,disabled:!t.username||!r&&!t.password||"counter"===t.role&&!t.counterId,children:[(0,Xt.jsx)("i",{className:"fas ".concat(r?"fa-save":"fa-user-plus")}),r?"Update User":"Create User"]}),(0,Xt.jsx)("button",{className:"btn btn-outline",onClick:o,children:"Cancel"})]})]})})},Bn=e=>({active:"fa-check-circle",busy:"fa-clock",break:"fa-coffee",offline:"fa-power-off"}[e]||"fa-question-circle"),qn=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)({username:"",password:"",role:"operator",counterId:"",departmentId:"",permissions:{canGenerateTickets:!1,canCallTokens:!1,canManageCounters:!1,canViewReports:!1}}),[m,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v(),y(),x()},[]);const v=async()=>{try{g(!0);const e=await xn.getUsers();e.success&&t(e.users)}catch(e){console.error("Error loading users:",e),alert("Error loading users: "+e.message)}finally{g(!1)}},y=async()=>{try{const e=await vn.getCounters();a(e)}catch(e){console.error("Error loading counters:",e)}},x=async()=>{try{const e=await vn.getDepartments();i(e)}catch(e){console.error("Error loading departments:",e)}},b=async e=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{(await xn.deleteUser(e)).success&&(v(),alert("User deleted successfully!"))}catch(t){console.error("Error deleting user:",t),alert("Error deleting user: "+t.message)}},N=e=>{var t,n;d(e),h({username:e.username,password:"",role:e.role,counterId:(null===(t=e.counter)||void 0===t?void 0:t._id)||"",departmentId:(null===(n=e.department)||void 0===n?void 0:n._id)||"",permissions:e.permissions||{canGenerateTickets:!1,canCallTokens:!1,canManageCounters:!1,canViewReports:!1}}),l(!0)},j=()=>{h({username:"",password:"",role:"operator",counterId:"",departmentId:"",permissions:{canGenerateTickets:!1,canCallTokens:!1,canManageCounters:!1,canViewReports:!1}}),d(null),p(!1)},w=async e=>{const t="counter".concat(e.slice(-4)),n=k();try{(await vn.createCounterUser(e,{username:t,password:n})).success&&(v(),alert("Counter user created successfully!\nUsername: ".concat(t,"\nPassword: ").concat(n)))}catch(a){console.error("Error creating counter user:",a),alert("Error creating counter user: "+a.message)}},k=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%";let t="";for(let n=0;n<12;n++)t+=e.charAt(Math.floor(67*Math.random()));return t},S=e=>{const t=window.location.origin;return"".concat(t).concat({admin:"/login/admin",dispenser:"/login/dispenser",display:"/login/display",counter:"/login/counter",operator:"/login/counter"}[e.role]||"/login/counter")},C=e=>({admin:"Administrator",operator:"Operator",dispenser:"Ticket Dispenser",display:"Display Screen",counter:"Counter Staff"}[e]||e);return(0,Xt.jsxs)("div",{className:"user-management",children:[(0,Xt.jsxs)("div",{className:"management-header",children:[(0,Xt.jsxs)("div",{className:"header-content",children:[(0,Xt.jsx)("h1",{children:"User Management"}),(0,Xt.jsx)("p",{children:"Manage system users and their access permissions"})]}),(0,Xt.jsxs)("button",{className:"btn btn-primary",onClick:()=>{j(),l(!0)},children:[(0,Xt.jsx)("i",{className:"fas fa-user-plus"})," Create New User"]})]}),(0,Xt.jsxs)("div",{className:"users-section",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"System Users"}),(0,Xt.jsx)("div",{className:"section-actions",children:(0,Xt.jsxs)("button",{className:"btn btn-outline btn-sm",onClick:v,disabled:f,children:[(0,Xt.jsx)("i",{className:"fas fa-sync"})," Refresh"]})})]}),f?(0,Xt.jsxs)("div",{className:"loading-state",children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"})," Loading users..."]}):(0,Xt.jsx)("div",{className:"users-table-container",children:(0,Xt.jsxs)("table",{className:"users-table",children:[(0,Xt.jsx)("thead",{children:(0,Xt.jsxs)("tr",{children:[(0,Xt.jsx)("th",{children:"Username"}),(0,Xt.jsx)("th",{children:"Role"}),(0,Xt.jsx)("th",{children:"Counter"}),(0,Xt.jsx)("th",{children:"Department"}),(0,Xt.jsx)("th",{children:"Permissions"}),(0,Xt.jsx)("th",{children:"Last Login"}),(0,Xt.jsx)("th",{children:"Actions"})]})}),(0,Xt.jsxs)("tbody",{children:[e.map(e=>(0,Xt.jsx)(Mn,{user:e,onEdit:N,onDelete:b,getLoginUrl:S,getRoleDisplayName:C},e._id)),0===e.length&&(0,Xt.jsx)("tr",{children:(0,Xt.jsxs)("td",{colSpan:"7",className:"no-data",children:[(0,Xt.jsx)("i",{className:"fas fa-users"}),(0,Xt.jsx)("span",{children:"No users found"})]})})]})]})})]}),(0,Xt.jsxs)("div",{className:"counter-users-section",children:[(0,Xt.jsx)("h3",{children:"Counter Users"}),(0,Xt.jsx)("div",{className:"counters-grid",children:n.map(t=>{const n=e.find(e=>e.counter&&e.counter._id===t._id);return(0,Xt.jsx)(Fn,{counter:t,user:n,onCreateUser:w,onDeleteUser:b,onEditUser:N},t._id)})})]}),o&&(0,Xt.jsx)(zn,{formData:u,setFormData:h,showPassword:m,setShowPassword:p,editingUser:c,onSubmit:c?async()=>{try{(await xn.updateUser(c._id,u)).success&&(l(!1),d(null),j(),v(),alert("User updated successfully!"))}catch(e){console.error("Error updating user:",e),alert("Error updating user: "+e.message)}}:async()=>{try{(await xn.createUser(u)).success&&(l(!1),j(),v(),alert("User created successfully!"))}catch(e){console.error("Error creating user:",e),alert("Error creating user: "+e.message)}},onClose:()=>{l(!1),j()},counters:n,departments:s})]})},Wn=e=>{let{statistics:t,departments:n,counters:a,activities:s,loading:r,hospitalName:i,hospitalCity:o}=e;return r?(0,Xt.jsx)("div",{className:"dashboard-loading",children:(0,Xt.jsxs)("div",{className:"loading-spinner",children:[(0,Xt.jsx)("div",{className:"spinner-3d"}),(0,Xt.jsx)("div",{children:"Loading Dashboard Data..."})]})}):(0,Xt.jsxs)("div",{className:"dashboard-tab",children:[(0,Xt.jsx)("div",{className:"stats-grid",children:[{label:"Total Waiting",value:t.totalWaiting||0,icon:"fa-users",color:"primary"},{label:"Served Today",value:t.servedToday||0,icon:"fa-check-circle",color:"success"},{label:"Avg Wait Time",value:"".concat(t.avgWaitTime||0,"m"),icon:"fa-clock",color:"warning"},{label:"Active Counters",value:"".concat(t.activeCounters||0,"/10"),icon:"fa-desktop",color:"info"}].map((e,t)=>(0,Xt.jsxs)("div",{className:"stat-card ".concat(e.color),children:[(0,Xt.jsx)("div",{className:"stat-icon",children:(0,Xt.jsx)("i",{className:"fas ".concat(e.icon)})}),(0,Xt.jsxs)("div",{className:"stat-info",children:[(0,Xt.jsx)("div",{className:"stat-value",children:e.value}),(0,Xt.jsx)("div",{className:"stat-label",children:e.label})]})]},t))}),(0,Xt.jsxs)("div",{className:"dashboard-section",children:[(0,Xt.jsx)("div",{className:"section-header",children:(0,Xt.jsx)("h3",{children:"Department Queues"})}),(0,Xt.jsx)("div",{className:"queue-cards",children:n.map(e=>(0,Xt.jsxs)("div",{className:"queue-card",children:[(0,Xt.jsx)("h4",{children:e.name}),(0,Xt.jsx)("div",{className:"queue-count",children:e.waitingCount||0})]},e._id))})]}),(0,Xt.jsxs)("div",{className:"dashboard-section",children:[(0,Xt.jsx)("div",{className:"section-header",children:(0,Xt.jsx)("h3",{children:"Counter Status"})}),(0,Xt.jsx)("div",{className:"counters-grid",children:a.map(e=>{var t;return(0,Xt.jsxs)("div",{className:"counter-item ".concat(e.status),children:[(0,Xt.jsx)("div",{className:"counter-header",children:(0,Xt.jsxs)("div",{className:"counter-number",children:["Counter ",e.counterNumber]})}),(0,Xt.jsx)("div",{className:"counter-department",children:(null===(t=e.department)||void 0===t?void 0:t.name)||"Unassigned"}),(0,Xt.jsx)("div",{className:"counter-footer",children:(0,Xt.jsx)("span",{className:"status-text ".concat(e.status),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})})]},e._id)})})]}),(0,Xt.jsxs)("div",{className:"dashboard-section full-width",children:[(0,Xt.jsxs)("div",{className:"section-header",children:[(0,Xt.jsx)("h3",{children:"Recent Activity"}),(0,Xt.jsxs)("span",{className:"activity-count",children:[s.length," activities"]})]}),(0,Xt.jsx)("div",{className:"activity-list",children:s.length>0?s.map(e=>(0,Xt.jsxs)("div",{className:"activity-item",children:[(0,Xt.jsx)("div",{className:"activity-icon",children:(0,Xt.jsx)("i",{className:"fas fa-bell"})}),(0,Xt.jsxs)("div",{className:"activity-content",children:[(0,Xt.jsx)("div",{className:"activity-details",children:e.details}),(0,Xt.jsx)("small",{className:"activity-time",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},e._id)):(0,Xt.jsxs)("div",{className:"no-activities",children:[(0,Xt.jsx)("i",{className:"fas fa-inbox"}),(0,Xt.jsx)("p",{children:"No recent activities"})]})})]})]})},Hn=()=>{const e=en(),{user:t,logout:n}=(()=>{const e=(0,r.useContext)(fn);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e})(),{settings:a}=mn(),s=ae(),i=te(),[o,l]=(0,r.useState)({}),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)("dashboard"),[v,y]=(0,r.useState)(!0),[x,b]=(0,r.useState)(!1),[N,j]=(0,r.useState)(!1),w=(null===a||void 0===a?void 0:a.themes)||{},k=(w.primaryColor,w.accentColor,w.fontFamily||"Inter, sans-serif"),S=(null===a||void 0===a?void 0:a.hospitalName)||"ALKHIDMAT RAAZI HOSPITAL",C=(null===a||void 0===a?void 0:a.hospitalLogo)||"",E=(null===a||void 0===a?void 0:a.hospitalCity)||"ISLAMABAD";(0,r.useEffect)(()=>{(async()=>{if(!xn.isAuthenticated())return void s("/login/admin");const e=xn.getCurrentUser();e&&"admin"===e.role||s("/login/admin")})(),document.body.style.fontFamily=k,document.body.style.overflow="auto"},[t,i,s,k]),(0,r.useEffect)(()=>{T(),_();const e=setInterval(()=>{T()},3e4);return()=>clearInterval(e)},[]);const T=async()=>{try{y(!0);const[e,t,n,a]=await Promise.all([vn.getStats(),vn.getDepartments(),vn.getCounters(),vn.getActivities()]);l(e),d(t),h(n),p(a.slice(0,3))}catch(e){console.error("Error loading dashboard data:",e)}finally{y(!1)}},_=()=>{e&&(e.on("ticket-generated",T),e.on("ticket-completed",T),e.on("counter-updated",T),e.on("settings-updated",T))},A=(e,t)=>{const n=window.location.origin,a="".concat(n).concat(t);console.log("\ud83d\udd04 Opening ".concat(e," at: ").concat(a)),window.open(a,"_blank","noopener,noreferrer,width=1200,height=800")};return(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme admin-panel-theme",children:[(0,Xt.jsx)("div",{className:"background-logo",children:C&&(0,Xt.jsx)("img",{src:C,alt:"Hospital Logo",className:"blured-logo"})}),(0,Xt.jsxs)("div",{className:"square-lines",children:[(0,Xt.jsx)("div",{className:"line horizontal top"}),(0,Xt.jsx)("div",{className:"line horizontal bottom"}),(0,Xt.jsx)("div",{className:"line vertical left"}),(0,Xt.jsx)("div",{className:"line vertical right"})]}),(0,Xt.jsxs)("div",{className:"corner-decorations",children:[(0,Xt.jsx)("div",{className:"corner top-left blue"}),(0,Xt.jsx)("div",{className:"corner top-right red"}),(0,Xt.jsx)("div",{className:"corner bottom-left red"}),(0,Xt.jsx)("div",{className:"corner bottom-right blue"})]}),(0,Xt.jsxs)("div",{className:"content-wrapper admin-content-wrapper",children:[(0,Xt.jsxs)("div",{className:"dispenser-header-theme admin-header-theme",children:[(0,Xt.jsxs)("div",{className:"hospital-brand-theme",children:[C?(0,Xt.jsx)("img",{src:C,alt:"Hospital Logo",className:"hospital-logo-theme"}):(0,Xt.jsx)("div",{className:"hospital-logo-theme-icon",children:(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"})}),(0,Xt.jsxs)("div",{className:"hospital-info-theme",children:[(0,Xt.jsx)("h1",{className:"hospital-name-theme",children:S}),(0,Xt.jsx)("p",{className:"hospital-city-theme",children:E}),(0,Xt.jsx)("p",{className:"arabic-text",children:"\u0627\u0644\u062e\u062f\u0645\u062a \u0631\u0627\u0632\u06cc \u06c1\u0633\u067e\u062a\u0627\u0644 \u0627\u0633\u0644\u0627\u0645 \u0622\u0628\u0627\u062f"})]})]}),(0,Xt.jsxs)("div",{className:"header-status-theme",children:[(0,Xt.jsxs)("div",{className:"status-indicator-theme online",children:[(0,Xt.jsx)("i",{className:"fas fa-circle"}),"System Online"]}),(0,Xt.jsx)("div",{className:"current-time-theme",children:(new Date).toLocaleTimeString()})]})]}),(0,Xt.jsxs)("div",{className:"admin-main-content",children:[(0,Xt.jsxs)("div",{className:"admin-sidebar ".concat(x?"minimized":""),children:[(0,Xt.jsx)("div",{className:"sidebar-header",children:(0,Xt.jsx)("button",{className:"sidebar-toggle",onClick:()=>b(!x),children:(0,Xt.jsx)("i",{className:"fas ".concat(x?"fa-chevron-right":"fa-chevron-left")})})}),(0,Xt.jsx)("div",{className:"navigation-menu",children:[{key:"dashboard",icon:"fa-tachometer-alt",label:"Dashboard"},{key:"queue-control",icon:"fa-list-ol",label:"Queue Control"},{key:"counters",icon:"fa-desktop",label:"Counters"},{key:"users",icon:"fa-user-shield",label:"User Management"},{key:"reports",icon:"fa-chart-bar",label:"Reports"},{key:"settings",icon:"fa-cog",label:"Settings"}].map(e=>{let{key:t,icon:n,label:a}=e;return(0,Xt.jsxs)("div",{className:"menu-item ".concat(f===t?"active":""),onClick:()=>g(t),children:[(0,Xt.jsx)("i",{className:"fas ".concat(n)}),(0,Xt.jsx)("span",{className:x?"hidden":"",children:a})]},t)})}),(0,Xt.jsxs)("div",{className:"system-controls",children:[(0,Xt.jsxs)("button",{className:"btn-system",onClick:()=>A("dispenser","/dispenser"),title:"Open Ticket Dispenser in new window",children:[(0,Xt.jsx)("i",{className:"fas fa-ticket-alt"}),(0,Xt.jsx)("span",{className:x?"hidden":"",children:"Ticket Dispenser"})]}),(0,Xt.jsxs)("button",{className:"btn-system",onClick:()=>A("waiting","/waiting"),title:"Open Waiting Area in new window",children:[(0,Xt.jsx)("i",{className:"fas fa-tv"}),(0,Xt.jsx)("span",{className:x?"hidden":"",children:"Waiting Area"})]}),(0,Xt.jsxs)("button",{className:"btn-system btn-danger",onClick:()=>vn.resetSystem(),children:[(0,Xt.jsx)("i",{className:"fas fa-redo"}),(0,Xt.jsx)("span",{className:x?"hidden":"",children:"Reset System"})]})]}),(0,Xt.jsxs)("div",{className:"user-info-container",children:[(0,Xt.jsxs)("div",{className:"user-info",onClick:()=>j(!N),children:[(0,Xt.jsx)("div",{className:"user-avatar",children:(0,Xt.jsx)("div",{className:"avatar-letter",children:null!==t&&void 0!==t&&t.name?t.name.charAt(0).toUpperCase():"A"})}),(0,Xt.jsxs)("div",{className:"user-details",children:[(0,Xt.jsx)("span",{className:"user-name",children:(null===t||void 0===t?void 0:t.name)||"System Admin"}),(0,Xt.jsx)("span",{className:"user-role",children:(null===t||void 0===t?void 0:t.role)||"Administrator"})]}),(0,Xt.jsx)("i",{className:"fas fa-chevron-down ".concat(N?"rotate":"")})]}),N&&(0,Xt.jsxs)("div",{className:"user-dropdown",children:[(0,Xt.jsxs)("div",{className:"dropdown-item",onClick:()=>j(!1),children:[(0,Xt.jsx)("i",{className:"fas fa-user"}),(0,Xt.jsx)("span",{children:"Profile"})]}),(0,Xt.jsxs)("div",{className:"dropdown-item logout",onClick:()=>{n()},children:[(0,Xt.jsx)("i",{className:"fas fa-sign-out-alt"}),(0,Xt.jsx)("span",{children:"Logout"})]})]})]})]}),(0,Xt.jsxs)("div",{className:"admin-content-area",children:[(0,Xt.jsxs)("div",{className:"content-header",children:[(0,Xt.jsxs)("h2",{children:["dashboard"===f&&"Queue Management Dashboard","queue-control"===f&&"Queue Control Center","counters"===f&&"Counter Management","users"===f&&"User Management","reports"===f&&"Reports & Analytics","settings"===f&&"System Settings"]}),(0,Xt.jsxs)("button",{className:"btn-refresh",onClick:T,children:[(0,Xt.jsx)("i",{className:"fas fa-sync-alt"}),"Refresh"]})]}),(0,Xt.jsx)("div",{className:"tab-content",children:(()=>{switch(f){case"dashboard":return(0,Xt.jsx)(Wn,{statistics:o,departments:c,counters:u,activities:m,loading:v,hospitalName:S,hospitalCity:E});case"queue-control":return(0,Xt.jsx)(Nn,{});case"counters":return(0,Xt.jsx)(jn,{counters:u});case"reports":return(0,Xt.jsx)(Un,{});case"settings":return(0,Xt.jsx)(Ln,{});case"users":return(0,Xt.jsx)(qn,{});default:return null}})()})]})]}),(0,Xt.jsx)("div",{className:"dispenser-footer-theme admin-footer",children:(0,Xt.jsx)("div",{className:"footer-content-theme",children:(0,Xt.jsxs)("div",{className:"system-info-theme",children:[S," \u2022 Queue Management System v2.0 \u2022 Last updated: ",(new Date).toLocaleTimeString()]})})})]})]})};let Vn=[],Qn={},$n={};const Gn={async generateTicket(e){try{console.log("\ud83c\udfab Generating ticket via API:",e);const t={departmentId:e.departmentId,patientName:e.patientName||null,patientPhone:e.patientPhone||null,priority:e.priority||"normal"},n=await cn.post("/tickets/generate",t);if(n.success)return console.log("\u2705 Ticket generated via API:",n.ticket),n.ticket;throw new Error(n.error||"Failed to generate ticket")}catch(t){console.error("\u274c API failed, generating ticket locally:",t);const n=await this.generateLocalTicket(e);return console.log("\ud83d\udcdd Local ticket created:",n),n}},async getDepartments(){try{const e=await cn.get("/departments");return console.log("\u2705 Loaded ".concat(e.length," departments from API")),e}catch(e){return console.error("\u274c Error fetching departments from API, using fallback:",e),[{_id:"1",name:"General OPD",code:"general",prefix:"A",estimatedWaitTime:15,active:!0,waitingCount:5,servedToday:12,currentSequence:0},{_id:"2",name:"Cardiology",code:"cardiology",prefix:"B",estimatedWaitTime:25,active:!0,waitingCount:3,servedToday:8,currentSequence:0},{_id:"3",name:"Orthopedics",code:"ortho",prefix:"C",estimatedWaitTime:20,active:!0,waitingCount:2,servedToday:6,currentSequence:0}]}},async getQueue(e){try{const t=await cn.get("/tickets/queue/".concat(e));return console.log("\u2705 Queue loaded from API for department ".concat(e,": ").concat(t.length," tickets")),t}catch(t){console.error("\u274c Error fetching queue from API, using local queue:",t);const n=Qn[e]||[];return n.length>0?(console.log("\ud83d\udccb Using local queue: ".concat(n.length," tickets")),n):this.generateMockQueue(e)}},async getDepartmentQueue(e){try{return await cn.get("/tickets/department/".concat(e,"/queue-enhanced"))}catch(t){return console.error("\u274c Error fetching enhanced queue, using basic queue:",t),this.getQueue(e)}},async getLastTicket(e){try{return await cn.get("/tickets/department/".concat(e,"/last"))}catch(t){console.error("Error getting last ticket from API:",t);const n=Vn.filter(t=>t.departmentId===e);return n.length>0?n.sort((e,t)=>new Date(t.generatedAt)-new Date(e.generatedAt))[0]:null}},async callNextTicket(e){try{console.log("\ud83d\udcde Calling next ticket for counter ".concat(e," via API..."));const t=await cn.post("/tickets/call-next",{counterId:e});return console.log("\u2705 Next ticket called via API:",t),t}catch(t){throw console.error("\u274c Error calling next ticket via API:",t),new Error("Failed to call next ticket: "+(t.message||"Unknown error"))}},async completeTicket(e){try{console.log("\u2705 Completing ticket ".concat(e," via API..."));const t=await cn.post("/tickets/complete/".concat(e));return console.log("\u2705 Ticket completed via API"),t}catch(t){throw console.error("\u274c Error completing ticket via API:",t),new Error("Failed to complete ticket: "+(t.message||"Unknown error"))}},async generateLocalTicket(e){var t;const{departmentId:n,departmentName:a,priority:s="normal"}=e,r=await this.getDepartments(),i=r.find(e=>e._id===n)||r[0];if(!$n[n]){const e=await this.getLastTicket(n);if(e&&e.ticketNumber){const t=parseInt(e.ticketNumber.replace(i.prefix,""))||0;$n[n]=t}else $n[n]=0}$n[n]+=1;const o="".concat(i.prefix).concat($n[n].toString().padStart(3,"0")),l=((null===(t=Qn[n])||void 0===t?void 0:t.length)||0)+1,c={_id:"local_".concat(n,"_").concat(Date.now()),ticketNumber:o,department:{_id:n,name:a||i.name,prefix:i.prefix},departmentId:n,departmentName:a||i.name,generatedAt:new Date,estimatedWaitTime:i.estimatedWaitTime||15,status:"waiting",patientName:e.patientName||null,priority:s,positionInQueue:l,isLocal:!0};return this.storeTicketLocally(c),console.log("\u2705 Local ticket generated: ".concat(o)),c},storeTicketLocally(e){var t;Vn.push(e);const n=e.departmentId||(null===(t=e.department)||void 0===t?void 0:t._id);n&&(Qn[n]||(Qn[n]=[]),Qn[n].push(e)),console.log("\ud83d\udcbe Ticket stored locally: ".concat(e.ticketNumber))},generateMockQueue(e){const t={1:{prefix:"A",name:"General OPD"},2:{prefix:"B",name:"Cardiology"},3:{prefix:"C",name:"Orthopedics"}},n=t[e]||t[1],a=Math.floor(6*Math.random())+3,s=[];for(let r=1;r<=a;r++){const t="".concat(n.prefix).concat(r.toString().padStart(3,"0"));s.push({_id:"mock_".concat(e,"_").concat(r),ticketNumber:t,department:{_id:e,name:n.name,prefix:n.prefix},departmentId:e,departmentName:n.name,generatedAt:new Date(Date.now()-5*r*6e4),status:"waiting",priority:1===r?"priority":"normal",patientName:1===r?"Priority Patient":"Patient ".concat(r),estimatedWaitTime:Math.floor(30*Math.random())+10,positionInQueue:r,isMock:!0})}return console.log("\ud83c\udfad Generated mock queue for ".concat(n.name,": ").concat(s.length," tickets")),s},getLocalTickets:()=>Vn,getLocalQueues:()=>Qn,clearLocalData(){Vn=[],Qn={},$n={},console.log("\ud83e\uddf9 Local ticket data cleared")}},Kn=()=>{const{settings:e}=mn(),t=ae(),n=en(),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)({}),d=(0,r.useRef)(new Map),u=(0,r.useRef)({}),h=(0,r.useRef)({}),m=(null===e||void 0===e?void 0:e.hospitalLogo)||"",p=(null===e||void 0===e?void 0:e.hospitalCity)||"ISLAMABAD";(0,r.useEffect)(()=>(g(),()=>v()),[]),(0,r.useEffect)(()=>(document.body.style.overflow="auto",f(),N(),b(),()=>{n&&(n.off("urdu-voice-announcement"),n.off("ticket-generated"),n.off("new-ticket"),n.off("system-recovered"),n.off("system-auto-recovered")),v()}),[t,n]),(0,r.useEffect)(()=>{n&&Yt.setSocket(n)},[n]);const f=()=>{if(!xn.isAuthenticated())return void t("/login/dispenser");const e=xn.validateComponentAccess("dispenser");e.valid||t(e.redirect)},g=()=>{y(),document.addEventListener("contextmenu",x)},v=()=>{d.current.clear(),document.removeEventListener("contextmenu",x)},y=()=>{const e=document.documentElement;e.requestFullscreen&&e.requestFullscreen().catch(e=>{console.log("Fullscreen error:",e)})},x=e=>(e.preventDefault(),!1),b=()=>{n&&(n.on("urdu-voice-announcement",async e=>{console.log("\ud83d\udd0a Centralized Dispenser received voice announcement:",e),await(async e=>{const{ticketNumber:t,counterNumber:n,isRecall:a,type:s,audioUrl:r}=e;console.log("\ud83d\udd0a CENTRALIZED VOICE ANNOUNCEMENT: ".concat(t," for Counter ").concat(n));try{"mp3_announcement"===s&&r?await Yt.playAudioFile(r):await Yt.speakUrduAnnouncement(Yt.getUrduAnnouncementMessage(t,n,a)),console.log("\u2705 Centralized voice announcement completed")}catch(i){console.error("\u274c Centralized voice announcement failed:",i)}})(e)}),n.on("system-recovered",e=>{console.log("\u2705 System recovered:",e),c({}),d.current.clear()}),n.on("system-auto-recovered",e=>{console.log("\ud83d\udd04 System auto-recovered:",e),c({}),d.current.clear()}),n.on("ticket-generated",e=>{console.log("New ticket generated:",e)}),n.on("new-ticket",e=>{console.log("New ticket notification:",e)}),n.emit("join-dispenser"))},N=async()=>{try{o(!0);const e=(await Gn.getDepartments()).filter(e=>!1!==e.active);s(e)}catch(e){console.error("Error loading departments:",e),s([{_id:"1",name:"General OPD",code:"general",active:!0,prefix:"A"},{_id:"2",name:"Cardiology",code:"cardiology",active:!0,prefix:"B"},{_id:"3",name:"Orthopedics",code:"ortho",active:!0,prefix:"C"},{_id:"4",name:"Pediatrics",code:"pediatrics",active:!0,prefix:"D"},{_id:"5",name:"Emergency",code:"emergency",active:!0,prefix:"E"},{_id:"6",name:"Dental",code:"dental",active:!0,prefix:"F"}])}finally{o(!1)}};(0,r.useEffect)(()=>{const e=setInterval(()=>{const e=Date.now();d.current.forEach((t,n)=>{e-t>3e4&&(d.current.delete(n),c(e=>{const t=on({},e);return delete t[n],t}))}),h.current={}},3e4);return()=>clearInterval(e)},[]);return i&&!a.length?(0,Xt.jsxs)("div",{className:"ticket-dispenser-container dark-blue-theme",children:[(0,Xt.jsx)("div",{className:"dispenser-background-logo",children:m&&(0,Xt.jsx)("img",{src:m,alt:"Hospital Logo",className:"dispenser-logo-blur"})}),(0,Xt.jsxs)("div",{className:"dispenser-loading-container",children:[(0,Xt.jsx)("div",{className:"dispenser-spinner"}),(0,Xt.jsx)("div",{className:"dispenser-loading-text",children:"Loading Hospital Services..."})]})]}):(0,Xt.jsxs)("div",{className:"ticket-dispenser-container kiosk-mode",children:[(0,Xt.jsx)("div",{className:"dispenser-background-logo",children:m&&(0,Xt.jsx)("img",{src:m,alt:"Hospital Logo",className:"dispenser-logo-blur"})}),(0,Xt.jsxs)("div",{className:"dispenser-content-wrapper",children:[(0,Xt.jsx)("div",{className:"dispenser-header",children:(0,Xt.jsxs)("div",{className:"dispenser-branding",children:[m?(0,Xt.jsx)("img",{src:m,alt:"Hospital Logo",className:"dispenser-logo"}):(0,Xt.jsx)("div",{className:"dispenser-logo-placeholder",children:(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"})}),(0,Xt.jsxs)("div",{className:"dispenser-details",children:[(0,Xt.jsx)("h1",{className:"dispenser-title",children:"AL-KHIDMAT RAAZI HOSPITAL"}),(0,Xt.jsx)("p",{className:"dispenser-location",children:p})]})]})}),(0,Xt.jsxs)("div",{style:{display:"none"},children:["Active Prints: ",Object.keys(l).length," | Queue: ",d.current.size]}),(0,Xt.jsx)("div",{className:"dispenser-grid",children:a.map((e,t)=>{var n;const a=l[e._id]||!1;return(0,Xt.jsxs)("div",{className:"dispenser-card ".concat(a?"printing":""),style:{animationDelay:"".concat(.1*t,"s")},onClick:()=>!a&&(async e=>{const t=e._id;if(l[t]||d.current.has(t))return void console.log("\u26a0\ufe0f Already processing: ".concat(e.name));const n=Date.now();if(n-(u.current[t]||0)<1e3)console.log("\u23f3 Too fast, please wait: ".concat(e.name));else{h.current[t]||(h.current[t]=0),h.current[t]++,h.current[t]>=5&&(console.log("\ud83d\udd04 Cooldown after 5 prints: ".concat(e.name)),setTimeout(()=>{h.current[t]=0},2e3));try{var a;c(e=>on(on({},e),{},{[t]:!0})),d.current.set(t,!0),u.current[t]=n;const s=Gn.generateTicket({departmentId:e._id,departmentName:e.name,priority:"normal"}),r=new Promise((e,t)=>setTimeout(()=>t(new Error("Ticket generation timeout")),1e4)),i={ticketNumber:(await Promise.race([s,r])).ticketNumber,departmentName:e.name,hospitalName:"AL-KHIDMAT RAAZI HOSPITAL",date:(new Date).toLocaleDateString("en-PK"),time:(new Date).toLocaleTimeString("en-PK",{hour:"2-digit",minute:"2-digit",hour12:!0}),departmentCode:e.prefix||(null===(a=e.code)||void 0===a?void 0:a.toUpperCase())||"GEN"},o=fetch("/api/print-ticket",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),l=new Promise(e=>setTimeout(()=>e({ok:!1}),8e3)),h=await Promise.race([o,l]);if(h.ok){const e=await h.json();console.log("\u2705 Print request successful:",e)}else console.log("\u26a0\ufe0f Print request timed out, but ticket was generated")}catch(ya){console.error("\u274c Ticket generation error:",ya),(ya.message.includes("timeout")||ya.message.includes("network"))&&console.log("\ud83d\udd04 Auto-recovering from timeout...")}finally{setTimeout(()=>{c(e=>{const n=on({},e);return delete n[t],n}),d.current.delete(t);const e=Date.now();Object.keys(u.current).forEach(t=>{e-u.current[t]>6e4&&delete u.current[t]})},500)}}})(e),children:[(0,Xt.jsxs)("div",{className:"dispenser-card-header",children:[(0,Xt.jsx)("div",{className:"dispenser-icon",children:(0,Xt.jsx)("i",{className:"fas fa-".concat((s=e.code,{general:"stethoscope",cardiology:"heart-pulse",ortho:"bone",pediatrics:"child",dental:"tooth",eye:"eye",emergency:"truck-medical"}[s]||"stethoscope"))})}),(0,Xt.jsx)("div",{className:"dispenser-meta",children:(0,Xt.jsx)("span",{className:"dispenser-code",children:e.prefix||(null===(n=e.code)||void 0===n?void 0:n.toUpperCase())||"GEN"})})]}),(0,Xt.jsx)("div",{className:"dispenser-card-content",children:(0,Xt.jsx)("h3",{className:"dispenser-dept-name",children:e.name})}),(0,Xt.jsx)("div",{className:"dispenser-button ".concat(a?"printing":""),children:a?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"}),"Printing..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-ticket-alt"}),"GET TICKET"]})})]},e._id);var s})})]})]})},Jn={async getDepartments(){try{const e=await cn.get("/departments");return console.log("\u2705 Loaded ".concat(e.length," departments")),e}catch(e){return console.error("\u274c Error fetching departments:",e),[{_id:"1",name:"General OPD",code:"general",waitingCount:5,servedToday:12,activeCounters:2,estimatedWaitTime:15,active:!0},{_id:"2",name:"Cardiology",code:"cardiology",waitingCount:3,servedToday:8,activeCounters:1,estimatedWaitTime:25,active:!0},{_id:"3",name:"Orthopedics",code:"ortho",waitingCount:2,servedToday:6,activeCounters:1,estimatedWaitTime:20,active:!0},{_id:"4",name:"Pediatrics",code:"pediatrics",waitingCount:4,servedToday:10,activeCounters:1,estimatedWaitTime:10,active:!0},{_id:"5",name:"Emergency",code:"emergency",waitingCount:1,servedToday:15,activeCounters:2,estimatedWaitTime:0,active:!0}]}},async getDepartmentByCode(e){try{const t=await this.getDepartments(),n=t.find(t=>t.code===e);return n||(console.warn("Department with code ".concat(e," not found, returning first department")),t[0])}catch(t){return console.error("Error fetching department by code:",t),{_id:"1",name:"General OPD",code:"general",estimatedWaitTime:15}}},async getQueue(e){try{const t=await cn.get("/departments/".concat(e,"/queue"));return console.log("\u2705 Queue loaded for department ".concat(e,": ").concat(t.length," tickets")),t}catch(t){return console.error("Error fetching department queue:",t),this.generateMockQueue(e)}},async getDepartmentStats(e){try{return await cn.get("/departments/".concat(e,"/stats"))}catch(t){return console.error("Error fetching department stats:",t),{waitingCount:0,avgWaitTime:15,servedToday:0,totalServed:0}}},async updateDepartment(e,t){try{const n=await cn.put("/departments/".concat(e),t);return console.log("\u2705 Department ".concat(e," updated successfully")),n}catch(n){throw console.error("Error updating department:",n),n}},generateMockQueue(e){const t={1:{prefix:"G",name:"General OPD"},2:{prefix:"C",name:"Cardiology"},3:{prefix:"O",name:"Orthopedics"},4:{prefix:"P",name:"Pediatrics"},5:{prefix:"EM",name:"Emergency"}},n=t[e]||t[1],a=Math.floor(8*Math.random())+2,s=[];for(let r=1;r<=a;r++)s.push({_id:"mock_".concat(e,"_").concat(r),ticketNumber:"".concat(n.prefix).concat((100+r).toString().padStart(3,"0")),department:{_id:e,name:n.name,prefix:n.prefix},generatedAt:new Date(Date.now()-5*r*6e4),status:"waiting",priority:1===r?"priority":"normal",patientName:1===r?"Priority Patient":null,estimatedWaitTime:Math.floor(30*Math.random())+10,positionInQueue:r});return console.log("\ud83d\udcdd Generated mock queue for ".concat(n.name,": ").concat(s.length," tickets")),s},async getAllDepartments(){try{return await cn.get("/departments/all")}catch(e){return console.error("Error fetching all departments:",e),this.getDepartments()}}},Yn={async getCounter(e){try{console.log("\ud83d\udce5 Fetching counter ".concat(e,"..."));const t=await cn.get("/counters/".concat(e));return console.log("\u2705 Counter ".concat(e," loaded successfully"),t),t}catch(t){throw console.error("\u274c Error fetching counter:",t),t}},async getCounterDetails(e){try{console.log("\ud83d\udce5 Fetching detailed counter info for ".concat(e,"..."));const t=await cn.get("/counters/".concat(e,"/full-details"));return console.log("\u2705 Counter details loaded successfully",t),t}catch(t){throw console.error("\u274c Error fetching counter details:",t),t}},async getActiveCounters(){try{console.log("\ud83d\udce5 Fetching active counters...");const e=await cn.get("/counters/status/active");return console.log("\u2705 ".concat(e.length," active counters loaded")),e}catch(e){return console.error("\u274c Error fetching active counters:",e),[{_id:"1",counterNumber:1,status:"active",department:{name:"General OPD",code:"general"},currentTicket:null}]}},async getNextTicket(e){try{console.log("\ud83d\udce5 Fetching next ticket for department ".concat(e,"..."));const t=await cn.get("/departments/".concat(e,"/queue")),n=t.length>0?t[0]:null;return console.log("\u2705 Next ticket:",(null===n||void 0===n?void 0:n.ticketNumber)||"No tickets"),n}catch(t){throw console.error("\u274c Error fetching next ticket:",t),t}},async getQueue(e){try{console.log("\ud83d\udce5 Fetching queue for department ".concat(e,"..."));const t=await cn.get("/departments/".concat(e,"/queue"));return console.log("\u2705 Queue loaded: ".concat(t.length," tickets waiting")),t}catch(t){return console.error("\u274c Error fetching queue:",t),[]}},async callNextTicket(e){try{console.log("\ud83d\udcde Calling next ticket for counter ".concat(e,"..."));const t=await cn.post("/counters/".concat(e,"/call-next"));return console.log("\u2705 Next ticket called successfully:",t),t}catch(t){throw console.error("\u274c Error calling next ticket:",t),t}},async completeTicket(e){try{console.log("\u2705 Completing current ticket for counter ".concat(e,"..."));const t=await cn.post("/counters/".concat(e,"/complete"));return console.log("\u2705 Ticket completed successfully"),t}catch(t){throw console.error("\u274c Error completing ticket:",t),t}},async recallTicket(e){try{console.log("\ud83d\udd01 Recalling ticket for counter ".concat(e,"..."));const t=await cn.post("/counters/".concat(e,"/recall"));return console.log("\u2705 Ticket recalled successfully"),t}catch(t){throw console.error("\u274c Error recalling ticket:",t),t}},async transferTicket(e,t){try{console.log("\ud83d\udd04 Transferring ticket from counter ".concat(e," to department ").concat(t,"..."));const n=await cn.post("/counters/".concat(e,"/transfer"),{newDepartmentId:t});return console.log("\u2705 Ticket transferred successfully:",n),n}catch(n){throw console.error("\u274c Error transferring ticket:",n),n}},async getDepartments(){try{console.log("\ud83d\udce5 Fetching all departments...");const e=await cn.get("/departments");return console.log("\u2705 ".concat(e.length," departments loaded")),e}catch(e){return console.error("\u274c Error fetching departments:",e),[{_id:"1",name:"General OPD",code:"general",prefix:"A",description:"General Outpatient Department"},{_id:"2",name:"Emergency",code:"emergency",prefix:"E",description:"Emergency Department"},{_id:"3",name:"Cardiology",code:"cardiology",prefix:"C",description:"Cardiology Department"}]}},async callSpecificTicket(e,t){try{console.log("\ud83d\udcde Calling specific ticket ".concat(e," at counter ").concat(t,"..."));const n=await cn.post("/tickets/call-specific",{ticketId:e,counterId:t});return console.log("\u2705 Specific ticket called successfully"),n}catch(n){throw console.error("\u274c Error calling specific ticket:",n),n}},async skipTicket(e){try{console.log("\u23ed\ufe0f Skipping ticket ".concat(e,"..."));const t=await cn.post("/tickets/".concat(e,"/skip"));return console.log("\u2705 Ticket skipped successfully"),t}catch(t){throw console.error("\u274c Error skipping ticket:",t),t}},async updateCounterStatus(e,t){try{console.log("\ud83d\udd04 Updating counter ".concat(e," status to: ").concat(t));const n=await cn.put("/counters/".concat(e,"/status"),{status:t});return console.log("\u2705 Counter status updated to: ".concat(t)),n}catch(n){throw console.error("\u274c Error updating counter status:",n),n}},async getCounterStats(e){try{console.log("\ud83d\udcca Fetching stats for counter ".concat(e,"..."));const t=await cn.get("/counters/".concat(e,"/stats"));return console.log("\u2705 Counter stats loaded successfully"),t}catch(t){throw console.error("\u274c Error fetching counter stats:",t),t}},async getAllCounters(){try{console.log("\ud83d\udce5 Fetching all counters...");const e=await cn.get("/counters");return console.log("\u2705 ".concat(e.length," counters loaded")),e}catch(e){return console.error("\u274c Error fetching all counters:",e),[{_id:"1",counterNumber:1,name:"Counter 1",status:"active",department:{_id:"1",name:"General OPD"},currentTicket:null}]}},async getAccessibleCounters(){try{var e;console.log("\ud83d\udce5 Fetching accessible counters...");const t=await cn.get("/counters/accessible");return console.log("\u2705 ".concat((null===(e=t.counters)||void 0===e?void 0:e.length)||0," accessible counters loaded")),t.counters||[]}catch(t){return console.error("\u274c Error fetching accessible counters:",t),[]}}},Xn=e=>{var t,n,a,s;let{counter:r}=e;return(0,Xt.jsxs)("div",{className:"counter-card ".concat(r.status),children:[(0,Xt.jsxs)("div",{className:"counter-card-header",children:[(0,Xt.jsxs)("div",{className:"counter-number",children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"}),"Counter ",r.counterNumber]}),(0,Xt.jsxs)("div",{className:"counter-status ".concat(r.status),children:[(0,Xt.jsx)("span",{className:"status-dot"}),r.status.toUpperCase()]})]}),(0,Xt.jsxs)("div",{className:"counter-info",children:[(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-user-md"}),(0,Xt.jsx)("span",{children:r.name||"Operator ".concat(r.counterNumber)})]}),(0,Xt.jsxs)("div",{className:"info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-building"}),(0,Xt.jsx)("span",{children:(null===(t=r.department)||void 0===t?void 0:t.name)||"General"})]})]}),(0,Xt.jsxs)("div",{className:"current-ticket-section",children:[(0,Xt.jsx)("div",{className:"serving-label",children:"NOW SERVING"}),(0,Xt.jsx)("div",{className:"ticket-number",children:(null===(n=r.currentTicket)||void 0===n?void 0:n.ticketNumber)||"---"}),(null===(a=r.currentTicket)||void 0===a?void 0:a.patientName)&&(0,Xt.jsx)("div",{className:"patient-name",children:r.currentTicket.patientName}),(null===(s=r.currentTicket)||void 0===s?void 0:s.calledAt)&&(0,Xt.jsxs)("div",{className:"call-time",children:["Called: ",new Date(r.currentTicket.calledAt).toLocaleTimeString()]})]})]})},Zn=e=>{let{announcement:t,onClose:n,index:a}=e;const[s,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=setTimeout(()=>{i(!1),setTimeout(n,500)},8e3);return()=>clearTimeout(e)},[n]);return(0,Xt.jsx)("div",{className:"announcement-popup ".concat(s?"visible":"hidden"),children:(0,Xt.jsxs)("div",{className:"popup-content",children:[(0,Xt.jsxs)("div",{className:"popup-header",children:[(0,Xt.jsx)("div",{className:"popup-icon",children:(0,Xt.jsx)("i",{className:"fas fa-bullhorn"})}),(0,Xt.jsx)("div",{className:"popup-title",children:"ATTENTION PLEASE"}),(0,Xt.jsx)("button",{className:"popup-close",onClick:()=>{i(!1),setTimeout(n,500)},children:(0,Xt.jsx)("i",{className:"fas fa-times"})})]}),(0,Xt.jsxs)("div",{className:"popup-body",children:[(0,Xt.jsxs)("div",{className:"announcement-token",children:["Token: ",(0,Xt.jsx)("span",{className:"token-highlight",children:t.ticketNumber})]}),(0,Xt.jsxs)("div",{className:"announcement-counter",children:["Please proceed to: ",(0,Xt.jsxs)("span",{className:"counter-highlight",children:["Counter ",t.counterNumber]})]}),t.department&&(0,Xt.jsxs)("div",{className:"announcement-department",children:["Department: ",(0,Xt.jsx)("span",{className:"department-highlight",children:t.department})]})]}),(0,Xt.jsxs)("div",{className:"popup-footer",children:[(0,Xt.jsx)("i",{className:"fas fa-info-circle"}),"Please have your documents ready when approaching the counter"]})]})})},ea=()=>{const{displayId:e}=se(),t=ae(),n=en(),{settings:a}=mn(),[s,i]=(0,r.useState)(new Date),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[f,g]=(0,r.useState)(0),[v,y]=(0,r.useState)([]),[x,b]=(0,r.useState)({}),[N,j]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[S,C]=(0,r.useState)(new Date),E=(0,r.useRef)(null),T=(0,r.useRef)(null),_=(null===a||void 0===a?void 0:a.themes)||{},A=(_.primaryColor,_.accentColor,_.fontFamily||"Inter, sans-serif"),P=(null===a||void 0===a?void 0:a.hospitalName)||"ALKHIDMAT RAAZI HOSPITAL",D=(null===a||void 0===a?void 0:a.hospitalLogo)||"",L=(null===a||void 0===a?void 0:a.hospitalCity)||"ISLAMABAD",R=(null===a||void 0===a?void 0:a.waitingScreen)||{},O=!1!==R.showAds,I=!1!==R.soundNotifications,U=R.customMessage||"",M=R.language||"en",F=(null===a||void 0===a?void 0:a.advertisements)||[];(0,r.useEffect)(()=>{(()=>{if(!xn.isAuthenticated()){const e=localStorage.getItem("adminAccessToken"),n=localStorage.getItem("adminUser");if(!e||!n)return void t("/login/waiting");localStorage.setItem("accessToken",e),localStorage.setItem("user",n),localStorage.setItem("component","waiting"),localStorage.setItem("loginTime",(new Date).toISOString()),localStorage.removeItem("adminAccessToken"),localStorage.removeItem("adminUser"),localStorage.removeItem("adminComponent")}const e=xn.validateComponentAccess("waiting");e.valid||t(e.redirect)})(),z(),$(),document.body.style.fontFamily=A;const e=setInterval(()=>i(new Date),1e3),n=setInterval(()=>{l(e=>(e+1)%K().length)},1e4),a=O?setInterval(()=>{g(e=>(e+1)%J().length)},3e4):null,s=setInterval(()=>{q(),V()},3e4);return()=>{clearInterval(e),clearInterval(n),a&&clearInterval(a),clearInterval(s),speechSynthesis.cancel()}},[e,t,O,A]);const z=async()=>{try{d(!0),await B(),await q(),await V(),await Q()}catch(e){console.error("Error loading initial data:",e)}finally{d(!1)}},B=async()=>{try{console.log("\ud83d\udd04 Loading departments...");const e=(await Jn.getDepartments()).filter(e=>!1!==e.active);y(e),console.log("\u2705 Loaded ".concat(e.length," departments"))}catch(e){console.error("Error loading departments:",e)}},q=async()=>{try{console.log("\ud83d\udd04 Loading counters...");const e=await Yn.getAllCounters();console.log("\ud83d\udcca Raw counters data:",e),j(e),C(new Date),W(e),console.log("\u2705 Loaded ".concat(e.length," counters, ").concat(w.length," active"))}catch(e){console.error("\u274c Error loading counters:",e);const t=H();j(t),W(t)}},W=e=>{if(!e||!Array.isArray(e))return console.warn("\u26a0\ufe0f No counters data provided to updateActiveCounters"),void k([]);const t=e.filter(e=>{const t="active"===e.status||"busy"===e.status;return console.log("\ud83d\udd0d Counter ".concat(e.counterNumber,": status=").concat(e.status,", active=").concat(t)),t});t.sort((e,t)=>e.counterNumber-t.counterNumber),k(t),console.log("\u2705 Updated ".concat(t.length," active counters:"),t.map(e=>"".concat(e.counterNumber,"(").concat(e.status,")")))},H=()=>[{_id:"1",counterNumber:1,name:"Reception Counter 1",status:"active",department:{_id:"1",name:"Reception",code:"RECEPTION"},currentTicket:{ticketNumber:"A015",calledAt:new Date,patientName:"John Doe"},type:"reception"},{_id:"2",counterNumber:2,name:"OPD Counter 1",status:"busy",department:{_id:"2",name:"General OPD",code:"OPD"},currentTicket:{ticketNumber:"B008",calledAt:new Date(Date.now()-3e5),patientName:"Jane Smith"},type:"department"},{_id:"3",counterNumber:3,name:"Emergency Counter",status:"active",department:{_id:"3",name:"Emergency",code:"ER"},currentTicket:null,type:"emergency"}],V=async()=>{try{console.log("\ud83d\udd04 Loading queue data from database...");const e=await Gn.getQueueStats(),t={};v.forEach(n=>{var a;const s=e.find(e=>e.departmentId===n._id)||{},r=s.waitingTickets||[],i=s.servedToday||0,o=N.filter(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t._id)===n._id&&("active"===e.status||"busy"===e.status)}),l=null===(a=N.find(e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t._id)===n._id&&e.currentTicket}))||void 0===a?void 0:a.currentTicket;t[n._id]={waitingCount:r.length,servedToday:i,avgWaitTime:n.estimatedWaitTime||15,activeCounters:o.length,currentTicket:l,waitingTickets:r}}),b(t),console.log("\u2705 Real queue data loaded successfully from database")}catch(e){console.error("Error loading queue data from database:",e)}},Q=async()=>{try{console.log("\ud83d\udd04 Loading called tickets history...");const e=await Gn.getRecentCalledTickets();if(e&&e.length>0)h(e.slice(0,8)),console.log("\u2705 Loaded ".concat(e.length," recent called tickets"));else{const e=[{_id:"1",ticketNumber:"A014",counterNumber:1,department:{name:"Reception"},announcementTime:new Date(Date.now()-12e4)},{_id:"2",ticketNumber:"B007",counterNumber:2,department:{name:"OPD"},announcementTime:new Date(Date.now()-3e5)}];h(e)}}catch(e){console.error("Error loading called tickets:",e)}},$=()=>{n?(n.emit("join-display",e||"main-waiting"),n.on("counter-updated",e=>{console.log("\ud83d\udd04 Counter updated:",e),j(t=>t.map(t=>t._id===e._id?e:t)),C(new Date),W(N)}),n.on("counter-created",e=>{console.log("\ud83c\udd95 Counter created:",e),j(t=>t.find(t=>t._id===e._id)?t:[...t,e]),C(new Date),W(N)}),n.on("counter-deleted",e=>{console.log("\ud83d\uddd1\ufe0f Counter deleted:",e),j(t=>t.filter(t=>t._id!==e)),C(new Date),W(N)}),n.on("token-called",e=>{var t;console.log("\ud83d\udce2 Token called:",e);const{ticket:n,counter:a}=e,s=on(on({},n),{},{counterNumber:a.counterNumber,announcementTime:new Date});h(e=>{const t=e.filter(e=>e._id!==n._id);return[s,...t].slice(0,8)}),p(e=>{var t;const s=e.filter(e=>e.ticketId!==n._id);return[{ticketId:n._id,ticketNumber:n.ticketNumber,counterNumber:a.counterNumber,department:null===(t=n.department)||void 0===t?void 0:t.name,timestamp:new Date},...s]}),G(n.ticketNumber,a.counterNumber,null===(t=n.department)||void 0===t?void 0:t.name),j(e=>e.map(e=>e._id===a._id?a:e)),C(new Date),W(N)}),n.on("token-completed",e=>{console.log("\u2705 Token completed:",e),j(t=>t.map(t=>t._id===e.counter._id?e.counter:t)),C(new Date),W(N)}),n.on("token-recalled",e=>{var t;console.log("\ud83d\udd01 Token recalled:",e);const{ticket:n,counter:a}=e;G(n.ticketNumber,a.counterNumber,null===(t=n.department)||void 0===t?void 0:t.name),j(e=>e.map(e=>e._id===a._id?a:e)),C(new Date),W(N)}),n.on("ticket-generated",e=>{console.log("\ud83c\udfab New ticket generated:",e),b(t=>{var n;return on(on({},t),{},{[e.department._id]:on(on({},t[e.department._id]),{},{waitingCount:((null===(n=t[e.department._id])||void 0===n?void 0:n.waitingCount)||0)+1})})})}),n.on("queue-updated",e=>{console.log("\ud83d\udcca Queue updated:",e),b(t=>on(on({},t),{},{[e.departmentId]:e.queueData}))}),n.on("department-updated",()=>{console.log("\ud83c\udfe5 Department updated"),B()}),n.on("settings-updated",()=>{console.log("\u2699\ufe0f Settings updated"),z()}),n.on("counter-status-changed",e=>{console.log("\ud83d\udd04 Counter status changed:",e),j(t=>t.map(t=>t._id===e.counterId?on(on({},t),{},{status:e.status}):t)),W(N)})):console.log("Running in demo mode - no socket connection")},G=(e,t,n)=>{if(!I)return;speechSynthesis.cancel();const a="Token number ".concat(e,", please proceed to counter number ").concat(t," for ").concat(n);if("speechSynthesis"in window){const e=new SpeechSynthesisUtterance(a);e.lang=M,e.rate=.85,e.pitch=1.2,e.volume=1;const t=speechSynthesis.getVoices().filter(e=>!e.name.toLowerCase().includes("male")&&!e.name.toLowerCase().includes("david"));t.length>0&&(e.voice=t[0]),setTimeout(()=>{speechSynthesis.speak(e)},100)}},K=()=>{if(F.length>0&&O){const e=F.filter(e=>e.active);if(e.length>0)return e.map(e=>e.text)}const e=["QUALITY HEALTHCARE SERVICES AVAILABLE \u2022 EMERGENCY CASES PRIORITIZED \u2022 MAINTAIN SOCIAL DISTANCING","FREE HEALTH CHECKUP CAMP THIS WEEKEND \u2022 CONSULT OUR SPECIALISTS FOR EXPERT CARE \u2022 THANK YOU FOR YOUR PATIENCE","NEW CARDIOLOGY DEPARTMENT NOW OPEN \u2022 STATE-OF-THE-ART MEDICAL EQUIPMENT \u2022 24/7 EMERGENCY SERVICES AVAILABLE","PLEASE HAVE YOUR DOCUMENTS READY \u2022 KEEP THE WAITING AREA CLEAN \u2022 FOLLOW STAFF INSTRUCTIONS"];return U?[U,...e]:e},J=()=>{if(F.length>0&&O){const e=F.filter(e=>e.active);if(e.length>0)return e.map(e=>({type:e.type||"text",video:e.video,image:e.image,content:e.text,title:e.title||"Hospital Information",subtitle:e.subtitle||"Quality Healthcare Services"}))}return[{type:"text",content:"Welcome to "+P+" \u2022 Your Health is Our Top Priority \u2022 24/7 Emergency Services Available",title:"Quality Healthcare",subtitle:"Serving You with Excellence"}]},Y=J()[f];return(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme waiting-area-theme",children:[(0,Xt.jsx)("div",{className:"background-logo",children:D&&(0,Xt.jsx)("img",{src:D,alt:"Hospital Logo",className:"blured-logo"})}),(0,Xt.jsxs)("div",{className:"square-lines",children:[(0,Xt.jsx)("div",{className:"line horizontal top"}),(0,Xt.jsx)("div",{className:"line horizontal bottom"}),(0,Xt.jsx)("div",{className:"line vertical left"}),(0,Xt.jsx)("div",{className:"line vertical right"})]}),(0,Xt.jsxs)("div",{className:"corner-decorations",children:[(0,Xt.jsx)("div",{className:"corner top-left blue"}),(0,Xt.jsx)("div",{className:"corner top-right red"}),(0,Xt.jsx)("div",{className:"corner bottom-left red"}),(0,Xt.jsx)("div",{className:"corner bottom-right blue"})]}),(0,Xt.jsx)("audio",{ref:E,preload:"auto"}),m.map((e,t)=>(0,Xt.jsx)(Zn,{announcement:e,onClose:()=>{return t=e.ticketId,void p(e=>e.filter(e=>e.ticketId!==t));var t},index:t},e.ticketId)),(0,Xt.jsxs)("div",{className:"content-wrapper waiting-content-wrapper",children:[(0,Xt.jsxs)("div",{className:"dispenser-header-theme waiting-header-theme",children:[(0,Xt.jsxs)("div",{className:"hospital-brand-theme",children:[D?(0,Xt.jsx)("img",{src:D,alt:"Hospital Logo",className:"hospital-logo-theme"}):(0,Xt.jsx)("div",{className:"hospital-logo-theme-icon",children:(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"})}),(0,Xt.jsxs)("div",{className:"hospital-info-theme",children:[(0,Xt.jsx)("h1",{className:"hospital-name-theme white-text",children:P}),(0,Xt.jsx)("p",{className:"hospital-city-theme",children:L})]})]}),(0,Xt.jsxs)("div",{className:"header-status-theme",children:[(0,Xt.jsxs)("div",{className:"status-indicator-theme online",children:[(0,Xt.jsx)("i",{className:"fas fa-circle"}),n?"Live Connected":"Demo Mode"]}),(0,Xt.jsx)("div",{className:"current-time-theme",children:s.toLocaleTimeString()}),(0,Xt.jsxs)("div",{className:"last-update",children:["Updated: ",S.toLocaleTimeString()]})]})]}),c&&(0,Xt.jsx)("div",{className:"loading-overlay",children:(0,Xt.jsxs)("div",{className:"loading-content",children:[(0,Xt.jsx)("div",{className:"spinner-3d-animation"}),(0,Xt.jsx)("div",{className:"loading-text",children:"Loading Queue Data..."})]})}),(0,Xt.jsxs)("div",{className:"waiting-main-content",children:[(0,Xt.jsxs)("div",{className:"waiting-ad-panel",children:[(0,Xt.jsx)("div",{className:"ad-content-section",children:O?(0,Xt.jsxs)("div",{className:"ad-queue-container",children:[(0,Xt.jsxs)("div",{className:"ad-queue-header",children:[(0,Xt.jsxs)("h3",{className:"ad-queue-title",children:[(0,Xt.jsx)("i",{className:"fas fa-play-circle"}),"ADVERTISEMENTS"]}),(0,Xt.jsxs)("div",{className:"ad-queue-indicator",children:[f+1," / ",J().length]})]}),(0,Xt.jsx)("div",{className:"ad-content-queue",children:"video"===(null===Y||void 0===Y?void 0:Y.type)&&null!==Y&&void 0!==Y&&Y.video?(0,Xt.jsxs)("div",{className:"video-container",children:[(0,Xt.jsxs)("video",{ref:T,className:"ad-video",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,children:[(0,Xt.jsx)("source",{src:Y.video,type:"video/mp4"}),(0,Xt.jsx)("source",{src:Y.video,type:"video/webm"}),(0,Xt.jsx)("source",{src:Y.video,type:"video/ogg"}),"Your browser does not support the video tag."]},Y.video),(0,Xt.jsxs)("div",{className:"video-overlay",children:[(0,Xt.jsx)("h3",{className:"video-title",children:Y.title}),(0,Xt.jsx)("p",{className:"video-subtitle",children:Y.subtitle})]})]}):"image"===(null===Y||void 0===Y?void 0:Y.type)&&null!==Y&&void 0!==Y&&Y.image?(0,Xt.jsxs)("div",{className:"image-container",children:[(0,Xt.jsx)("img",{src:Y.image,alt:"Advertisement",className:"ad-image"},Y.image),(0,Xt.jsxs)("div",{className:"image-overlay",children:[(0,Xt.jsx)("h3",{className:"image-title",children:Y.title}),(0,Xt.jsx)("p",{className:"image-subtitle",children:Y.subtitle})]})]}):(0,Xt.jsx)("div",{className:"text-ad-container",children:(0,Xt.jsxs)("div",{className:"text-ad-content",children:[(0,Xt.jsx)("h3",{className:"text-ad-title",children:(null===Y||void 0===Y?void 0:Y.title)||"Hospital Information"}),(0,Xt.jsx)("p",{className:"text-ad-subtitle",children:(null===Y||void 0===Y?void 0:Y.subtitle)||"Quality Healthcare Services"}),(0,Xt.jsx)("div",{className:"text-ad-message",children:(null===Y||void 0===Y?void 0:Y.content)||"24/7 Emergency Services \u2022 Expert Medical Professionals \u2022 Modern Medical Equipment"})]})})})]}):(0,Xt.jsx)("div",{className:"default-ad-content",children:(0,Xt.jsxs)("div",{className:"ad-text-content",children:[(0,Xt.jsxs)("h2",{className:"ad-main-title",children:["Welcome to ",P]}),(0,Xt.jsx)("p",{className:"ad-main-subtitle",children:"Your Health is Our Top Priority"})]})})}),(0,Xt.jsx)("div",{className:"news-ticker-section",children:(0,Xt.jsxs)("div",{className:"ticker-container",children:[(0,Xt.jsx)("span",{className:"ticker-label",children:"ANNOUNCEMENT:"}),(0,Xt.jsx)("div",{className:"ticker-content",children:(0,Xt.jsx)("span",{className:"ticker-text",children:K()[o]})})]})})]}),(0,Xt.jsxs)("div",{className:"counter-queue-panel",children:[(0,Xt.jsxs)("div",{className:"panel-header-section",children:[(0,Xt.jsxs)("h2",{className:"panel-title",children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"}),"SERVICE COUNTERS"]}),(0,Xt.jsxs)("div",{className:"queue-summary",children:[(0,Xt.jsxs)("span",{className:"summary-item active",children:[w.filter(e=>"active"===e.status).length," Active"]}),(0,Xt.jsxs)("span",{className:"summary-item busy",children:[w.filter(e=>"busy"===e.status).length," Busy"]}),(0,Xt.jsxs)("span",{className:"summary-item total",children:[N.length," Total"]})]})]}),(0,Xt.jsx)("div",{className:"all-counters-grid",children:N.length>0?N.map(e=>(0,Xt.jsx)(Xn,{counter:e},e._id)):(0,Xt.jsxs)("div",{className:"no-active-counters",children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"}),(0,Xt.jsxs)("div",{className:"no-counters-text",children:[(0,Xt.jsx)("div",{children:"No Counters Available"}),(0,Xt.jsx)("div",{className:"counters-count",children:"Please configure counters in the admin panel"})]})]})})]})]})]})]})},ta=()=>{var e,t;const{counterId:n}=se(),a=ae(),s=en(),{settings:i}=mn(),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)([]),[m,p]=(0,r.useState)(!1),[f,g]=(0,r.useState)([]),[v,y]=(0,r.useState)(new Date),[x,b]=(0,r.useState)("connected"),[N,j]=(0,r.useState)(!1),[w,k]=(0,r.useState)([]),[S,C]=(0,r.useState)(""),[E,T]=(0,r.useState)(!1),[_,A]=(0,r.useState)("queue"),[P,D]=(0,r.useState)(!1),[L,R]=(0,r.useState)(!1),O=(null===i||void 0===i?void 0:i.themes)||{},I=O.primaryColor||"#1e3a8a",U=O.accentColor||"#dc2626",M=O.fontFamily||"Inter, sans-serif",F=(null===i||void 0===i?void 0:i.hospitalName)||"ALKHIDMAT RAAZI HOSPITAL",z=(null===i||void 0===i?void 0:i.hospitalLogo)||"",B=(null===i||void 0===i?void 0:i.hospitalCity)||"ISLAMABAD";(0,r.useEffect)(()=>(document.body.style.fontFamily=M,document.body.style.overflow="auto",Q(),V(),()=>{J()}),[n,M]);const q=()=>{Y("Reloading full page...","info"),window.location.reload()},W=()=>{j(!1),C("")},H=e=>{const t={emergency:{label:"Emergency",color:"#dc2626",icon:"fa-truck-medical"},priority:{label:"Priority",color:"#ea580c",icon:"fa-star"},senior:{label:"Senior",color:"#7c3aed",icon:"fa-user-tie"},child:{label:"Child",color:"#0891b2",icon:"fa-child"},normal:{label:"Normal",color:"#059669",icon:"fa-user"}};return t[e]||t.normal},V=async()=>{try{const e=await Yn.getDepartments();k(e.filter(e=>!1!==e.active))}catch(e){console.error("Failed to load departments:",e),Y("Failed to load departments","error")}},Q=async()=>{await $()&&(await G(),K())},$=async()=>{if(!xn.isAuthenticated())return a("/login/counter"),!1;const e=xn.getCurrentUser();return"counter"!==xn.getCurrentComponent()?(a("/login/counter"),!1):null===e||void 0===e||!e.counter||e.counter._id===n||e.counter===n||(alert("Access denied to this counter"),a("/counter/select"),!1)},G=async()=>{try{var e;p(!0);const t=await Yn.getCounterDetails(n);l(t.counter),d((null===(e=t.counter)||void 0===e?void 0:e.currentTicket)||null),h(t.queue||[]),Y("Counter data loaded successfully","success"),y(new Date)}catch(t){console.error("Failed to load counter data:",t),Y("Failed to load counter data","error"),b("disconnected")}finally{p(!1)}},K=()=>{if(!s)return Y("Running in offline mode","warning"),void b("disconnected");s.emit("join-counter",n),s.on("connect",()=>{b("connected"),Y("Real-time connection established","success"),G()}),s.on("disconnect",()=>{b("disconnected"),Y("Connection lost - offline mode","warning")}),s.on("counter-status-updated",e=>{e.counter._id===n&&(l(e.counter),d(e.activeTicket||null),Y("Counter status updated automatically","info"))}),s.on("ticket-status-updated",e=>{e.counter._id===n&&(G(),Y("Ticket status updated - auto reloaded","info"))}),s.on("call-request-completed",e=>{setTimeout(()=>{G(),Y("Call completed for ".concat(e.ticketNumber," - auto reloaded"),"success")},500)}),s.on("reload-all-counters",()=>{G(),Y("System update - auto reloaded","info")}),s.on("reload-counter-data",()=>{G(),Y("Manual reload triggered","info")}),s.on("full-page-reload",()=>{Y("Full page reload requested","info"),q()}),s.on("call-request-received",e=>{Y("Call request queued: ".concat(e.ticketNumber),"success")}),s.on("call-request-error",e=>{Y("Call request failed: ".concat(e.error),"error"),D(!1),R(!1)}),s.on("recall-request-received",e=>{Y("Recall request queued: ".concat(e.ticketNumber),"warning")}),s.on("recall-request-error",e=>{Y("Recall request failed: ".concat(e.error),"error"),D(!1),R(!1)}),s.on("token-completed",e=>{e.counter._id===n&&setTimeout(()=>{G(),Y("Ticket ".concat(e.ticket.ticketNumber," completed"),"success")},300)}),s.on("settings-updated",e=>{Y("Settings updated","info")})},J=()=>{s&&(s.off("counter-status-updated"),s.off("ticket-status-updated"),s.off("call-request-completed"),s.off("reload-all-counters"),s.off("reload-counter-data"),s.off("full-page-reload"),s.off("call-request-received"),s.off("call-request-error"),s.off("recall-request-received"),s.off("recall-request-error"),s.off("token-completed"),s.off("settings-updated"),s.off("connect"),s.off("disconnect"))},Y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";const n={id:Date.now()+Math.random(),message:e,type:t,timestamp:(new Date).toLocaleTimeString()};g(e=>[n,...e.slice(0,19)])},X=()=>u.length>0&&"active"===(null===o||void 0===o?void 0:o.status)&&!m&&!P&&!L;return m&&!o?(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme",children:[(0,Xt.jsx)("div",{className:"background-logo-container",children:z&&(0,Xt.jsx)("img",{src:z,alt:"Hospital Logo",className:"background-logo-blur"})}),(0,Xt.jsxs)("div",{className:"loading-container",children:[(0,Xt.jsx)("div",{className:"spinner-3d-animation"}),(0,Xt.jsx)("div",{className:"loading-text",children:"Initializing Counter Interface"}),(0,Xt.jsx)("div",{className:"loading-subtext",children:"Loading counter data and services..."})]})]}):o?(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme counter-panel-theme",children:[(0,Xt.jsx)("div",{className:"background-logo-container",children:z&&(0,Xt.jsx)("img",{src:z,alt:"Hospital Logo",className:"background-logo-blur"})}),N&&(0,Xt.jsx)("div",{className:"modal-overlay-container",children:(0,Xt.jsxs)("div",{className:"modal-content-panel",children:[(0,Xt.jsxs)("div",{className:"modal-header-section",children:[(0,Xt.jsx)("h3",{children:"Transfer Ticket"}),(0,Xt.jsx)("button",{className:"modal-close-btn",onClick:W,children:(0,Xt.jsx)("i",{className:"fas fa-times"})})]}),(0,Xt.jsxs)("div",{className:"modal-body-content",children:[(0,Xt.jsxs)("div",{className:"transfer-details",children:[(0,Xt.jsxs)("p",{children:["Transferring ticket: ",(0,Xt.jsx)("strong",{children:null===c||void 0===c?void 0:c.ticketNumber})]}),(0,Xt.jsxs)("p",{children:["Current Department: ",(0,Xt.jsx)("strong",{children:null===c||void 0===c||null===(e=c.department)||void 0===e?void 0:e.name})]})]}),(0,Xt.jsxs)("div",{className:"form-input-group",children:[(0,Xt.jsx)("label",{htmlFor:"department-selection",children:"Select New Department:"}),(0,Xt.jsxs)("select",{id:"department-selection",value:S,onChange:e=>C(e.target.value),className:"department-selection",children:[(0,Xt.jsx)("option",{value:"",children:"Select a department"}),w.filter(e=>{var t;return e._id!==(null===c||void 0===c||null===(t=c.department)||void 0===t?void 0:t._id)}).map(e=>(0,Xt.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,Xt.jsxs)("div",{className:"modal-footer-section",children:[(0,Xt.jsx)("button",{className:"action-btn secondary-btn",onClick:W,disabled:E,children:"Cancel"}),(0,Xt.jsx)("button",{className:"action-btn warning-btn",onClick:async()=>{if(c)if(S)try{T(!0),Y("Transferring ticket to ".concat(S,"..."),"info"),await Yn.transferTicket(n,S),Y("Transferred ticket ".concat(c.ticketNumber," to ").concat(S),"info"),j(!1),C(""),setTimeout(()=>{G()},500)}catch(a){var e,t;const n=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||a.message||"Unknown error";Y("Transfer failed: ".concat(n),"error")}finally{T(!1)}else Y("Please select a department to transfer to","warning");else Y("No active ticket to transfer","warning")},disabled:!S||E,children:E?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"}),"Transferring..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-exchange-alt"}),"Transfer Ticket"]})})]})]})}),(0,Xt.jsxs)("div",{className:"main-content-wrapper counter-panel-wrapper",children:[(0,Xt.jsxs)("div",{className:"panel-header-theme counter-panel-header",children:[(0,Xt.jsxs)("div",{className:"hospital-branding-theme",children:[z?(0,Xt.jsx)("img",{src:z,alt:"Hospital Logo",className:"hospital-logo-img"}):(0,Xt.jsx)("div",{className:"hospital-logo-placeholder",children:(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"})}),(0,Xt.jsxs)("div",{className:"hospital-details-theme",children:[(0,Xt.jsx)("h1",{className:"hospital-title-theme",children:F}),(0,Xt.jsx)("p",{className:"hospital-location-theme",children:B}),(0,Xt.jsx)("p",{className:"arabic-text-theme",children:"\u0627\u0644\u062e\u062f\u0645\u062a \u0631\u0627\u0632\u06cc \u06c1\u0633\u067e\u062a\u0627\u0644 \u0627\u0633\u0644\u0627\u0645 \u0622\u0628\u0627\u062f"})]})]}),(0,Xt.jsxs)("div",{className:"header-status-theme",children:[(0,Xt.jsxs)("div",{className:"counter-identification",children:[(0,Xt.jsxs)("div",{className:"counter-identifier-badge",style:{backgroundColor:I},children:[(0,Xt.jsx)("i",{className:"fas fa-desktop"}),"Counter ",o.counterNumber]}),(0,Xt.jsxs)("div",{className:"status-indicator-theme",style:{backgroundColor:(e=>{const t={active:"#059669",busy:"#dc2626",break:"#d97706",offline:"#6b7280"};return t[e]||t.offline})(o.status)},children:[(0,Xt.jsx)("i",{className:"fas fa-circle"}),"busy"===o.status?"Serving Patient":"active"===o.status?"Available":"break"===o.status?"On Break":"Offline"]})]}),(0,Xt.jsx)("div",{className:"current-time-display",children:v.toLocaleTimeString()})]})]}),(0,Xt.jsxs)("div",{className:"system-status-panel",children:[(0,Xt.jsxs)("div",{className:"system-status-info",children:[(0,Xt.jsxs)("div",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-broadcast-tower"}),"Voice System: ",(0,Xt.jsx)("strong",{children:"Centralized Dispenser"})]}),(0,Xt.jsxs)("div",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-network-wired"}),"Processing: ",(0,Xt.jsx)("strong",{children:"Sequential"})]}),(0,Xt.jsxs)("div",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-".concat("connected"===x?"wifi":"wifi-slash")}),"connected"===x?"Live Connected":"Offline Mode"]}),(P||L)&&(0,Xt.jsxs)("div",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-volume-up"}),(0,Xt.jsx)("strong",{children:"Action in Progress..."})]})]}),(0,Xt.jsxs)("button",{className:"display-action-btn",onClick:()=>{const e=window.location.origin,t="".concat(e,"/waiting/counter/").concat(n);window.open(t,"Waiting_".concat(n),"width=1400,height=900,location=no,menubar=no,toolbar=no")},children:[(0,Xt.jsx)("i",{className:"fas fa-external-link-alt"}),"Open Display"]})]}),(0,Xt.jsxs)("div",{className:"counter-dashboard-panel",children:[(0,Xt.jsxs)("div",{className:"dashboard-section-panel current-patient-panel",children:[(0,Xt.jsxs)("div",{className:"section-header-panel",children:[(0,Xt.jsx)("h2",{className:"section-title-text",children:"Current Patient"}),(0,Xt.jsxs)("div",{className:"queue-summary-info",children:[(0,Xt.jsxs)("span",{className:"queue-count-badge",children:[u.length," in queue"]}),(0,Xt.jsxs)("span",{className:"last-update-time",children:["Updated: ",v.toLocaleTimeString()]})]})]}),(0,Xt.jsx)("div",{className:"current-ticket-display-panel",children:c?(0,Xt.jsxs)("div",{className:"active-ticket-container",children:[(0,Xt.jsxs)("div",{className:"ticket-visual-display",children:[(0,Xt.jsx)("div",{className:"ticket-number-large-display",style:{color:U},children:c.ticketNumber}),(0,Xt.jsx)("div",{className:"ticket-status-text",children:"Now Serving"}),(0,Xt.jsxs)("div",{className:"system-notice",children:[(0,Xt.jsx)("i",{className:"fas fa-info-circle"}),"Voice announcement to centralized dispenser"]})]}),(0,Xt.jsx)("div",{className:"ticket-details-container",children:(0,Xt.jsxs)("div",{className:"details-grid-layout",children:[(0,Xt.jsxs)("div",{className:"detail-item-panel",children:[(0,Xt.jsx)("i",{className:"fas fa-building"}),(0,Xt.jsx)("label",{children:"Department"}),(0,Xt.jsx)("span",{children:null===(t=c.department)||void 0===t?void 0:t.name})]}),c.patientName&&(0,Xt.jsxs)("div",{className:"detail-item-panel",children:[(0,Xt.jsx)("i",{className:"fas fa-user"}),(0,Xt.jsx)("label",{children:"Patient Name"}),(0,Xt.jsx)("span",{children:c.patientName})]}),(0,Xt.jsxs)("div",{className:"detail-item-panel",children:[(0,Xt.jsx)("i",{className:"fas fa-flag"}),(0,Xt.jsx)("label",{children:"Priority"}),(0,Xt.jsxs)("span",{className:"priority-indicator-badge",style:{backgroundColor:H(c.priority).color},children:[(0,Xt.jsx)("i",{className:"fas ".concat(H(c.priority).icon)}),H(c.priority).label]})]}),(0,Xt.jsxs)("div",{className:"detail-item-panel",children:[(0,Xt.jsx)("i",{className:"fas fa-clock"}),(0,Xt.jsx)("label",{children:"Called Time"}),(0,Xt.jsx)("span",{children:c.calledAt?new Date(c.calledAt).toLocaleTimeString():"Recently"})]})]})})]}):(0,Xt.jsxs)("div",{className:"no-active-ticket",children:[(0,Xt.jsx)("div",{className:"no-ticket-visual",children:(0,Xt.jsx)("i",{className:"fas fa-user-clock"})}),(0,Xt.jsxs)("div",{className:"no-ticket-content",children:[(0,Xt.jsx)("h3",{children:"No Active Patient"}),(0,Xt.jsx)("p",{children:"Ready to serve next patient from queue"}),(0,Xt.jsx)("div",{className:"queue-status-info",children:u.length>0?"".concat(u.length," patients waiting in queue"):"Queue is currently empty"})]})]})})]}),(0,Xt.jsxs)("div",{className:"dashboard-section-panel control-actions-panel",children:[(0,Xt.jsxs)("div",{className:"section-header-panel",children:[(0,Xt.jsx)("h2",{className:"section-title-text",children:"Quick Actions"}),(0,Xt.jsxs)("div",{className:"system-notice-small",children:[(0,Xt.jsx)("i",{className:"fas fa-info-circle"}),"Sequential processing - One call at a time"]})]}),(0,Xt.jsxs)("div",{className:"control-buttons-grid",children:[(0,Xt.jsxs)("button",{className:"control-action-btn primary-action ".concat(X()?"":"disabled"),onClick:async()=>{if(0!==u.length)if("busy"!==(null===o||void 0===o?void 0:o.status))if(P||L)Y("Action already in progress","warning");else try{p(!0),D(!0),R(!0),Y("Calling next patient...","info");const e=u[0];s.emit("request-voice-call",{ticket:e,counter:o,isRecall:!1,source:"counter"}),Y("Call request sent: ".concat(e.ticketNumber),"success"),setTimeout(()=>{D(!1),R(!1)},3e3)}catch(n){var e,t;const a=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||n.message||"Unknown error";Y("Call failed: ".concat(a),"error"),D(!1),R(!1)}finally{p(!1)}else Y("Currently serving a patient","warning");else Y("No tickets in queue","warning")},disabled:!X(),children:[(0,Xt.jsx)("div",{className:"button-icon-container",children:m?(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"}):P?(0,Xt.jsx)("i",{className:"fas fa-volume-up"}):(0,Xt.jsx)("i",{className:"fas fa-phone"})}),(0,Xt.jsxs)("div",{className:"button-content-area",children:[(0,Xt.jsx)("span",{className:"button-title-text",children:P?"Calling...":"Call Next Patient"}),(0,Xt.jsxs)("span",{className:"button-subtitle-text",children:[u.length>0?"".concat(u.length," waiting"):"Queue empty",(P||L)&&" - Please wait"]})]}),u.length>0&&!P&&!L&&(0,Xt.jsx)("div",{className:"queue-count-indicator",children:u.length})]}),(0,Xt.jsxs)("button",{className:"control-action-btn accent-action",onClick:async()=>{if(c)if(P||L)Y("Action already in progress","warning");else try{p(!0),D(!0),R(!0),Y("Recalling current patient...","info"),s.emit("request-voice-recall",{ticket:c,counter:o,isRecall:!0,source:"counter"}),Y("Recall request sent: ".concat(c.ticketNumber),"warning"),setTimeout(()=>{D(!1),R(!1)},3e3)}catch(n){var e,t;const a=(null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||n.message||"Unknown error";Y("Recall failed: ".concat(a),"error"),D(!1),R(!1)}finally{p(!1)}else Y("No active ticket to recall","warning")},disabled:!(c&&!m&&!P&&!L),children:[(0,Xt.jsx)("div",{className:"button-icon-container",children:P?(0,Xt.jsx)("i",{className:"fas fa-volume-up"}):(0,Xt.jsx)("i",{className:"fas fa-redo"})}),(0,Xt.jsxs)("div",{className:"button-content-area",children:[(0,Xt.jsx)("span",{className:"button-title-text",children:P?"Recalling...":"Recall Patient"}),(0,Xt.jsx)("span",{className:"button-subtitle-text",children:P?"Voice in progress":"Voice from centralized dispenser"})]})]}),(0,Xt.jsxs)("button",{className:"control-action-btn warning-action",onClick:()=>{c?j(!0):Y("No active ticket to transfer","warning")},disabled:!c||m,children:[(0,Xt.jsx)("div",{className:"button-icon-container",children:(0,Xt.jsx)("i",{className:"fas fa-exchange-alt"})}),(0,Xt.jsxs)("div",{className:"button-content-area",children:[(0,Xt.jsx)("span",{className:"button-title-text",children:"Transfer Ticket"}),(0,Xt.jsx)("span",{className:"button-subtitle-text",children:"To another department"})]})]}),(0,Xt.jsxs)("button",{className:"control-action-btn success-action",onClick:async()=>{if(c)try{p(!0),Y("Completing current service...","info"),await Yn.completeTicket(n),Y("Completed ticket: ".concat(c.ticketNumber),"success"),setTimeout(()=>{G()},500)}catch(a){var e,t;const n=(null===(e=a.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||a.message||"Unknown error";Y("Completion failed: ".concat(n),"error")}finally{p(!1)}else Y("No active ticket to complete","warning")},disabled:!c||m,children:[(0,Xt.jsx)("div",{className:"button-icon-container",children:(0,Xt.jsx)("i",{className:"fas fa-check-double"})}),(0,Xt.jsxs)("div",{className:"button-content-area",children:[(0,Xt.jsx)("span",{className:"button-title-text",children:"Complete Service"}),(0,Xt.jsx)("span",{className:"button-subtitle-text",children:"Mark as done"})]})]}),(0,Xt.jsxs)("button",{className:"control-action-btn secondary-action",onClick:async()=>{try{p(!0),await G(),Y("Manual refresh completed","info")}finally{p(!1)}},disabled:m,children:[(0,Xt.jsx)("div",{className:"button-icon-container",children:m?(0,Xt.jsx)("i",{className:"fas fa-spinner fa-spin"}):(0,Xt.jsx)("i",{className:"fas fa-sync-alt"})}),(0,Xt.jsxs)("div",{className:"button-content-area",children:[(0,Xt.jsx)("span",{className:"button-title-text",children:"Refresh Data"}),(0,Xt.jsx)("span",{className:"button-subtitle-text",children:"Sync with server"})]})]}),(0,Xt.jsxs)("button",{className:"control-action-btn info-action",onClick:q,disabled:m,children:[(0,Xt.jsx)("div",{className:"button-icon-container",children:(0,Xt.jsx)("i",{className:"fas fa-redo-alt"})}),(0,Xt.jsxs)("div",{className:"button-content-area",children:[(0,Xt.jsx)("span",{className:"button-title-text",children:"Reload Page"}),(0,Xt.jsx)("span",{className:"button-subtitle-text",children:"Full page refresh"})]})]})]})]}),(0,Xt.jsxs)("div",{className:"dashboard-section-panel data-display-panel",children:[(0,Xt.jsxs)("div",{className:"panel-navigation-tabs",children:[(0,Xt.jsxs)("button",{className:"panel-tab-item ".concat("queue"===_?"active-tab":""),onClick:()=>A("queue"),children:[(0,Xt.jsx)("i",{className:"fas fa-list-ol"}),"Waiting Queue (",u.length,")"]}),(0,Xt.jsxs)("button",{className:"panel-tab-item ".concat("logs"===_?"active-tab":""),onClick:()=>A("logs"),children:[(0,Xt.jsx)("i",{className:"fas fa-history"}),"Activity Log (",f.length,")"]})]}),(0,Xt.jsxs)("div",{className:"panel-content-area",children:["queue"===_&&(0,Xt.jsx)("div",{className:"queue-display-panel",children:(0,Xt.jsxs)("div",{className:"queue-items-list",children:[u.slice(0,10).map((e,t)=>(0,Xt.jsxs)("div",{className:"queue-list-item",children:[(0,Xt.jsxs)("div",{className:"queue-position-indicator",children:["#",t+1]}),(0,Xt.jsxs)("div",{className:"queue-item-content",children:[(0,Xt.jsxs)("div",{className:"ticket-info-panel",children:[(0,Xt.jsx)("div",{className:"ticket-number-display",style:{color:"#dbe3e8"},children:e.ticketNumber}),e.patientName&&(0,Xt.jsx)("div",{className:"patient-name-display",children:e.patientName}),(0,Xt.jsx)("div",{className:"ticket-timestamp",children:new Date(e.generatedAt).toLocaleTimeString()})]}),(0,Xt.jsx)("div",{className:"priority-indicator-small",style:{backgroundColor:H(e.priority).color},title:H(e.priority).label,children:(0,Xt.jsx)("i",{className:"fas ".concat(H(e.priority).icon)})})]})]},e._id)),0===u.length&&(0,Xt.jsxs)("div",{className:"empty-state-message",children:[(0,Xt.jsx)("i",{className:"fas fa-check-circle"}),(0,Xt.jsx)("h4",{children:"Queue Complete"}),(0,Xt.jsx)("p",{children:"All patients have been served"})]})]})}),"logs"===_&&(0,Xt.jsxs)("div",{className:"activity-log-panel",children:[(0,Xt.jsxs)("div",{className:"activity-log-list",children:[f.map(e=>(0,Xt.jsxs)("div",{className:"log-entry-item ".concat(e.type),children:[(0,Xt.jsx)("div",{className:"log-timestamp",children:e.timestamp}),(0,Xt.jsx)("div",{className:"log-content",children:(0,Xt.jsx)("div",{className:"log-message",children:e.message})}),(0,Xt.jsx)("div",{className:"log-type-icon ".concat(e.type),children:(0,Xt.jsx)("i",{className:"fas ".concat("success"===e.type?"fa-check-circle":"error"===e.type?"fa-exclamation-circle":"warning"===e.type?"fa-exclamation-triangle":"fa-info-circle")})})]},e.id)),0===f.length&&(0,Xt.jsxs)("div",{className:"empty-state-message",children:[(0,Xt.jsx)("i",{className:"fas fa-history"}),(0,Xt.jsx)("h4",{children:"No Activities"}),(0,Xt.jsx)("p",{children:"Activities will appear here as you use the system"})]})]}),f.length>0&&(0,Xt.jsx)("div",{className:"panel-footer-section",children:(0,Xt.jsxs)("button",{onClick:()=>g([]),className:"clear-all-btn",children:[(0,Xt.jsx)("i",{className:"fas fa-trash"})," Clear All"]})})]})]})]})]}),(0,Xt.jsx)("div",{className:"panel-footer-theme counter-panel-footer",children:(0,Xt.jsxs)("div",{className:"footer-content-theme",children:[(0,Xt.jsxs)("div",{className:"system-info-theme",children:[F," \u2022 Counter ",o.counterNumber," \u2022 Sequential Processing"]}),(0,Xt.jsxs)("div",{className:"system-status-info",children:[(0,Xt.jsxs)("span",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-ticket-alt"}),o.ticketsServedToday||0," served today"]}),(0,Xt.jsxs)("span",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-microphone-alt"}),"Sequential Call Mode"]}),(0,Xt.jsxs)("span",{className:"status-info-item",children:[(0,Xt.jsx)("i",{className:"fas fa-clock"}),"Last refresh: ",v.toLocaleTimeString()]})]})]})})]})]}):(0,Xt.jsx)("div",{className:"theme-container dark-blue-theme",children:(0,Xt.jsxs)("div",{className:"error-display",children:[(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,Xt.jsx)("h2",{children:"Counter Not Available"}),(0,Xt.jsxs)("div",{className:"error-details",children:[(0,Xt.jsxs)("p",{children:[(0,Xt.jsx)("strong",{children:"Counter ID:"})," ",n]}),(0,Xt.jsxs)("p",{children:[(0,Xt.jsx)("strong",{children:"Error:"})," Counter not found or unavailable"]})]}),(0,Xt.jsxs)("div",{className:"error-actions",children:[(0,Xt.jsxs)("button",{onClick:G,className:"action-btn primary-btn",children:[(0,Xt.jsx)("i",{className:"fas fa-redo"})," Retry Connection"]}),(0,Xt.jsxs)("button",{onClick:()=>a("/counter/select"),className:"action-btn secondary-btn",children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-left"})," Select Different Counter"]})]})]})})},na=()=>{const e=ae(),{settings:t}=mn(),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),c=(null===t||void 0===t?void 0:t.themes)||{},d=(c.primaryColor,c.accentColor||"#dc2626"),u=c.fontFamily||"Inter, sans-serif",h=(null===t||void 0===t?void 0:t.hospitalName)||"ALKHIDMAT RAAZI HOSPITAL",m=(null===t||void 0===t?void 0:t.hospitalLogo)||"",p=(null===t||void 0===t?void 0:t.hospitalCity)||"ISLAMABAD";(0,r.useEffect)(()=>{document.body.style.fontFamily=u,document.body.style.overflow="auto",f()},[u]);const f=async()=>{try{i(!0);const e=await vn.getCounters(),t=xn.getCurrentUser();let n=e;null!==t&&void 0!==t&&t.counter&&(n=e.filter(e=>e._id===t.counter._id||e._id===t.counter)),a(n)}catch(e){console.error("Error loading counters:",e)}finally{i(!1)}};return s?(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme",children:[(0,Xt.jsx)("div",{className:"background-logo-container",children:m&&(0,Xt.jsx)("img",{src:m,alt:"Hospital Logo",className:"background-logo-blur"})}),(0,Xt.jsxs)("div",{className:"border-lines-container",children:[(0,Xt.jsx)("div",{className:"border-line horizontal-line top-line"}),(0,Xt.jsx)("div",{className:"border-line horizontal-line bottom-line"}),(0,Xt.jsx)("div",{className:"border-line vertical-line left-line"}),(0,Xt.jsx)("div",{className:"border-line vertical-line right-line"})]}),(0,Xt.jsxs)("div",{className:"corner-elements",children:[(0,Xt.jsx)("div",{className:"corner-element top-left-corner blue-corner"}),(0,Xt.jsx)("div",{className:"corner-element top-right-corner red-corner"}),(0,Xt.jsx)("div",{className:"corner-element bottom-left-corner red-corner"}),(0,Xt.jsx)("div",{className:"corner-element bottom-right-corner blue-corner"})]}),(0,Xt.jsxs)("div",{className:"loading-spinner-container",children:[(0,Xt.jsx)("div",{className:"spinner-3d-animation"}),(0,Xt.jsx)("div",{className:"loading-text-content",children:"Loading Counters..."})]})]}):(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme counter-selection-panel",children:[(0,Xt.jsx)("div",{className:"background-logo-container",children:m&&(0,Xt.jsx)("img",{src:m,alt:"Hospital Logo",className:"background-logo-blur"})}),(0,Xt.jsxs)("div",{className:"border-lines-container",children:[(0,Xt.jsx)("div",{className:"border-line horizontal-line top-line"}),(0,Xt.jsx)("div",{className:"border-line horizontal-line bottom-line"}),(0,Xt.jsx)("div",{className:"border-line vertical-line left-line"}),(0,Xt.jsx)("div",{className:"border-line vertical-line right-line"})]}),(0,Xt.jsxs)("div",{className:"corner-elements",children:[(0,Xt.jsx)("div",{className:"corner-element top-left-corner blue-corner"}),(0,Xt.jsx)("div",{className:"corner-element top-right-corner red-corner"}),(0,Xt.jsx)("div",{className:"corner-element bottom-left-corner red-corner"}),(0,Xt.jsx)("div",{className:"corner-element bottom-right-corner blue-corner"})]}),(0,Xt.jsxs)("div",{className:"main-content-wrapper counter-selection-content",children:[(0,Xt.jsxs)("div",{className:"panel-header-theme selection-panel-header",children:[(0,Xt.jsxs)("div",{className:"hospital-branding-theme",children:[m?(0,Xt.jsx)("img",{src:m,alt:"Hospital Logo",className:"hospital-logo-img"}):(0,Xt.jsx)("div",{className:"hospital-logo-placeholder",children:(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"})}),(0,Xt.jsxs)("div",{className:"hospital-details-theme",children:[(0,Xt.jsx)("h1",{className:"hospital-title-theme",children:h}),(0,Xt.jsx)("p",{className:"hospital-location-theme",children:p}),(0,Xt.jsx)("p",{className:"arabic-text-theme",children:"\u0627\u0644\u062e\u062f\u0645\u062a \u0631\u0627\u0632\u06cc \u06c1\u0633\u067e\u062a\u0627\u0644 \u0627\u0633\u0644\u0627\u0645 \u0622\u0628\u0627\u062f"})]})]}),(0,Xt.jsxs)("div",{className:"header-status-theme",children:[(0,Xt.jsxs)("div",{className:"status-indicator-theme online-status",children:[(0,Xt.jsx)("i",{className:"fas fa-circle"}),"System Online"]}),(0,Xt.jsx)("div",{className:"current-time-display",children:(new Date).toLocaleTimeString()})]})]}),(0,Xt.jsxs)("div",{className:"selection-main-panel",children:[(0,Xt.jsxs)("div",{className:"section-header-panel",children:[(0,Xt.jsx)("h2",{className:"section-title-panel",children:"Select Counter"}),(0,Xt.jsx)("p",{className:"section-subtitle-panel",children:"Choose the counter you want to operate"})]}),(0,Xt.jsx)("div",{className:"counters-grid-panel",children:n.map((t,n)=>{var a;return(0,Xt.jsxs)("div",{className:"counter-selection-card ".concat(t.status," ").concat((null===o||void 0===o?void 0:o._id)===t._id?"selected-counter":""),style:{animationDelay:"".concat(.1*n,"s")},onClick:()=>(t=>{l(t),e("/counter/".concat(t._id))})(t),children:[(0,Xt.jsxs)("div",{className:"card-header-section",children:[(0,Xt.jsxs)("div",{className:"counter-number-display",children:["Counter ",t.counterNumber]}),(0,Xt.jsx)("div",{className:"status-indicator ".concat(t.status),children:(0,Xt.jsx)("div",{className:"status-indicator-dot"})})]}),(0,Xt.jsxs)("div",{className:"counter-details-section",children:[(0,Xt.jsx)("div",{className:"counter-name-display",children:t.name}),(0,Xt.jsx)("div",{className:"department-name",children:null===(a=t.department)||void 0===a?void 0:a.name})]}),t.currentTicket&&(0,Xt.jsxs)("div",{className:"current-ticket-section",children:[(0,Xt.jsx)("div",{className:"ticket-label-text",children:"Current Token:"}),(0,Xt.jsx)("div",{className:"ticket-number-display",style:{color:d},children:t.currentTicket.ticketNumber})]}),(0,Xt.jsxs)("div",{className:"selection-footer-section",children:[(0,Xt.jsx)("span",{className:"status-text-label ".concat(t.status),children:t.status.charAt(0).toUpperCase()+t.status.slice(1)}),(0,Xt.jsxs)("button",{className:"counter-select-button",children:[(0,Xt.jsx)("i",{className:"fas fa-arrow-right"})," Select Counter"]})]})]},t._id)})}),0===n.length&&(0,Xt.jsxs)("div",{className:"empty-state-panel",children:[(0,Xt.jsx)("div",{className:"empty-state-icon",children:(0,Xt.jsx)("i",{className:"fas fa-desktop"})}),(0,Xt.jsx)("h3",{children:"No Counters Available"}),(0,Xt.jsx)("p",{children:"You don't have access to any counters or no counters are configured."}),(0,Xt.jsx)("p",{children:"Please contact administrator for counter access."})]})]}),(0,Xt.jsx)("div",{className:"panel-footer-theme selection-panel-footer",children:(0,Xt.jsxs)("div",{className:"footer-content-section",children:[(0,Xt.jsxs)("div",{className:"system-info-text",children:[h," \u2022 Queue Management System v1.0"]}),(0,Xt.jsxs)("button",{className:"logout-action-button",onClick:()=>{xn.logout()},children:[(0,Xt.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})]})})]})]})},aa={async getDisplay(e){try{console.log("\ud83d\udcfa Fetching display configuration for ".concat(e,"..."));const t=await cn.get("/displays/".concat(e));return console.log("\u2705 Display configuration loaded:",t),t}catch(t){return console.error("\u274c Error fetching display configuration:",t),{_id:e,displayId:e,name:"Waiting Area Display",type:"waiting",location:"Main Hall",settings:{showLogo:!0,showAds:!0,theme:"default",customMessage:"Welcome to Razi Hospital - Quality Healthcare Services",adInterval:30,backgroundColor:"#1a5276",textColor:"#ffffff",fontSize:"medium"},active:!0,lastUpdated:new Date}}},async getDisplayData(e){try{console.log("\ud83d\udcca Fetching live data for display ".concat(e,"..."));const t=await cn.get("/displays/".concat(e,"/data"));if(t.counters&&Array.isArray(t.counters)){const e=t.counters.filter(e=>e&&("active"===e.status||"busy"===e.status));console.log("\u2705 Filtered ".concat(e.length," active counters from ").concat(t.counters.length," total")),t.counters=e}return t.currentTickets=t.currentTickets||[],t.departmentCounts=t.departmentCounts||[],t.counters=t.counters||[],console.log("\u2705 Display data loaded successfully:",{currentTickets:t.currentTickets.length,departmentCounts:t.departmentCounts.length,counters:t.counters.length}),t}catch(t){console.error("\u274c Error fetching display data:",t);const n=[{_id:"counter-1",counterNumber:1,status:"busy",name:"Counter 01",currentTicket:{_id:"ticket-1",ticketNumber:"G101",patientName:"John Doe",calledAt:new Date,department:{name:"General OPD",code:"general"}},department:{name:"General OPD",code:"general",prefix:"G"}},{_id:"counter-2",counterNumber:2,status:"active",name:"Counter 02",currentTicket:null,department:{name:"Cardiology",code:"cardiology",prefix:"C"}},{_id:"counter-3",counterNumber:3,status:"busy",name:"Counter 03",currentTicket:{_id:"ticket-2",ticketNumber:"O205",patientName:"Jane Smith",calledAt:new Date(Date.now()-3e5),department:{name:"Orthopedics",code:"ortho"}},department:{name:"Orthopedics",code:"ortho",prefix:"O"}}],a={currentTickets:[{_id:"current-1",ticketNumber:"G101",department:{name:"General OPD",code:"general"},assignedCounter:{counterNumber:1,name:"Counter 01"},calledAt:new Date,patientName:"John Doe"},{_id:"current-2",ticketNumber:"O205",department:{name:"Orthopedics",code:"ortho"},assignedCounter:{counterNumber:3,name:"Counter 03"},calledAt:new Date(Date.now()-3e5),patientName:"Jane Smith"}],departmentCounts:[{_id:"1",name:"General OPD",waitingCount:8},{_id:"2",name:"Cardiology",waitingCount:4},{_id:"3",name:"Orthopedics",waitingCount:3},{_id:"4",name:"Pediatrics",waitingCount:6},{_id:"5",name:"Emergency",waitingCount:1}],counters:n,display:{_id:e,name:"Waiting Area Display",type:"waiting",settings:{showLogo:!0,showAds:!0,theme:"default",customMessage:"Please wait for your number to be called",adInterval:30}},lastUpdated:new Date,isFallbackData:!0};return console.log("\ud83d\udccb Using enhanced fallback display data"),a}},async updateDisplay(e,t){try{console.log("\u2699\ufe0f Updating display ".concat(e," settings..."));const n=await cn.put("/displays/".concat(e),t);return console.log("\u2705 Display settings updated successfully"),n}catch(n){throw console.error("\u274c Error updating display:",n),n}},async getAllDisplays(){try{console.log("\ud83d\udcfa Fetching all displays...");const e=await cn.get("/displays");return console.log("\u2705 ".concat(e.length," displays loaded")),e}catch(e){return console.error("\u274c Error fetching displays:",e),[{_id:"main-waiting",displayId:"main-waiting",name:"Main Waiting Area Display",type:"waiting",location:"Main Hall",settings:{theme:"default",showAds:!0,showLogo:!0,customMessage:"Welcome to Razi Hospital",adInterval:30},active:!0},{_id:"reception-1",displayId:"reception-1",name:"Reception Display 1",type:"counter",location:"Reception Area",settings:{theme:"professional",showAds:!1,showLogo:!0,customMessage:"Reception - Please approach counter",adInterval:0},active:!0},{_id:"department-opd",displayId:"department-opd",name:"OPD Department Display",type:"department",location:"OPD Wing",settings:{theme:"medical",showAds:!0,showLogo:!0,customMessage:"General OPD Department",adInterval:45},active:!0}]}},validateDisplaySettings:e=>on(on({},{showLogo:!0,showAds:!0,theme:"default",customMessage:"",adInterval:30,backgroundColor:"#ffffff",textColor:"#000000",fontSize:"medium"}),e),async getDisplaysByType(e){try{return(await this.getAllDisplays()).filter(t=>t.type===e)}catch(t){return console.error("Error filtering displays by type:",t),[]}}},sa=e=>{let{data:t}=e;return(0,Xt.jsx)("div",{className:"waiting-display",children:(0,Xt.jsxs)("div",{className:"now-serving",children:[(0,Xt.jsx)("h2",{children:"NOW SERVING"}),(0,Xt.jsx)("div",{className:"current-tickets",children:t.currentTickets.map(e=>{var t;return(0,Xt.jsxs)("div",{className:"serving-ticket",children:[(0,Xt.jsx)("div",{className:"ticket-number-large",children:e.ticketNumber}),(0,Xt.jsxs)("div",{className:"ticket-info",children:[(0,Xt.jsxs)("div",{children:["Counter ",null===(t=e.assignedCounter)||void 0===t?void 0:t.counterNumber]}),(0,Xt.jsx)("div",{children:e.department.name})]})]},e._id)})})]})})},ra=e=>{let{data:t,counterId:n}=e;const a=t.counters.find(e=>e._id===n);return(0,Xt.jsxs)("div",{className:"counter-display",children:[(0,Xt.jsxs)("div",{className:"counter-info",children:[(0,Xt.jsxs)("div",{className:"counter-number-large",children:["Counter ",null===a||void 0===a?void 0:a.counterNumber]}),(0,Xt.jsx)("div",{className:"counter-status",children:null===a||void 0===a?void 0:a.status})]}),(null===a||void 0===a?void 0:a.currentTicket)&&(0,Xt.jsxs)("div",{className:"current-ticket-display",children:[(0,Xt.jsx)("div",{className:"ticket-number-xlarge",children:a.currentTicket.ticketNumber}),(0,Xt.jsx)("div",{className:"department-name",children:a.department.name})]})]})},ia=e=>{let{data:t,settings:n}=e;return(0,Xt.jsxs)("div",{className:"custom-display",children:[(0,Xt.jsx)("h2",{children:"Custom Display"}),(0,Xt.jsx)("div",{children:"Configure this display in admin settings"})]})},oa=()=>{const{id:e}=se(),t=en(),[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(null);(0,r.useEffect)(()=>{o(),l()},[e]);const o=async()=>{try{const t=await aa.getDisplay(e),n=await aa.getDisplayData(e);a(t),i(n)}catch(t){console.error("Error loading display:",t)}},l=()=>{t&&(t.emit("join-display",e),t.on("ticket-called",()=>{o()}),t.on("ticket-completed",()=>{o()}),t.on("display-updated",t=>{t._id===e&&a(t)}))};return n&&s?(0,Xt.jsxs)("div",{className:"display-screen ".concat(n.settings.theme),children:[n.settings.showLogo&&(0,Xt.jsx)("div",{className:"display-header",children:(0,Xt.jsxs)("div",{className:"hospital-logo",children:[(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"}),(0,Xt.jsx)("h1",{children:"Razi Hospital"})]})}),(0,Xt.jsxs)("div",{className:"display-content",children:["waiting"===n.type&&(0,Xt.jsx)(sa,{data:s}),"counter"===n.type&&(0,Xt.jsx)(ra,{data:s,counterId:n.counter}),"custom"===n.type&&(0,Xt.jsx)(ia,{data:s,settings:n.settings})]}),n.settings.showAds&&(0,Xt.jsx)("div",{className:"advertisement-section",children:(0,Xt.jsx)("div",{className:"ad-content",children:(0,Xt.jsx)("p",{children:"Quality Healthcare Services"})})})]}):(0,Xt.jsx)("div",{children:"Loading display..."})},la=()=>{const{displayId:e="reception-1"}=se(),t=en(),{settings:n}=mn(),[a,s]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)({});(0,r.useEffect)(()=>{d(),u()},[e]);const d=async()=>{try{var t;const n=await aa.getDisplayData(e);s(n.currentTickets||[]),o(n.departmentCounts||[]),null!==(t=n.display)&&void 0!==t&&t.settings&&c(n.display.settings)}catch(n){console.error("Error loading display data:",n)}},u=()=>{t&&(t.emit("join-display",e),t.on("token-called",()=>{d()}),t.on("token-completed",()=>{d()}),t.on("ticket-generated",()=>{d()}))};return(0,Xt.jsxs)("div",{className:"reception-display ".concat(l.theme||"default"),children:[l.showLogo&&(0,Xt.jsx)("div",{className:"display-header",children:(0,Xt.jsxs)("div",{className:"hospital-branding",children:[(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"}),(0,Xt.jsxs)("div",{className:"hospital-info",children:[(0,Xt.jsx)("h1",{children:(null===n||void 0===n?void 0:n.hospitalName)||"Razi Hospital"}),(0,Xt.jsx)("p",{children:"Reception Display"})]})]})}),(0,Xt.jsxs)("div",{className:"reception-content",children:[(0,Xt.jsxs)("div",{className:"now-serving-section",children:[(0,Xt.jsxs)("h2",{className:"section-title",children:[(0,Xt.jsx)("i",{className:"fas fa-bullhorn"}),"NOW SERVING"]}),(0,Xt.jsxs)("div",{className:"current-tickets",children:[a.map(e=>{var t,n;return(0,Xt.jsxs)("div",{className:"serving-ticket",children:[(0,Xt.jsx)("div",{className:"ticket-number",children:e.ticketNumber}),(0,Xt.jsxs)("div",{className:"ticket-details",children:[(0,Xt.jsx)("div",{className:"department",children:null===(t=e.department)||void 0===t?void 0:t.name}),(0,Xt.jsxs)("div",{className:"counter",children:["Counter ",null===(n=e.assignedCounter)||void 0===n?void 0:n.counterNumber]})]})]},e._id)}),0===a.length&&(0,Xt.jsxs)("div",{className:"no-active-calls",children:[(0,Xt.jsx)("div",{className:"placeholder",children:"No active calls"}),(0,Xt.jsx)("div",{className:"subtext",children:"Please wait for your number"})]})]})]}),(0,Xt.jsxs)("div",{className:"queues-section",children:[(0,Xt.jsx)("h3",{className:"section-title",children:"Department Queues"}),(0,Xt.jsx)("div",{className:"queues-grid",children:i.map(e=>(0,Xt.jsxs)("div",{className:"queue-card",children:[(0,Xt.jsx)("div",{className:"dept-name",children:e.name}),(0,Xt.jsx)("div",{className:"waiting-count",children:e.waitingCount||0}),(0,Xt.jsx)("div",{className:"waiting-text",children:"Waiting"})]},e._id))})]}),l.showAds&&(0,Xt.jsx)("div",{className:"advertisement-section",children:(0,Xt.jsx)("div",{className:"ad-content",children:(0,Xt.jsx)("p",{children:"Quality Healthcare Services | Emergency: 24/7 | Pharmacy: Open"})})}),l.customMessage&&(0,Xt.jsx)("div",{className:"custom-message",children:l.customMessage})]})]})},ca=e=>({general:"user-md",cardiology:"heartbeat",ortho:"bone",pediatrics:"baby",dental:"tooth",eye:"eye",emergency:"ambulance",lab:"flask",pharmacy:"pills"}[e]||"user-md"),da=()=>{var e;const{deptCode:t}=se(),n=en(),{settings:a}=mn(),[s,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)([]);(0,r.useEffect)(()=>{u(),h()},[t]);const u=async()=>{try{const e=await Jn.getDepartmentByCode(t);i(e);const n=await Jn.getQueue(e._id);d(n);const a=n.find(e=>"called"===e.status);l(a)}catch(e){console.error("Error loading department data:",e)}},h=()=>{n&&(n.emit("join-department",t),n.on("token-called",e=>{e.ticket.department.code===t&&(l(e.ticket),u())}),n.on("token-completed",e=>{e.ticket.department.code===t&&(l(null),u())}))};return(0,Xt.jsxs)("div",{className:"department-display",children:[(0,Xt.jsx)("div",{className:"dept-header",children:(0,Xt.jsxs)("div",{className:"dept-branding",children:[(0,Xt.jsx)("i",{className:"fas fa-".concat(ca(t))}),(0,Xt.jsxs)("div",{className:"dept-info",children:[(0,Xt.jsxs)("h1",{children:[(null===s||void 0===s?void 0:s.name)||t.toUpperCase()," Department"]}),(0,Xt.jsx)("p",{children:(null===a||void 0===a?void 0:a.hospitalName)||"Razi Hospital"})]})]})}),(0,Xt.jsxs)("div",{className:"dept-content",children:[(0,Xt.jsxs)("div",{className:"current-serving",children:[(0,Xt.jsx)("h2",{className:"serving-title",children:"NOW SERVING"}),o?(0,Xt.jsxs)("div",{className:"serving-ticket-large",children:[(0,Xt.jsx)("div",{className:"ticket-number-xlarge",children:o.ticketNumber}),(0,Xt.jsxs)("div",{className:"ticket-counter",children:["Counter ",null===(e=o.assignedCounter)||void 0===e?void 0:e.counterNumber]}),o.patientName&&(0,Xt.jsxs)("div",{className:"patient-name",children:["Patient: ",o.patientName]})]}):(0,Xt.jsxs)("div",{className:"no-serving",children:[(0,Xt.jsx)("div",{className:"placeholder-xlarge",children:"---"}),(0,Xt.jsx)("div",{className:"subtext",children:"Please wait"})]})]}),(0,Xt.jsxs)("div",{className:"upcoming-queue",children:[(0,Xt.jsx)("h3",{className:"queue-title",children:"Next in Line"}),(0,Xt.jsxs)("div",{className:"queue-list",children:[c.slice(0,5).map(e=>(0,Xt.jsxs)("div",{className:"queue-item",children:[(0,Xt.jsx)("span",{className:"queue-number",children:e.ticketNumber}),(0,Xt.jsx)("span",{className:"queue-time",children:new Date(e.generatedAt).toLocaleTimeString()})]},e._id)),0===c.length&&(0,Xt.jsx)("div",{className:"empty-queue",children:"No patients waiting"})]})]}),(0,Xt.jsxs)("div",{className:"dept-stats",children:[(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsx)("div",{className:"stat-value",children:c.length}),(0,Xt.jsx)("div",{className:"stat-label",children:"Waiting"})]}),(0,Xt.jsxs)("div",{className:"stat-card",children:[(0,Xt.jsxs)("div",{className:"stat-value",children:[(null===s||void 0===s?void 0:s.estimatedWaitTime)||15,"m"]}),(0,Xt.jsx)("div",{className:"stat-label",children:"Avg. Wait"})]})]})]})]})},ua=()=>{const{counterId:e}=se(),t=en(),{settings:n}=mn(),[a,s]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),h=(0,r.useRef)(null),m=(null===n||void 0===n?void 0:n.themes)||{},p=(m.primaryColor,m.accentColor,m.fontFamily||"Inter, sans-serif"),f=(null===n||void 0===n?void 0:n.hospitalName)||"ALKHIDMAT RAAZI HOSPITAL",g=(null===n||void 0===n?void 0:n.hospitalLogo)||"",v=(null===n||void 0===n?void 0:n.hospitalCity)||"ISLAMABAD";(0,r.useEffect)(()=>(console.log("\ud83c\udfaf IndividualWaitingScreenRenamed mounted for counter:",e),document.body.style.fontFamily=p,document.body.style.overflow="hidden",N(),j(),y(),()=>{t&&(t.off("counter-updated"),t.off("token-called"),t.off("token-completed"),t.off("token-recalled"),t.off("settings-updated")),x()}),[e,t,p]);const y=()=>{h.current&&clearInterval(h.current),h.current=setInterval(()=>{b()},5e3)},x=()=>{h.current&&(clearInterval(h.current),h.current=null)},b=async()=>{try{var t;const r=await Yn.getCounterDetails(e);var n;if(JSON.stringify(a)!==JSON.stringify(r.counter)||JSON.stringify(i)!==JSON.stringify(null===(t=r.counter)||void 0===t?void 0:t.currentTicket))s(r.counter),o((null===(n=r.counter)||void 0===n?void 0:n.currentTicket)||null),console.log("\ud83d\udd04 Auto-refresh: Counter data updated")}catch(r){console.log("Auto-refresh failed:",r.message)}},N=async()=>{try{var t;let a;c(!0),u(null),console.log("\ud83d\udd04 Loading counter data for:",e);try{a=await Yn.getCounterDetails(e),console.log("\u2705 Counter data loaded from API:",a)}catch(n){console.warn("\u26a0\ufe0f API failed, using mock data:",n),a={counter:{_id:e,counterNumber:parseInt(e)||1,name:"Counter ".concat(parseInt(e)||1),department:{_id:"1",name:"General OPD",code:"GENERAL"},status:"active",currentTicket:{_id:"mock_ticket_1",ticketNumber:"A101",patientName:"John Doe",calledAt:new Date,priority:"normal",department:{name:"General OPD"}},lastActivity:new Date},queue:[],waitingCount:0}}s(a.counter),o((null===(t=a.counter)||void 0===t?void 0:t.currentTicket)||null)}catch(a){console.error("\u274c Error loading counter data:",a),u(a.message)}finally{c(!1)}},j=()=>{t?(console.log("\ud83d\udd0c Setting up socket listeners for counter:",e),t.emit("join-counter",e),t.on("counter-updated",t=>{console.log("\ud83d\udd04 Counter updated:",t),t._id===e&&(s(t),o(t.currentTicket||null))}),t.on("token-called",t=>{console.log("\ud83d\udce2 Token called:",t),t.counter._id===e&&(s(t.counter),o(t.ticket))}),t.on("token-completed",t=>{console.log("\u2705 Token completed:",t),t.counter._id===e&&(s(t.counter),o(null))}),t.on("token-recalled",t=>{console.log("\ud83d\udd01 Token recalled:",t),t.counter._id===e&&(s(t.counter),o(t.ticket))}),t.on("voice-call-initiated",t=>{t.counterId===e&&setTimeout(()=>{N()},1e3)}),t.on("call-request-completed",t=>{t.counterId===e&&setTimeout(()=>{N()},500)}),t.on("connect",()=>{console.log("\ud83d\udd17 Socket connected"),t.emit("join-counter",e)}),t.on("disconnect",()=>{console.log("\ud83d\udd0c Socket disconnected")})):console.warn("\u26a0\ufe0f Socket not available for real-time updates")};return l?(0,Xt.jsx)("div",{className:"theme-container dark-blue-theme",children:(0,Xt.jsxs)("div",{className:"loading-spinner-container",children:[(0,Xt.jsx)("div",{className:"spinner-3d-animation"}),(0,Xt.jsx)("div",{className:"loading-text-content",children:"Loading Counter Display..."})]})}):d||!a?(0,Xt.jsx)("div",{className:"theme-container dark-blue-theme",children:(0,Xt.jsxs)("div",{className:"error-message-container",children:[(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"}),(0,Xt.jsx)("h2",{children:"Counter Not Available"}),(0,Xt.jsxs)("div",{className:"error-details-container",children:[(0,Xt.jsxs)("p",{children:[(0,Xt.jsx)("strong",{children:"Counter ID:"})," ",e]}),(0,Xt.jsxs)("p",{children:[(0,Xt.jsx)("strong",{children:"Error:"})," ",d||"Counter not found"]})]}),(0,Xt.jsx)("div",{className:"error-actions-container",children:(0,Xt.jsxs)("button",{onClick:N,className:"action-button primary-button",children:[(0,Xt.jsx)("i",{className:"fas fa-redo"})," Retry"]})})]})}):(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme individual-waiting-panel",children:[(0,Xt.jsx)("div",{className:"background-logo-container",children:g&&(0,Xt.jsx)("img",{src:g,alt:"Hospital Logo",className:"background-logo-blur"})}),(0,Xt.jsxs)("div",{className:"border-lines-container",children:[(0,Xt.jsx)("div",{className:"border-line horizontal-line top-line"}),(0,Xt.jsx)("div",{className:"border-line horizontal-line bottom-line"}),(0,Xt.jsx)("div",{className:"border-line vertical-line left-line"}),(0,Xt.jsx)("div",{className:"border-line vertical-line right-line"})]}),(0,Xt.jsxs)("div",{className:"corner-elements",children:[(0,Xt.jsx)("div",{className:"corner-element top-left-corner blue-corner"}),(0,Xt.jsx)("div",{className:"corner-element top-right-corner red-corner"}),(0,Xt.jsx)("div",{className:"corner-element bottom-left-corner red-corner"}),(0,Xt.jsx)("div",{className:"corner-element bottom-right-corner blue-corner"})]}),(0,Xt.jsxs)("div",{className:"main-content-wrapper individual-waiting-content",children:[(0,Xt.jsx)("div",{className:"panel-header-theme individual-waiting-header",children:(0,Xt.jsxs)("div",{className:"hospital-branding-theme",children:[g&&(0,Xt.jsx)("img",{src:g,alt:"Hospital Logo",className:"hospital-logo-img"}),(0,Xt.jsxs)("div",{className:"hospital-details-theme",children:[(0,Xt.jsx)("h1",{className:"hospital-title-theme",children:f}),(0,Xt.jsx)("p",{className:"hospital-location-theme",children:v}),(0,Xt.jsx)("p",{className:"arabic-text-theme",children:"\u0627\u0644\u062e\u062f\u0645\u062a \u0631\u0627\u0632\u06cc \u06c1\u0633\u067e\u062a\u0627\u0644 \u0627\u0633\u0644\u0627\u0645 \u0622\u0628\u0627\u062f"})]})]})}),(0,Xt.jsxs)("div",{className:"individual-main-panel",children:[(0,Xt.jsxs)("div",{className:"counter-display-panel",children:[(0,Xt.jsxs)("div",{className:"counter-shape-design",children:[(0,Xt.jsx)("div",{className:"shape-design-top"}),(0,Xt.jsx)("div",{className:"shape-design-middle"}),(0,Xt.jsx)("div",{className:"shape-design-bottom"})]}),(0,Xt.jsx)("div",{className:"counter-label-text",children:"Counter"}),(0,Xt.jsx)("div",{className:"counter-number-display-large",children:a.counterNumber})]}),(0,Xt.jsxs)("div",{className:"current-token-panel",children:[(0,Xt.jsx)("div",{className:"serving-header-section",children:(0,Xt.jsx)("h3",{className:"section-title-text",children:"SERVED TOKEN"})}),i?(0,Xt.jsx)("div",{className:"current-token-display-container",children:(0,Xt.jsx)("div",{className:"token-number-display-large",children:i.ticketNumber})}):(0,Xt.jsxs)("div",{className:"no-token-display-container",children:[(0,Xt.jsx)("i",{className:"fas fa-user-clock"}),(0,Xt.jsx)("div",{className:"no-token-message",children:"No Active Token"})]})]})]})]})]})},ha=e=>{let{component:t,redirectPath:n}=e;const[a,s]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),h=ae(),m=te(),{settings:p}=mn(),f={admin:{title:"Admin Dashboard",subtitle:"Hospital Management System",icon:"fas fa-cog",primaryColor:"#1e3a8a",accentColor:"#dc2626"},counter:{title:"Counter Login",subtitle:"Service Counter Access",icon:"fas fa-desktop",primaryColor:"#1e3a8a",accentColor:"#dc2626"},dispenser:{title:"Ticket Dispenser",subtitle:"Generate Patient Tickets",icon:"fas fa-ticket-alt",primaryColor:"#1e3a8a",accentColor:"#dc2626"},waiting:{title:"Waiting Area",subtitle:"Patient Display System",icon:"fas fa-tv",primaryColor:"#1e3a8a",accentColor:"#dc2626"},display:{title:"Display Screen",subtitle:"Information Display",icon:"fas fa-desktop",primaryColor:"#1e3a8a",accentColor:"#dc2626"}},g=f[t]||f.counter,v=()=>({admin:{username:"admin",password:"admin123"},operator:{username:"operator",password:"operator123"},dispenser:{username:"dispenser",password:"dispenser123"},display:{username:"display",password:"display123"},waiting:{username:"display",password:"display123"}}[t]||null),y=(null===p||void 0===p?void 0:p.hospitalName)||"ALKHIDMAT RAAZI HOSPITAL",x=(null===p||void 0===p?void 0:p.hospitalLogo)||"",b=(null===p||void 0===p?void 0:p.hospitalCity)||"ISLAMABAD";return(0,Xt.jsxs)("div",{className:"theme-container dark-blue-theme",children:[(0,Xt.jsx)("div",{className:"background-logo",children:x&&(0,Xt.jsx)("img",{src:x,alt:"Hospital Logo",className:"blured-logo"})}),(0,Xt.jsxs)("div",{className:"square-lines",children:[(0,Xt.jsx)("div",{className:"line horizontal top"}),(0,Xt.jsx)("div",{className:"line horizontal bottom"}),(0,Xt.jsx)("div",{className:"line vertical left"}),(0,Xt.jsx)("div",{className:"line vertical right"})]}),(0,Xt.jsxs)("div",{className:"corner-decorations",children:[(0,Xt.jsx)("div",{className:"corner top-left blue"}),(0,Xt.jsx)("div",{className:"corner top-right red"}),(0,Xt.jsx)("div",{className:"corner bottom-left red"}),(0,Xt.jsx)("div",{className:"corner bottom-right blue"})]}),(0,Xt.jsxs)("div",{className:"content-wrapper",children:[(0,Xt.jsxs)("div",{className:"login-header-theme",children:[(0,Xt.jsxs)("div",{className:"hospital-brand-theme",children:[x?(0,Xt.jsx)("img",{src:x,alt:"Hospital Logo",className:"hospital-logo-theme"}):(0,Xt.jsx)("div",{className:"hospital-logo-theme-icon",children:(0,Xt.jsx)("i",{className:"fas fa-hospital-alt"})}),(0,Xt.jsxs)("div",{className:"hospital-info-theme",children:[(0,Xt.jsx)("h1",{className:"hospital-name-theme",children:y}),(0,Xt.jsx)("p",{className:"hospital-city-theme",children:b}),(0,Xt.jsx)("p",{className:"arabic-text",children:"\u0627\u0644\u062e\u062f\u0645\u062a \u0631\u0627\u0632\u06cc \u06c1\u0633\u067e\u062a\u0627\u0644 \u0627\u0633\u0644\u0627\u0645 \u0622\u0628\u0627\u062f"})]})]}),(0,Xt.jsxs)("div",{className:"header-status-theme",children:[(0,Xt.jsxs)("div",{className:"status-indicator-theme online",children:[(0,Xt.jsx)("i",{className:"fas fa-circle"}),"System Online"]}),(0,Xt.jsx)("div",{className:"current-time-theme",children:(new Date).toLocaleTimeString()})]})]}),(0,Xt.jsx)("div",{className:"login-card-section",children:(0,Xt.jsxs)("div",{className:"login-card-theme",children:[(0,Xt.jsxs)("div",{className:"login-card-header-theme",children:[(0,Xt.jsx)("div",{className:"login-card-icon-theme",children:(0,Xt.jsx)("i",{className:g.icon})}),(0,Xt.jsx)("h2",{children:g.title}),(0,Xt.jsx)("p",{children:g.subtitle})]}),(0,Xt.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(""),u(!0);try{console.log("\ud83d\udd10 Attempting login for ".concat(a," to ").concat(t));const e=await xn.login(a,i,t);if(console.log("\u2705 Login successful, result:",e),!e.user)throw new Error("Login response missing user data");{var s,r;localStorage.setItem("isAuthenticated","true"),localStorage.setItem("user",JSON.stringify(e.user)),localStorage.setItem("accessToken",e.tokens.accessToken),localStorage.setItem("refreshToken",e.tokens.refreshToken),localStorage.setItem("component",t),localStorage.setItem("loginTime",(new Date).toISOString());const a=e.tokens.redirectPath||n||(null===(s=m.state)||void 0===s||null===(r=s.from)||void 0===r?void 0:r.pathname)||"/";console.log("\ud83d\udd04 Redirecting to: ".concat(a)),h(a,{replace:!0})}}catch(l){console.error("\u274c Login error:",l),c(l.message||"Login failed. Please check your credentials.")}finally{u(!1)}},className:"login-form-theme",children:[l&&(0,Xt.jsxs)("div",{className:"login-error-theme",children:[(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"}),l]}),(0,Xt.jsx)("div",{className:"login-form-group-theme",children:(0,Xt.jsxs)("div",{className:"login-input-container-theme",children:[(0,Xt.jsx)("i",{className:"fas fa-user login-input-icon-theme"}),(0,Xt.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Enter your username",required:!0,disabled:d,className:"login-input-theme"}),(0,Xt.jsx)("div",{className:"login-input-highlight-theme"})]})}),(0,Xt.jsx)("div",{className:"login-form-group-theme",children:(0,Xt.jsxs)("div",{className:"login-input-container-theme",children:[(0,Xt.jsx)("i",{className:"fas fa-lock login-input-icon-theme"}),(0,Xt.jsx)("input",{type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"Enter your password",required:!0,disabled:d,className:"login-input-theme"}),(0,Xt.jsx)("div",{className:"login-input-highlight-theme"})]})}),v()&&(0,Xt.jsx)("div",{className:"login-default-credentials-theme",children:(0,Xt.jsxs)("button",{type:"button",onClick:()=>{const e=v();e&&(s(e.username),o(e.password))},className:"login-btn-link-theme",children:[(0,Xt.jsx)("i",{className:"fas fa-key"}),"Use Default Credentials"]})}),(0,Xt.jsx)("button",{type:"submit",className:"login-submit-btn-theme",disabled:d||!a||!i,children:d?(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-spinner login-spinner-theme"}),"Signing In..."]}):(0,Xt.jsxs)(Xt.Fragment,{children:[(0,Xt.jsx)("i",{className:"fas fa-sign-in-alt"}),"Sign In to ",g.title]})})]})]})}),(0,Xt.jsxs)("div",{className:"login-footer-theme",children:[(0,Xt.jsxs)("div",{className:"footer-content-theme",children:[(0,Xt.jsxs)("div",{className:"system-info-theme",children:[y," \u2022 Queue Management System v2.0"]}),(0,Xt.jsxs)("div",{className:"login-component-badge-theme",children:[(0,Xt.jsx)("i",{className:"fas fa-microchip"}),"Accessing: ",(0,Xt.jsx)("strong",{children:g.title})]})]}),v()&&(0,Xt.jsx)("div",{className:"login-debug-info-theme",children:(0,Xt.jsxs)("small",{children:["Demo: ",v().username," / ",v().password]})})]})]})]})},ma=e=>{let{children:t,component:n}=e;const a=te(),s=xn.isAuthenticated(),r=xn.getCurrentUser(),i=xn.getCurrentComponent();if(!s)return(0,Xt.jsx)(ye,{to:"/login/".concat(n),state:{from:a},replace:!0});if(i!==n)return xn.logout(),(0,Xt.jsx)(ye,{to:"/login/".concat(n),state:{from:a},replace:!0});return(e=>{switch(n){case"admin":return"admin"===(null===r||void 0===r?void 0:r.role);case"counter":return["admin","operator","counter"].includes(null===r||void 0===r?void 0:r.role);case"dispenser":return["admin","dispenser"].includes(null===r||void 0===r?void 0:r.role)||(null===r||void 0===r||null===(e=r.permissions)||void 0===e?void 0:e.canGenerateTickets);case"waiting":case"display":return["admin","display"].includes(null===r||void 0===r?void 0:r.role);default:return!0}})()?t:(0,Xt.jsx)("div",{className:"access-denied",children:(0,Xt.jsxs)("div",{className:"denied-content",children:[(0,Xt.jsx)("i",{className:"fas fa-ban"}),(0,Xt.jsx)("h2",{children:"Access Denied"}),(0,Xt.jsxs)("p",{children:["You don't have permission to access the ",n," component."]}),(0,Xt.jsxs)("p",{children:["Your role: ",null===r||void 0===r?void 0:r.role]}),(0,Xt.jsx)("button",{onClick:()=>xn.logout(),className:"btn btn-primary",children:"Back to Login"})]})})};class pa extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("Error caught by boundary:",e,t)}render(){return this.state.hasError?(0,Xt.jsx)("div",{className:"error-boundary",children:(0,Xt.jsxs)("div",{className:"error-content",children:[(0,Xt.jsx)("div",{className:"error-icon",children:(0,Xt.jsx)("i",{className:"fas fa-exclamation-triangle"})}),(0,Xt.jsx)("h2",{children:"Something went wrong"}),(0,Xt.jsx)("p",{children:"We're sorry, but something went wrong. Please try refreshing the page."}),(0,Xt.jsxs)("details",{className:"error-details",children:[(0,Xt.jsx)("summary",{children:"Error Details"}),(0,Xt.jsx)("p",{children:this.state.error&&this.state.error.toString()}),(0,Xt.jsx)("pre",{children:this.state.errorInfo.componentStack})]}),(0,Xt.jsxs)("button",{className:"retry-btn",onClick:()=>window.location.reload(),children:[(0,Xt.jsx)("i",{className:"fas fa-redo"})," Reload Page"]})]})}):this.props.children}}const fa=pa;const ga=function(){return(0,Xt.jsx)(fa,{children:(0,Xt.jsx)(gn,{children:(0,Xt.jsx)(pn,{children:(0,Xt.jsx)(tn,{children:(0,Xt.jsx)(ke,{children:(0,Xt.jsx)("div",{className:"App",children:(0,Xt.jsxs)(Ne,{children:[(0,Xt.jsx)(xe,{path:"/login/admin",element:(0,Xt.jsx)(ha,{component:"admin"})}),(0,Xt.jsx)(xe,{path:"/login/counter",element:(0,Xt.jsx)(ha,{component:"counter"})}),(0,Xt.jsx)(xe,{path:"/login/dispenser",element:(0,Xt.jsx)(ha,{component:"dispenser"})}),(0,Xt.jsx)(xe,{path:"/login/waiting",element:(0,Xt.jsx)(ha,{component:"waiting"})}),(0,Xt.jsx)(xe,{path:"/login/display",element:(0,Xt.jsx)(ha,{component:"display"})}),(0,Xt.jsx)(xe,{path:"/login",element:(0,Xt.jsx)(ye,{to:"/login/admin",replace:!0})}),(0,Xt.jsx)(xe,{path:"/admin/*",element:(0,Xt.jsx)(ma,{component:"admin",children:(0,Xt.jsx)(Hn,{})})}),(0,Xt.jsx)(xe,{path:"/counter/select",element:(0,Xt.jsx)(ma,{component:"counter",children:(0,Xt.jsx)(na,{})})}),(0,Xt.jsx)(xe,{path:"/counter/:counterId",element:(0,Xt.jsx)(ma,{component:"counter",children:(0,Xt.jsx)(ta,{})})}),(0,Xt.jsx)(xe,{path:"/dispenser",element:(0,Xt.jsx)(ma,{component:"dispenser",children:(0,Xt.jsx)(Kn,{})})}),(0,Xt.jsx)(xe,{path:"/waiting/:displayId?",element:(0,Xt.jsx)(ma,{component:"waiting",children:(0,Xt.jsx)(ea,{})})}),(0,Xt.jsx)(xe,{path:"/display/:displayId",element:(0,Xt.jsx)(ma,{component:"display",children:(0,Xt.jsx)(oa,{})})}),(0,Xt.jsx)(xe,{path:"/reception/:displayId?",element:(0,Xt.jsx)(la,{})}),(0,Xt.jsx)(xe,{path:"/department/:deptCode",element:(0,Xt.jsx)(da,{})}),(0,Xt.jsx)(xe,{path:"/waiting/counter/:counterId",element:(0,Xt.jsx)(ua,{})}),(0,Xt.jsx)(xe,{path:"/",element:(0,Xt.jsx)(ye,{to:"/login/admin",replace:!0})}),(0,Xt.jsx)(xe,{path:"*",element:(0,Xt.jsx)(ye,{to:"/login/admin",replace:!0})})]})})})})})})})};o.createRoot(document.getElementById("root")).render((0,Xt.jsx)(r.StrictMode,{children:(0,Xt.jsx)(ga,{})}))})();
//# sourceMappingURL=main.e17735a4.js.map